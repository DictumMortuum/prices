{"version":3,"sources":["pages/cartoff.svg","components/BoardgameImage.js","components/Link.js","api/common.js","hooks/useBoardgame.js","components/BoardgameCard.js","components/StockDropdown.js","components/StoreDropdown.js","components/Breadcrumbs.js","components/SearchButton.js","components/SearchInput.js","hooks/useLogin.js","pages/GenericPage.js","hooks/useStep.js","pages/LandingPage.js","components/PriceCard.js","components/BoardgameHistoricPrice.js","hooks/usePrices.js","hooks/useHistory.js","hooks/useId.js","pages/BoardgamePage.js","components/Spinner.js","components/CompareCard.js","hooks/useWishlist.js","components/BggInput.js","components/PriorityDropdown.js","pages/WishlistPage.js","hooks/useStore.js","pages/CartPage.js","pages/SearchPage.js","components/GeeklistCard.js","hooks/useGeeklist.js","pages/GeeklistPage.js","pages/ComparePage.js","api/prices.js","api/stores.js","api/date.js","App.js","index.js","reducers/prices.js"],"names":["module","exports","__webpack_require__","p","BoardgameImage","props","srcs","_useState","useState","_useState2","Object","slicedToArray","i","setI","src","undefined","useEffect","image","Image","onerror","onload","complete","naturalWidth","naturalHeight","react_default","a","createElement","CardMedia","style","paddingTop","ForwardLink","React","forwardRef","ref","_ref","to","children","other","component","objectWithoutProperties","search","useLocation","params","URLSearchParams","delete","toWithParams","concat","toString","react_router_dom","assign","PlainLink","objectSpread","base","forceError","res","status","Error","logError","error","console","log","attemptNumber","retriesLeft","extractBggItem","d","obj","map","name","attributes","value","id","parseInt","objectid","transformBggData","data","tpl","boardgame_id","boardgame_name","images","useBoardgame","boardgame","setBoardgame","isMounted","fetch","then","json","fetchBoardgame","useStyles","makeStyles","theme","card_header","minHeight","BoardgameCard","rank","items","dispatch","useDispatch","classes","available_prices","sort","b","price","l","length","_useQueryParam","useQueryParam","withDefault","NumericArrayParam","_useQueryParam2","bgg_ids","setBggId","lowest","highest","Card","key","square","elevation","Link","toConsumableArray","CardContent","className","Typography","variant","color","CardActions","IconButton","onClick","type","cart","includes","filter","AddShoppingCart_default","StockDropdown","stock","useSelector","state","pricesReducer","NumberParam","setQstock","FormControl","fullWidth","InputLabel","htmlFor","Select","labelId","onChange","event","target","MenuItem","StoreDropdown","stores","current_stores","store","setQstore","multiple","filtered","col","_col$slice","slice","Set","filterStores","ListSubheader","background","root","flexGrow","textDecoration","components_Breadcrumbs","args","pathname","split","Breadcrumbs","separator","aria-label","Component","search_term","isSending","setIsSending","history","useHistory","useRef","current","sendRequest","useCallback","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","abrupt","push","stop","InputAdornment","position","disabled","Search_default","input","margin","spacing","defineProperty","breakpoints","up","marginRight","payload","Paper","onSubmit","e","preventDefault","InputBase","placeholder","inputProps","endAdornment","components_SearchButton","useLogin","saved","user","_useAuth","useAuth0","isAuthenticated","loginWithRedirect","logout","body","method","headers","Content-Type","JSON","stringify","details","fontFamily","appbar","marginBottom","bottomBar","top","bottom","content","padding","pagination","pages","pageSize","Math","ceil","MainPaper","LoginButton","Button","LogoutButton","picture","returnTo","window","location","origin","Avatar","alt","CartButton","cart_results","Badge","badgeContent","max","ShoppingCart","FavoriteButton","Favorite","SearchButton","Pageview","Bar","matches","breadcrumbs","Toolbar","react","SearchInput","GenericPage_SearchButton","GenericPage_FavoriteButton","GenericPage_CartButton","GenericPage_LogoutButton","GenericPage_LoginButton","Nothing","Grid","container","alignContent","alignItems","direction","item","xs","spinner","CircularProgress","height","EmptyImg","Controls","additional_controls","stock_filtered","store_ids","store_id","stores_without_stock","Main","child_data","page_size","paging","pre_component","store_filtered","page","setPage","page_data","array","pageNumber","paginate","Pagination","shape","count","GenericPage_Nothing","GenericPage","useMediaQuery","_useSelector","date","_props$paging","_useQueryParam3","_useLogin","scrollTo","AppBar","GenericPage_Bar","Container","maxWidth","md","GenericPage_Controls","GenericPage_Main","packagejs","version","Date","toLocaleDateString","storeFilter","stockFilter","useStep","f","prices","page_filtered","pricesToGroups","rs","LandingPage","_useStep","grouped","page_name","tile","lg","media","out_of_stock","opacity","addUTM","raw","url","URL","searchParams","append","Media","_props$boardgame","store_thumb","thumb","self_ref","href","rel","PriceCard","_props$boardgame2","self","classNames","PriceCard_Media","FacebookShareButton","FacebookIcon","size","round","FacebookMessengerShareButton","FacebookMessengerIcon","ViberShareButton","ViberIcon","WhatsappShareButton","WhatsappIcon","TwitterShareButton","TwitterIcon","label","maxMinAvg","arr","min","sum","parseFloat","toFixed","avg","formatDate","getDate","getMonth","formatLabel","getFullYear","BoardgameHistoricPrice","processed","cr_date","retval","k","_maxMinAvg","range","valueOf","transform","ResponsiveContainer","width","ComposedChart","CartesianGrid","strokeDasharray","XAxis","dataKey","scale","domain","tickFormatter","YAxis","Tooltip","labelFormatter","Area","fillOpacity","fill","Line","stroke","strokeWidth","activeDot","r","usePrices","setPrices","fetchPrices","setHistory","fetchPriceHistory","useId","BoardgamePage","fn","price_ids","Spinner","CompareCard","wishlist","preview","_wishlist$filter","thumbnail","req","encodeURIComponent","text","xml","XMLParser","parseFromString","fetchWishList","retries","pRetry","onFailedAttempt","wishlist_term","StringParam","setQname","term","sent","t0","_x","apply","this","arguments","OutlinedInput","paddingRight","onKeyPress","PriorityDropdown","wishlist_priority","ViewSwitch","wishlist_stores_view","FormGroup","FormControlLabel","control","Switch","checked","sumPrices","reduce","curr","pricesToStores","diff","StoresList","_stores$filter","useStore","WishesView","StoresView","WishlistPage_StoresList","WishlistPage","username","_callee2","_context2","useWishlist","priority_filtered","wishlistpriority","BooleanParam","setQview","Fragment","BggInput","PriorityDropdown_PriorityDropdown","WishlistPage_ViewSwitch","Spinner_Spinner","CartPage","searchFilter","search_enabled","search_results","fuse","includeScore","shouldSort","ignoreLocation","keys","score","SearchPage","paddingLeft","colored","backgroundColor","GeeklistCard","alternate","list_id","useGeeklist","geeklist_id","setItems","GeeklistPage","geeklist","ComparePage","fetchAllPrices","createAsyncThunk","buffer","compressed","decompressed","origText","arrayBuffer","Uint8Array","fflate","parse","fetchStores","fetchDate","localStorage","getItem","setItem","App","qstore","bgg_id","_useQueryParam5","qstock","_useQueryParam7","qname","_useQueryParam9","qview","react_router","path","exact","rootReducer","combineReducers","action","order","composedEnhancer","composeWithDevTools","applyMiddleware","thunkMiddleware","createStore","queryStringifyOptions","transformSearchString","transformSearchStringJsonSafe","createTheme","palette","primary","main","secondary","overrides","MuiInputLabel","ReactDOM","render","ThemeProvider","es","auth0_react_esm","clientId","redirectUri","esm","ReactRouterRoute","Route","stringifyOptions","document","getElementById"],"mappings":"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","file":"static/js/main.3e99528e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cartoff.dd87c6d4.svg\";","import React, { useEffect, useState } from \"react\";\nimport CardMedia from '@material-ui/core/CardMedia';\n\nexport default props => {\n  const { srcs } = props;\n  const [i, setI] = useState(0);\n  const src = srcs[i] === undefined ? \"https://via.placeholder.com/250\" : srcs[i]\n\n  useEffect(() => {\n    const image = new Image();\n    const checkValid = () => {\n      if (image.complete && image.naturalWidth < 100 && image.naturalHeight < 100) {\n        setI(i+1);\n      }\n    }\n\n    image.onerror = () => { setI(i+1) }\n    image.onload = checkValid;\n    image.src = srcs[i];\n  }, [srcs]);\n\n  return (\n    <CardMedia style={{ paddingTop: '75%' }} image={src} />\n  );\n};\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst PlainLink = ({ to, children, component, ...other }) => {\n  const { search } = useLocation();\n  const params = new URLSearchParams(search);\n  params.delete(\"page\");\n  const toWithParams = `${to}?${params.toString()}`\n\n  return (\n    <Link {...other} to={toWithParams}>\n      {children}\n    </Link>\n  )\n}\n\nexport const ForwardLink = React.forwardRef((props, ref) => PlainLink({...props, ref}));\n\nexport default ForwardLink;\n","export const base = 'https://raw.githubusercontent.com/DictumMortuum/json-api/master'\nexport const bgg_xmlapi = 'https://boardgamegeek.com/xmlapi'\nexport const bgg_xmlapi2 = 'https://api.geekdo.com/xmlapi2'\nexport const deta = 'https://szb34l.deta.dev'\n\nexport const forceError = res => {\n  if (res.status === 202) {\n    throw new Error(\"impersonating an error, as we have to retry, since the request is queued on the backend now\");\n  } else {\n    return res\n  }\n}\n\nexport const logError = error => {\n  console.log(`Attempt ${error.attemptNumber} failed. There are ${error.retriesLeft} retries left.`);\n}\n\nconst extractBggItem = d => {\n  const obj = {};\n  const { children } = d;\n\n  children.map(({ name, attributes, value}) => {\n    if(value !== \"\") {\n      obj[name] = value;\n    } else {\n      obj[name] = attributes\n    }\n\n    return name\n  });\n\n  return {\n    id: parseInt(d.attributes.objectid),\n    ...obj,\n  }\n}\n\nexport const transformBggData = data => {\n  // console.log(\n  //   data.children.map(extractBggItem)\n  // )\n  // const objtoid = data.children.map(d => d.attributes.objectid)\n  // const filtered = objtoid.filter(d => d !== undefined)\n  // const unique = [...new Set(filtered)]\n  // return unique.map(d => parseInt(d))\n  return data.children.map(extractBggItem);\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nconst fetchBoardgame = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/boardgame.json').then(res => res.json())\n}\n\nconst tpl = {\n  boardgame_id: \"\",\n  boardgame_name: \"\",\n  images: [],\n}\n\nexport const useBoardgame = boardgame_id => {\n  const [boardgame, setBoardgame] = useState(tpl)\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchBoardgame(boardgame_id).then(data => {\n      if (isMounted) {\n        setBoardgame(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [boardgame_id])\n\n  return boardgame\n}\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport BoardgameImage from './BoardgameImage';\nimport Link from './Link';\nimport { useBoardgame } from '../hooks/useBoardgame';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport { useDispatch } from \"react-redux\";\nimport { NumericArrayParam, withDefault, useQueryParam } from 'use-query-params';\n\nconst useStyles = makeStyles((theme) => ({\n  card_header: {\n    minHeight: 120,\n  },\n}));\n\nconst onClick = (dispatch, setBggId) => (boardgame_id, bgg_ids) => {\n  dispatch({\n    type: \"ADD_TO_CART\",\n    cart: boardgame_id,\n  })\n\n  if(bgg_ids.includes(boardgame_id)) {\n    setBggId(bgg_ids.filter(d => d !== boardgame_id));\n  } else {\n    setBggId([...bgg_ids, boardgame_id])\n  }\n}\n\nexport default props => {\n  const { id, boardgame_id, rank, items } = props;\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const boardgame = useBoardgame(boardgame_id);\n  const { images, boardgame_name } = boardgame;\n  const available_prices = items.sort((a, b) => a.price - b.price)\n  const l = available_prices.length;\n  const [bgg_ids, setBggId] = useQueryParam(\"bgg_id\", withDefault(NumericArrayParam, []));\n\n  let lowest = undefined;\n  let highest = undefined;\n\n  if (l >= 1) {\n    lowest = available_prices[0]\n  }\n\n  if (l >= 2) {\n    if (lowest.price !== available_prices[l-1].price) {\n      highest = available_prices[l-1]\n    }\n  }\n\n  return (\n    <Card key={id} square={true} elevation={3}>\n      <Link to={\"/item/\" + boardgame_id}>\n        <BoardgameImage srcs={[`https://raw.githubusercontent.com/DictumMortuum/json-api/master/rest/v1/boardgames/${boardgame_id}/image.avif`, ...images]} />\n      </Link>\n      <CardContent className={classes.card_header}>\n        {rank < 999999 && <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          BGG Rank {rank}\n        </Typography>}\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {lowest && \"€\" + lowest.price} {highest && \"- €\" + highest.price}\n        </Typography>\n        <Typography variant=\"subtitle1\">\n          {boardgame_name}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <IconButton onClick={() => onClick(dispatch, setBggId)(boardgame_id, bgg_ids)}>\n          <AddShoppingCartIcon />\n        </IconButton>\n      </CardActions>\n    </Card>\n  )\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { NumberParam, useQueryParam } from 'use-query-params';\n\nexport default () => {\n  const stocks = [\"In stock\", \"Preorder\", \"Out of stock\"];\n  const { stock } = useSelector(state => state.pricesReducer);\n  const dispatch = useDispatch();\n  const [, setQstock] = useQueryParam(\"stock\", NumberParam);\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel htmlFor=\"stock-select-label\">Stock</InputLabel>\n      <Select\n        labelId=\"stock-select-label\"\n        id=\"stock-select\"\n        value={stock}\n        onChange={(event) => {\n          dispatch({\n            type: \"SET_STOCK\",\n            stock: event.target.value\n          })\n\n          setQstock(event.target.value);\n        }}\n      >\n        {stocks.map((d, i) => <MenuItem key={d} value={i}>{d}</MenuItem>)}\n        <MenuItem key={-1} value={-1}>Show all</MenuItem>\n      </Select>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport { NumericArrayParam, useQueryParam } from 'use-query-params';\n\nconst filterStores = col => {\n  const [last] = col.slice(-1);\n\n  if (last === -1) {\n    return [-1]\n  } else {\n    return [...new Set(col.filter(d => d !== -1))]\n  }\n}\n\nexport default props => {\n  const { stores, current_stores } = props;\n  const { store } = useSelector(state => state.pricesReducer)\n  const dispatch = useDispatch();\n  const [, setQstore] = useQueryParam(\"store\", NumericArrayParam);\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel htmlFor=\"store-select-label\">Store</InputLabel>\n      <Select\n        labelId=\"store-select-label\"\n        id=\"store-select\"\n        value={store}\n        multiple\n        onChange={(event) => {\n          const filtered = filterStores(event.target.value);\n\n          dispatch({\n            type: \"SET_STORE\",\n            store: filtered\n          })\n\n          setQstore(filtered);\n        }}\n      >\n        <MenuItem key={-1} value={-1}>All stores</MenuItem>\n        <ListSubheader style={{ background: \"white\" }}>With Stock</ListSubheader>\n        {current_stores.map(d => <MenuItem key={d.id} value={d.id}>{d.name}</MenuItem>)}\n        <ListSubheader style={{ background: \"white\" }}>Rest</ListSubheader>\n        {stores.map(d => <MenuItem key={d.id} value={d.id}>{d.name}</MenuItem>)}\n      </Select>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport { Typography } from '@material-ui/core';\nimport { useLocation } from 'react-router-dom';\nimport Link from './Link';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    color: \"#d8dee9\",\n    flexGrow: 1\n  },\n  color: {\n    color: \"#d8dee9\",\n    textDecoration: \"none\",\n  }\n}));\n\nexport default () => {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const args = pathname.split(\"/\").slice(2).filter(d => d !== \"item\").filter(d => d !== \"\");\n\n  return (\n    <Breadcrumbs className={classes.root} separator=\"/\" aria-label=\"breadcrumb\">\n      <Link className={classes.color} to={\"/\"}>\n        <Typography variant=\"h5\">Prices</Typography>\n      </Link>\n      {args.map(d => (\n        <Link key={d} className={classes.color} to={\"/item/\" + d}>\n          <Typography variant=\"h5\" >{d}</Typography>\n        </Link>\n      ))}\n    </Breadcrumbs>\n  );\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nconst Component = () => {\n  const dispatch = useDispatch();\n  const { search_term } = useSelector(state => state.pricesReducer);\n  const [isSending, setIsSending] = useState(false);\n  const history = useHistory();\n  const isMounted = useRef(true);\n\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n    return () => {\n      isMounted.current = false\n    }\n  }, [])\n\n  const sendRequest = useCallback(async() => {\n    // don't send again while we are sending\n    if (isSending) return\n    // update state\n    setIsSending(true)\n    dispatch({ type: \"EXECUTE_SEARCH\" })\n    history.push(\"/search\")\n\n    // once the request is sent, update state again\n    if (isMounted.current) // only update if we are still mounted\n      setIsSending(false)\n  }, [search_term, dispatch]) // update the callback if the state changes\n\n  return (\n    <InputAdornment position=\"end\">\n      <IconButton type=\"submit\" disabled={isSending} onClick={sendRequest} aria-label=\"search\">\n        <SearchIcon />\n      </IconButton>\n    </InputAdornment>\n  )\n}\n\nexport default Component;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchButton from './SearchButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\n\nconst useStyles = makeStyles((theme) => ({\n  input: {\n    margin: theme.spacing(1),\n  },\n  root: {\n    margin: theme.spacing(1),\n    [theme.breakpoints.up('md')]: {\n      marginRight: theme.spacing(3),\n    },\n  }\n}));\n\nconst onChange = dispatch => event => dispatch({\n  type: \"SET_SEARCH_TERM\",\n  payload: event.target.value,\n})\n\nconst Component = props => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  return (\n    <Paper component=\"form\" onSubmit={e => { e.preventDefault(); }}>\n      <InputBase\n        placeholder=\" Search...\"\n        className={classes.input}\n        fullWidth\n        inputProps={{ 'aria-label': 'search' }}\n        onChange={onChange(dispatch)}\n        endAdornment={<SearchButton />}\n      />\n    </Paper>\n  )\n}\n\nexport default Component;\n","import { useEffect } from 'react';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { useDispatch } from 'react-redux';\nimport { useSelector } from \"react-redux\";\nimport { deta } from \"../api/common\";\n\nconst createUser = body => fetch(`${deta}/user`, {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify(body)\n}).then(res => res.json())\n\nexport const useLogin = () => {\n  const dispatch = useDispatch();\n  const { saved } = useSelector(state => state.pricesReducer.user);\n  const { isAuthenticated, user, loginWithRedirect, logout } = useAuth0();\n\n  useEffect(() => {\n    if (isAuthenticated && !saved) {\n      createUser(user).then(data => dispatch({\n        type: \"SET_USER\",\n        payload: {\n          isAuthenticated,\n          details: data,\n        }\n      }));\n    }\n  }, [dispatch, isAuthenticated, saved, user]);\n\n  return {\n    isAuthenticated,\n    user,\n    loginWithRedirect,\n    logout,\n  }\n}\n","import React, { useEffect, Fragment } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Badge from '@material-ui/core/Badge';\nimport StockDropdown from '../components/StockDropdown';\nimport StoreDropdown from '../components/StoreDropdown';\nimport Breadcrumbs from '../components/Breadcrumbs';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useSelector } from \"react-redux\";\nimport Link from '../components/Link';\nimport Typography from '@material-ui/core/Typography';\nimport EmptyImg from './cartoff.svg';\nimport Paper from '@material-ui/core/Paper';\nimport SearchInput from '../components/SearchInput';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Container from '@material-ui/core/Container';\nimport packagejs from '../../package.json';\nimport Pagination from '@material-ui/lab/Pagination';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport { ShoppingCart, Favorite, Pageview, Compare } from '@material-ui/icons';\nimport { useLogin } from '../hooks/useLogin';\nimport { useQueryParam, NumberParam, withDefault } from 'use-query-params';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    background: '#d8dee9',\n    fontFamily: \"sans\",\n  },\n  appbar: {\n    marginBottom: theme.spacing(4),\n  },\n  bottomBar: {\n    top: 'auto',\n    bottom: 0,\n  },\n  content: {\n    minHeight: '90vh',\n    padding: 10\n  },\n  margin: {\n    color: \"white\"\n  },\n  pagination: {\n    padding: theme.spacing(1),\n  },\n}));\n\nconst paginate = (array, pageSize, pageNumber, paging) => {\n  return paging === true ? array.slice((pageNumber-1) * pageSize, pageNumber * pageSize) : array;\n}\n\nconst pages = (col, pageSize) => Math.ceil(col.length/pageSize)\n\nconst MainPaper = props => (\n  <Paper variant=\"outlined\" square {...props} />\n)\n\nconst LoginButton = props => {\n  const { loginWithRedirect } = props;\n  return <Button onClick={() => loginWithRedirect()} color=\"inherit\">Login</Button>;\n};\n\nconst LogoutButton = props => {\n  const { user, logout } = props;\n  const { picture, name } = user;\n\n  return (\n    <IconButton onClick={() => logout({ returnTo: window.location.origin })} >\n      <Avatar alt={name} src={picture} />\n    </IconButton>\n  );\n};\n\nconst CartButton = props => {\n  const { cart_results } = props;\n\n  return (\n    <IconButton>\n      <Badge badgeContent={cart_results.length} color=\"secondary\" max={99999} style={{ color: \"white\" }} component={Link} to=\"/cart\">\n        <ShoppingCart />\n      </Badge>\n    </IconButton>\n  )\n}\n\nconst FavoriteButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/wishlist\">\n      <Favorite />\n    </IconButton>\n  )\n}\n\nconst SearchButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/search\">\n      <Pageview />\n    </IconButton>\n  )\n}\n\nconst CompareButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/compare\">\n      <Compare />\n    </IconButton>\n  )\n}\n\nconst Bar = props => {\n  const { matches, breadcrumbs, isAuthenticated, cart_results, loginWithRedirect, logout, user } = props;\n\n  return (\n    <Toolbar>\n      { breadcrumbs && <Breadcrumbs />}\n      { matches && <Fragment>\n        <SearchInput />\n        <SearchButton />\n        <FavoriteButton />\n        { false && <CompareButton />}\n        <CartButton cart_results={cart_results} />\n        { isAuthenticated ? <LogoutButton logout={logout} user={user} /> : <LoginButton loginWithRedirect={loginWithRedirect} />}\n      </Fragment>}\n    </Toolbar>\n  )\n}\n\nconst Nothing = props => (\n  <Grid container alignContent=\"center\" alignItems=\"center\" direction=\"column\">\n    <Grid item xs={12}>\n      {props.spinner ? <CircularProgress /> : <Typography variant=\"body1\" color=\"inherit\"><img style={{ height: 300 }} alt=\"\" src={EmptyImg} /></Typography>}\n    </Grid>\n  </Grid>\n)\n\nconst Controls = props => {\n  const { stores, additional_controls, stock_filtered } = props;\n  const store_ids = [...new Set(stock_filtered.map(d => d.store_id))];\n  const current_stores = stores.filter(d => store_ids.includes(d.id));\n  const stores_without_stock = stores.filter(d => !store_ids.includes(d.id));\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <StoreDropdown stores={stores_without_stock} current_stores={current_stores} />\n      </Grid>\n      <Grid item xs={12}>\n        <StockDropdown />\n      </Grid>\n      { additional_controls !== null && additional_controls }\n    </Grid>\n  );\n}\n\nconst Main = props => {\n  const { child_data, page_size, paging, pre_component, store_filtered, component, spinner } = props;\n  const [page, setPage] = useQueryParam('page', withDefault(NumberParam, 1));\n  const page_data = paginate(child_data, page_size, page, paging);\n\n  return (\n    <Grid container spacing={2}>\n      {child_data.length > page_size && paging && <Grid item xs={12}>\n        <Pagination variant=\"outlined\" shape=\"rounded\" count={pages(child_data, page_size)} page={page} onChange={(event, value) => setPage(value, 'pushIn')} />\n      </Grid>}\n      {pre_component !== undefined && pre_component}\n      {store_filtered.length > 0 ? component(page_data) : <Nothing spinner={spinner} />}\n      {child_data.length > page_size && paging && <Grid item xs={12}>\n        <Pagination variant=\"outlined\" shape=\"rounded\" count={pages(child_data, page_size)} page={page} onChange={(event, value) => setPage(value, 'pushIn')} />\n      </Grid>}\n    </Grid>\n  );\n}\n\nexport default props => {\n  const classes = useStyles();\n  const matches = useMediaQuery(theme => theme.breakpoints.up('md'));\n  const { stores, cart_results, spinner, date } = useSelector(state => state.pricesReducer);\n  const { store_filtered, stock_filtered, child_data, component, pre_component, additional_controls, paging=true } = props;\n  const page_size = props.page_size || 12;\n  const [page] = useQueryParam('page', withDefault(NumberParam, 1));\n  const { loginWithRedirect, logout, isAuthenticated, user } = useLogin();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [page]);\n\n  return (\n    <Grid container className={classes.root} alignContent=\"center\" alignItems=\"center\">\n      <AppBar position=\"static\" className={classes.appbar}>\n        <Bar user={user} breadcrumbs={true} matches={matches} isAuthenticated={isAuthenticated} cart_results={cart_results} loginWithRedirect={loginWithRedirect} logout={logout} />\n      </AppBar>\n\n      <Container maxWidth=\"xl\">\n        <Grid container spacing={4} component={MainPaper} className={classes.content}>\n          <Grid item md={2} xs={12} component=\"div\">\n            <Controls stock_filtered={stock_filtered} stores={stores} additional_controls={additional_controls} />\n          </Grid>\n\n          <Grid item md={10} xs={12} component=\"div\">\n            <Main\n              child_data={child_data}\n              page_size={page_size}\n              paging={paging}\n              pre_component={pre_component}\n              store_filtered={store_filtered}\n              spinner={spinner}\n              component={component}\n            />\n          </Grid>\n        </Grid>\n      </Container>\n\n      {!matches && <AppBar position=\"fixed\" className={classes.bottomBar}>\n        <Bar user={user} breadcrumbs={false} matches={!matches} isAuthenticated={isAuthenticated} cart_results={cart_results} loginWithRedirect={loginWithRedirect} logout={logout} />\n      </AppBar>}\n\n      <Grid item xs={12}>\n        <Toolbar>\n          <Typography variant=\"body1\" color=\"inherit\">\n            © 2022 Dimitris Raviolos - {packagejs.version} - Last update: {new Date(date).toLocaleDateString('el-GR')}\n          </Typography>\n        </Toolbar>\n      </Grid>\n    </Grid>\n  )\n}\n","import { useSelector } from \"react-redux\";\n\nexport const storeFilter = store => d => {\n  if (store.includes(-1)) {\n    return true;\n  } else {\n    return store.includes(d.store_id);\n  }\n}\nexport const stockFilter = stock => d => d.stock === stock || stock === -1\n\nexport const useStep = f => {\n  const { store, stock, prices } = useSelector(state => state.pricesReducer)\n  const page_filtered = f !== undefined ? f(prices) : prices\n  const stock_filtered = page_filtered.filter(stockFilter(stock))\n  const store_filtered = stock_filtered.filter(storeFilter(store))\n\n  return {\n    page_filtered,\n    stock_filtered,\n    store_filtered,\n  }\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport BoardgameCard from '../components/BoardgameCard';\nimport GenericPage from './GenericPage';\nimport { useStep } from '../hooks/useStep';\n\nexport const pricesToGroups = data => {\n  const rs = [];\n\n  data.map(d => {\n    if (rs[d.boardgame_id] === undefined) {\n      rs[d.boardgame_id] = {\n        ...d,\n        items: []\n      }\n\n      if (rs[d.boardgame_id].rank === undefined) {\n        rs[d.boardgame_id].rank = 999999;\n      }\n    }\n\n    rs[d.boardgame_id].items.push(d)\n    return d\n  })\n\n  return rs.filter(d => d.items.length > 0).sort((a, b) => a.rank - b.rank)\n}\n\nexport default () => {\n  const { store_filtered, stock_filtered } = useStep();\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={true}\n      page_name=\"/\"\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <BoardgameCard {...tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from './Link';\nimport { useSelector } from \"react-redux\";\nimport { Typography } from '@material-ui/core';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport classNames from 'classnames';\nimport {\n  FacebookShareButton,\n  FacebookIcon,\n  FacebookMessengerShareButton,\n  FacebookMessengerIcon,\n  ViberShareButton,\n  ViberIcon,\n  WhatsappShareButton,\n  WhatsappIcon,\n  TwitterShareButton,\n  TwitterIcon,\n} from \"react-share\";\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    height: 0,\n    paddingTop: '75%', // 16:9\n  },\n  card_header: {\n    minHeight: 110,\n  },\n  out_of_stock: {\n    opacity: 0.5,\n  }\n}));\n\nconst addUTM = raw => {\n  const url = new URL(raw);\n  url.searchParams.append(\"utm_source\", \"dictummortuum\");\n  url.searchParams.append(\"utm_medium\", \"dictummortuum\");\n  url.searchParams.append(\"utm_campaign\", \"dictummortuum\");\n\n  return url.toString();\n}\n\nconst Media = props => {\n  const { store_thumb, url, thumb, boardgame_id, stock } = props.boardgame;\n  const { self_ref } = props;\n  const classes = useStyles();\n\n  if(self_ref) {\n    return (\n      <Link to={\"/item/\" + boardgame_id + \"?stock=\" + stock}>\n        <CardMedia\n          className={classes.media}\n          image={store_thumb === \"\" ? thumb : store_thumb}\n        />\n      </Link>\n    )\n  } else {\n    return (\n      <a href={addUTM(url)} target=\"_blank\" rel=\"noopener noreferrer\">\n        <CardMedia\n          className={classes.media}\n          image={store_thumb === \"\" ? thumb : store_thumb}\n        />\n      </a>\n    )\n  }\n}\n\nexport default props => {\n  const classes = useStyles();\n  const { stores } = useSelector(state => state.pricesReducer);\n  const { url, name, store_id, price, stock } = props.boardgame;\n  const self = window.location.href;\n\n  return (\n    <Card className={classNames({[classes.out_of_stock]: stock === 2})}>\n      { url && <Media {...props} />}\n      <CardActions>\n        <IconButton component=\"div\">\n          <FacebookShareButton style={{ height: 24 }} url={self}>\n            <FacebookIcon size={24} round />\n          </FacebookShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <FacebookMessengerShareButton style={{ height: 24 }} url={self}>\n            <FacebookMessengerIcon size={24} round />\n          </FacebookMessengerShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <ViberShareButton style={{ height: 24 }} url={self}>\n            <ViberIcon size={24} round />\n          </ViberShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <WhatsappShareButton style={{ height: 24 }} url={self}>\n            <WhatsappIcon size={24} round />\n          </WhatsappShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <TwitterShareButton style={{ height: 24 }} url={self}>\n            <TwitterIcon size={24} round />\n          </TwitterShareButton>\n        </IconButton>\n      </CardActions>\n      <CardContent className={classes.card_header}>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {stores.filter(d => d.id === store_id).map(d => d.name)}\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          €{price}\n        </Typography>\n        <Typography variant=\"subtitle1\">\n          {name}\n        </Typography>\n      </CardContent>\n    </Card>\n  )\n}\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useSelector } from \"react-redux\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { stockFilter, storeFilter } from '../hooks/useStep';\nimport {\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  ResponsiveContainer,\n  ComposedChart,\n  Tooltip,\n  Area,\n} from 'recharts';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(4),\n  },\n  label: {\n    marginBottom: theme.spacing(1),\n  }\n}));\n\nconst maxMinAvg = (arr) => {\n  var max = arr[0].price;\n  var min = arr[0].price;\n  var sum = arr[0].price;\n\n  for (var i = 1; i < arr.length; i++) {\n    if (arr[i].price > max) {\n      max = arr[i].price;\n    }\n    if (arr[i].price < min) {\n      min = arr[i].price;\n    }\n    sum = sum + arr[i].price;\n  }\n\n  return {\n    max: parseFloat(max.toFixed(2)),\n    min: parseFloat(min.toFixed(2)),\n    avg: parseFloat((sum/arr.length).toFixed(2))\n  }\n}\n\nconst transform = data => {\n  const rs = {};\n\n  data.map(d => {\n    if(rs[d.cr_date] === undefined) {\n      rs[d.cr_date] = [];\n    }\n\n    rs[d.cr_date].push(d)\n\n    return d\n  })\n\n  const retval = [];\n\n  for(let k in rs) {\n    const date = new Date(k)\n    const { avg, min, max } = maxMinAvg(rs[k])\n\n    retval.push({\n      avg,\n      range: [min, max],\n      cr_date: date.valueOf(),\n    })\n  }\n\n  return retval\n}\n\nconst formatDate = d => {\n  const date = new Date(d)\n  return date.getDate() + \"/\" + (date.getMonth() + 1)\n}\n\nconst formatLabel = d => {\n  const date = new Date(d)\n  return date.getDate() + \"/\" + (date.getMonth() + 1) + \"/\" + date.getFullYear()\n}\n\nconst domain = col => {\n  if(col.length === 0) {\n    return []\n  } else {\n    return [col[0].cr_date - 43200000, col[col.length-1].cr_date + 43200000]\n  }\n}\n\nexport default props => {\n  const classes = useStyles();\n  const { history } = props;\n  const { store, stock } = useSelector(state => state.pricesReducer)\n  const p = history.filter(stockFilter(stock)).filter(storeFilter(store))\n  const processed = transform(p).sort((a, b) => b.cr_date - a.cr_date)\n\n  return (\n     <Paper className={classes.root}>\n      <Typography variant=\"body1\" color=\"inherit\" className={classes.label}>\n        Price history\n      </Typography>\n      <ResponsiveContainer width=\"100%\" height={200} >\n        <ComposedChart data={processed}>\n          <CartesianGrid strokeDasharray=\"5 5\" />\n          <XAxis dataKey=\"cr_date\" scale=\"time\" type=\"number\" domain={domain(processed)} tickFormatter={formatDate} />\n          <YAxis domain={['auto', 'auto']} type=\"number\" />\n          <Tooltip labelFormatter={formatLabel} />\n          <Area type=\"monotone\" dataKey=\"range\" fillOpacity={0.3} fill=\"#5e81ac\" />\n          <Line type=\"monotone\" dataKey=\"avg\" stroke=\"#bf616a\" strokeWidth={3} activeDot={{ r: 8 }} />\n        </ComposedChart>\n      </ResponsiveContainer>\n    </Paper>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nconst fetchPrices = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/prices.json').then(res => res.json())\n}\n\nconst fetchPrice = price_id => {\n  return fetch(base + '/rest/v1/prices/' + price_id + '.json').then(res => res.json())\n}\n\nexport const usePrices = boardgame_id => {\n  const [prices, setPrices] = useState([])\n\n  useEffect(() => {\n    fetchPrices(boardgame_id).then(data => setPrices(data))\n  }, [boardgame_id])\n\n  return prices\n}\n\nexport const usePrice = price_id => {\n  const [price, setPrice] = useState([])\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchPrice(price_id).then(data => {\n      if (isMounted) {\n        setPrice(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [price_id])\n\n  return price\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nexport const fetchPriceHistory = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/history.json').then(res => res.json())\n}\n\nexport const useHistory = boardgame_id => {\n  const [history, setHistory] = useState([])\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchPriceHistory(boardgame_id).then(data => {\n      if (isMounted) {\n        setHistory(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [boardgame_id])\n\n  return history\n}\n","import { useLocation } from 'react-router-dom';\n\nexport const useId = () => {\n  const { pathname } = useLocation();\n  const id = parseInt(pathname.split(\"/\")[2]);\n  return id\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport PriceCard from '../components/PriceCard';\nimport GenericPage from './GenericPage';\nimport BoardgameHistoricPrice from '../components/BoardgameHistoricPrice';\nimport { usePrices } from '../hooks/usePrices';\nimport { useHistory } from '../hooks/useHistory';\nimport { useStep } from '../hooks/useStep';\nimport { useId } from '../hooks/useId';\n\nconst fn = id => col => col.filter(d => d.boardgame_id === id).sort((a, b) => a.price - b.price)\n\nexport default () => {\n  const id = useId();\n  const { stock_filtered, store_filtered } = useStep(fn(id));\n  const history = useHistory(id);\n  const prices = usePrices(id);\n  const price_ids = store_filtered.map(d => d.id);\n\n  return (\n    <GenericPage\n      child_data={prices.filter(d => price_ids.includes(d.id))}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={false}\n      pre_component={\n        <Grid item xs={12}>\n          <BoardgameHistoricPrice history={history} />\n        </Grid>\n      }\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <PriceCard boardgame={tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport const Spinner = () => (\n  <Grid container alignContent=\"center\" alignItems=\"center\" direction=\"column\">\n    <Grid item xs={12}>\n      <CircularProgress />\n    </Grid>\n  </Grid>\n)\n","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Link from './Link';\n\nexport default props => {\n  const { id, boardgame_id, wishlist, preview } = props;\n  const [ wish ] = wishlist.filter(d => d.id === boardgame_id);\n  const { thumbnail } = wish;\n\n  return (\n    <Card key={id} square={true} elevation={3}>\n      <Link to={\"/item/\" + boardgame_id}>\n        <CardMedia style={{ paddingTop: '75%' }} image={thumbnail === undefined ? preview : thumbnail} />\n      </Link>\n    </Card>\n  )\n}\n","import { useEffect } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { bgg_xmlapi2, forceError, logError, transformBggData } from \"../api/common\";\nimport XMLParser from 'react-xml-parser';\nimport pRetry from 'p-retry';\nimport { StringParam, useQueryParam } from 'use-query-params';\n\nconst req = name => fetch(`${bgg_xmlapi2}/collection?username=${encodeURIComponent(name)}&wishlist=1`)\n  .then(forceError)\n  .then(res => res.text())\n  .then(data => {\n    const xml = new XMLParser().parseFromString(data);\n    return transformBggData(xml)\n  })\n\nexport const fetchWishList = (name, retries) => pRetry(async () => req(name), { onFailedAttempt: logError, retries })\n\nexport const useWishlist = () => {\n  const { wishlist } = useSelector(state => state.pricesReducer)\n  const [username] = useQueryParam(\"bgg_username\", StringParam);\n  const dispatch = useDispatch();\n\n  useEffect(async () => {\n    if (username !== undefined) {\n      dispatch({\n        type: \"SET_WISHLIST_USERNAME\",\n        payload: username,\n      })\n\n      let rs;\n      try {\n        rs = await fetchWishList(username, 2)\n      } catch(e) {\n        rs = [];\n      }\n\n      dispatch({\n        type: \"SET_WISHLIST\",\n        payload: rs\n      })\n\n    }\n  }, [username])\n\n  return wishlist\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { fetchWishList } from '../hooks/useWishlist';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { StringParam, useQueryParam } from 'use-query-params';\n\nconst onChange = dispatch => event => dispatch({\n  type: \"SET_WISHLIST_USERNAME\",\n  payload: event.target.value,\n})\n\nconst Component = props => {\n  const dispatch = useDispatch();\n  const [isSending, setIsSending] = useState(false)\n  const isMounted = useRef(true)\n  const { wishlist_term } = useSelector(state => state.pricesReducer)\n  const [, setQname] = useQueryParam(\"bgg_username\", StringParam);\n\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n    return () => {\n      isMounted.current = false\n    }\n  }, [])\n\n  const sendRequest = useCallback(async term => {\n    // don't send again while we are sending\n    if (isSending) return\n    // update state\n    setIsSending(true)\n\n    dispatch({\n      type: \"TOGGLE_SPINNER\"\n    })\n\n    // send the actual request\n    let rs;\n    try {\n      rs = await fetchWishList(term, 2)\n    } catch(e) {\n      rs = [];\n    }\n\n    dispatch({\n      type: \"SET_WISHLIST\",\n      payload: rs\n    })\n\n    setQname(term);\n\n    dispatch({\n      type: \"TOGGLE_SPINNER\"\n    })\n\n    // once the request is sent, update state again\n    if (isMounted.current) // only update if we are still mounted\n      setIsSending(false)\n  }, [dispatch]) // update the callback if the state changes\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel htmlFor=\"bgg-input\">Bgg username</InputLabel>\n      <OutlinedInput\n        style={{ paddingRight: 0 }}\n        id=\"bgg-input\"\n        value={wishlist_term}\n        onChange={onChange(dispatch)}\n        onKeyPress={e => {\n          if(e.key === 'Enter') {\n            e.preventDefault();\n            sendRequest(wishlist_term);\n          }\n        }}\n        endAdornment={\n          <InputAdornment position=\"end\">\n            <IconButton disabled={isSending} onClick={e => { e.preventDefault(); sendRequest(wishlist_term) }} aria-label=\"search\">\n              <SearchIcon />\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n}\n\nexport default Component;\n","import React from 'react';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nexport const PriorityDropdown = props => {\n  const { onChange, wishlist_priority } = props;\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel id=\"priority-select-label\">Priority</InputLabel>\n      <Select\n        labelId=\"priority-select-label\"\n        id=\"priority-select\"\n        value={wishlist_priority}\n        onChange={onChange}\n      >\n        <MenuItem key={-1} value={-1}>All priorities</MenuItem>\n        {[1,2,3,4,5].map(d => (\n          <MenuItem key={d} value={d}>Priority {d}</MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport CompareCard from '../components/CompareCard';\nimport BoardgameCard from '../components/BoardgameCard';\nimport GenericPage from './GenericPage';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport BggInput from '../components/BggInput';\nimport { useWishlist } from '../hooks/useWishlist';\nimport { useStep } from '../hooks/useStep';\nimport { useStore } from '../hooks/useStore';\nimport FormControl from '@material-ui/core/FormControl';\nimport { pricesToGroups } from './LandingPage';\nimport Switch from '@material-ui/core/Switch';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Typography from '@material-ui/core/Typography';\nimport { PriorityDropdown } from '../components/PriorityDropdown';\nimport { Spinner } from '../components/Spinner';\nimport { BooleanParam, withDefault, useQueryParam } from 'use-query-params';\n\nexport const ViewSwitch = props => {\n  const { wishlist_stores_view, onChange } = props;\n\n  return (\n    <FormControl component=\"fieldset\">\n      <FormGroup>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={wishlist_stores_view}\n              onChange={onChange}\n            />\n          }\n          label=\"Stores view\"\n        />\n      </FormGroup>\n    </FormControl>\n  )\n}\n\nconst sumPrices = col => col.reduce((prev, curr) => {\n  return prev + curr.price;\n}, 0.0).toFixed(2);\n\nexport const pricesToStores = data => {\n  const rs = [];\n\n  data.map(d => {\n    if (rs[d.store_id] === undefined) {\n      rs[d.store_id] = {\n        store_id: d.store_id,\n        items: []\n      };\n    }\n\n    rs[d.store_id].items.push(d);\n    return d;\n  })\n\n  return rs.filter(d => d.items.length > 0).sort((a, b) => {\n    const diff = b.items.length - a.items.length\n\n    if(diff !== 0) {\n      return diff\n    } else {\n      return sumPrices(b.items) - sumPrices(a.items);\n    }\n  });\n}\n\nconst StoresList = props => {\n  const { store_id, items, wishlist } = props;\n  const store = useStore(store_id);\n  const sum = sumPrices(items);\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12}>\n        <Typography variant=\"h4\">\n          {store.name} -  €{sum}\n        </Typography>\n      </Grid>\n      {items.sort((a, b) => a.boardgame_id - b.boardgame_id).map(d => (\n        <Grid key={d.id} item xs={6} md={3} lg={1}>\n          <CompareCard {...d} wishlist={wishlist} />\n        </Grid>\n      ))}\n    </Grid>\n  )\n}\n\nexport const WishesView = data => data.map((tile) => (\n  <Grid key={tile.id} item xs={12} md={6} lg={3}>\n    <BoardgameCard {...tile} />\n  </Grid>\n));\n\nexport const StoresView = wishlist => data => data.map(store => (\n  <Grid key={store.store_id} item xs={12}>\n    <StoresList {...store} wishlist={wishlist} />\n  </Grid>\n));\n\nexport default () => {\n  const wishlist = useWishlist();\n  const dispatch = useDispatch();\n  const { wishlist_priority, wishlist_stores_view, spinner } = useSelector(state => state.pricesReducer);\n  const priority_filtered = wishlist.filter(d => parseInt(d.status.wishlistpriority) === wishlist_priority || wishlist_priority === -1);\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => priority_filtered.map(d => d.id).includes(d.boardgame_id)));\n  const [, setQview] = useQueryParam(\"stores_view\", withDefault(BooleanParam, false));\n  let grouped;\n\n  if (wishlist_stores_view) {\n    grouped = pricesToStores(store_filtered);\n  } else {\n    grouped = pricesToGroups(store_filtered);\n  }\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/wishlist\"\n      additional_controls={\n        <React.Fragment>\n          <Grid item xs={12}>\n            <BggInput />\n          </Grid>\n          <Grid item xs={12}>\n            <PriorityDropdown\n              wishlist_priority={wishlist_priority}\n              onChange={(event) => {\n                dispatch({\n                  type: \"SET_PRIORITY\",\n                  payload: event.target.value\n                })\n              }}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <ViewSwitch\n              wishlist_stores_view={wishlist_stores_view}\n              onChange={(event) => {\n                dispatch({\n                  type: \"SET_WISHLIST_VIEW\",\n                  payload: event.target.checked,\n                });\n\n                setQview(event.target.checked);\n              }}\n            />\n          </Grid>\n        </React.Fragment>\n      }\n      component={data => spinner ? <Spinner /> : wishlist_stores_view ? StoresView(wishlist)(data) : WishesView(data)}\n    />\n  )\n}\n","import { useSelector } from \"react-redux\";\n\nexport const useStore = store_id  => {\n  const { stores } = useSelector(state => state.pricesReducer);\n  const [ rs ] = stores.filter(d => d.id === store_id);\n  return rs;\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport GenericPage from './GenericPage';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useStep } from '../hooks/useStep';\nimport { pricesToGroups } from './LandingPage';\nimport { Spinner } from '../components/Spinner';\nimport { pricesToStores, StoresView, WishesView, ViewSwitch } from './WishlistPage';\nimport { BooleanParam, withDefault, useQueryParam } from 'use-query-params';\n\nexport default () => {\n  const { cart_results, wishlist_stores_view, spinner } = useSelector(state => state.pricesReducer);\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => cart_results.includes(d.boardgame_id)));\n  const [, setQview] = useQueryParam(\"stores_view\", withDefault(BooleanParam, false));\n  const dispatch = useDispatch();\n  let grouped;\n\n  if (wishlist_stores_view) {\n    grouped = pricesToStores(store_filtered);\n  } else {\n    grouped = pricesToGroups(store_filtered);\n  }\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/cart\"\n      additional_controls={\n        <Grid item xs={12}>\n          <ViewSwitch\n            wishlist_stores_view={wishlist_stores_view}\n            onChange={(event) => {\n              dispatch({\n                type: \"SET_WISHLIST_VIEW\",\n                payload: event.target.checked,\n              });\n\n              setQview(event.target.checked);\n            }}\n          />\n        </Grid>\n      }\n      component={data => spinner ? <Spinner /> : wishlist_stores_view ? StoresView(cart_results.map(d => ({id: d})))(data) : WishesView(data)}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport GenericPage from './GenericPage';\nimport SearchInput from '../components/SearchInput';\nimport BoardgameCard from '../components/BoardgameCard';\nimport { useStep } from '../hooks/useStep';\nimport { useSelector } from \"react-redux\";\nimport fuse from 'fuse.js';\n\nconst searchFilter = col => {\n  const { search_term, search_enabled, search_results } = useSelector(state => state.pricesReducer)\n\n  if(search_term !== \"\" && search_enabled) {\n    const options = {\n      includeScore: true,\n      shouldSort: true,\n      ignoreLocation: true,\n      keys: ['name']\n    }\n\n    const f = new fuse(col, options)\n    const res = f.search(search_term).filter(d => d.score <= 0.6)\n    return res.map(d => d.item)\n  } else {\n    return search_results\n  }\n}\n\nexport const pricesToGroups = data => {\n  const rs = [];\n  const map = {};\n\n  data.map((d, i) => {\n    if (map[d.boardgame_id] !== undefined) {\n      i = map[d.boardgame_id];\n    }\n\n    if (rs[i] === undefined) {\n      rs[i] = {\n        ...d,\n        items: []\n      }\n      map[d.boardgame_id] = i\n    }\n\n    rs[i].items.push(d)\n    return d\n  })\n\n  return rs.filter(d => d.items.length > 0)\n}\n\nexport default () => {\n  const { store_filtered, stock_filtered } = useStep(searchFilter);\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={true}\n      page_name=\"/search\"\n      pre_component={\n        <Grid item xs={12}>\n          <SearchInput />\n        </Grid>\n      }\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <BoardgameCard {...tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid } from '@material-ui/core';\nimport { useBoardgame } from '../hooks/useBoardgame';\nimport Paper from '@material-ui/core/Paper';\nimport classNames from 'classnames';\nimport Link from './Link';\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    marginBottom: theme.spacing(1),\n  },\n  padding: {\n    paddingLeft: theme.spacing(1),\n  },\n  colored: {\n    backgroundColor: \"#81a1c1\",\n    color: \"white\",\n  }\n}));\n\nexport default props => {\n  const classes = useStyles();\n  const { id, boardgame_id, rank, items, alternate } = props;\n  const boardgame = useBoardgame(boardgame_id);\n  const { boardgame_name } = boardgame;\n  const available_prices = items.sort((a, b) => a.price - b.price)\n  const l = available_prices.length;\n\n  let lowest = undefined;\n  let highest = undefined;\n\n  if (l >= 1) {\n    lowest = available_prices[0]\n  }\n\n  if (l >= 2) {\n    if (lowest.price !== available_prices[l-1].price) {\n      highest = available_prices[l-1]\n    }\n  }\n\n  return (\n    <Link to={\"/item/\" + boardgame_id} style={{ textDecoration: \"none\"}}>\n      <Paper className={classNames(classes.margin, {[classes.colored]: alternate === 0})}>\n        <Grid container spacing={2} key={id}>\n          <Grid item xs={8}>\n            <Typography variant=\"subtitle1\" className={classes.padding}>\n\n                {boardgame_name}\n\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"subtitle1\">\n              BGG Rank {rank}\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"subtitle1\">\n            {lowest && \"€\" + lowest.price} {highest && \"- €\" + highest.price}\n            </Typography>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Link>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport { bgg_xmlapi, forceError, logError, transformBggData } from \"../api/common\";\nimport XMLParser from 'react-xml-parser';\nimport pRetry from 'p-retry';\n\nconst req = list_id => fetch(`${bgg_xmlapi}/geeklist/${list_id}`)\n  .then(forceError)\n  .then(res => res.text())\n  .then(data => {\n    const xml = new XMLParser().parseFromString(data);\n    return transformBggData(xml)\n  })\n\nconst fetchGeeklist = (list_id, retries) => pRetry(async () => req(list_id), { onFailedAttempt: logError, retries })\n\nexport const useGeeklist = geeklist_id => {\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    fetchGeeklist(geeklist_id, 2).then(rs => {\n      setItems(rs)\n    })\n  }, [geeklist_id])\n\n  return items\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport GeeklistCard from '../components/GeeklistCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { pricesToGroups } from './LandingPage';\nimport { useGeeklist } from '../hooks/useGeeklist';\nimport { useStep } from '../hooks/useStep';\nimport { useId } from '../hooks/useId';\nimport { Spinner } from '../components/Spinner';\n\nexport default () => {\n  const geeklist_id = useId();\n  const geeklist = useGeeklist(geeklist_id);\n  const { spinner } = useSelector(state => state.pricesReducer);\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => geeklist.includes(d.boardgame_id)));\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_size={500}\n      page_name={\"/geeklist/\" + geeklist_id}\n      component={data => spinner ? <Spinner /> : data.map((tile, i) => (\n        <Grid key={tile.id} item xs={12}>\n          <GeeklistCard {...tile} alternate={i%2} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport PriceCard from '../components/PriceCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { useStep } from '../hooks/useStep';\n\nexport default () => {\n  const { cart_results } = useSelector(state => state.pricesReducer);\n  const { store_filtered, stock_filtered } = useStep(() => cart_results);\n\n  return (\n    <GenericPage\n      child_data={store_filtered}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/compare\"\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={4}>\n          <PriceCard boardgame={tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport * as fflate from 'fflate';\nimport { base } from \"./common\";\n\nexport const fetchAllPrices = createAsyncThunk('prices', async () => {\n  // const pull = localStorage.getItem('pull');\n  // let origText = localStorage.getItem('prices');\n\n  // if (pull === 'true' || pull === null || origText == null) {\n    const buffer = await fetch(base + '/rest/v1/prices.json.gz').then(res => res.arrayBuffer());\n    const compressed = new Uint8Array(buffer);\n    const decompressed = fflate.decompressSync(compressed);\n    const origText = fflate.strFromU8(decompressed);\n\n    // localStorage.setItem('prices', origText);\n    // localStorage.setItem('pull', 'false');\n  // }\n\n  return JSON.parse(origText || []);\n});\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { base } from \"./common\";\n\nexport const fetchStores = createAsyncThunk('stores', async () => {\n  return await fetch(base + '/rest/v1/stores.json').then(res => res.json())\n})\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { base } from \"./common\";\n\nexport const fetchDate = createAsyncThunk('date', async () => {\n  const saved = localStorage.getItem('date');\n  const date = await fetch(base + '/rest/v1/date.json').then(res => res.json());\n\n  if (saved !== date.date) {\n    console.log(\"updated!\", saved, date.date)\n    localStorage.setItem('date', date.date);\n    localStorage.setItem('pull', 'true');\n  }\n\n  return date;\n});\n","import React, { useEffect } from 'react'\nimport { useDispatch } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport LandingPage from './pages/LandingPage';\nimport BoardgamePage from './pages/BoardgamePage';\nimport CartPage from './pages/CartPage';\nimport SearchPage from './pages/SearchPage';\nimport GeeklistPage from './pages/GeeklistPage';\nimport WishlistPage from './pages/WishlistPage';\nimport ComparePage from './pages/ComparePage';\nimport { fetchAllPrices } from './api/prices';\nimport { fetchStores } from './api/stores';\nimport { fetchDate } from './api/date';\nimport {\n  BooleanParam,\n  NumberParam,\n  StringParam,\n  NumericArrayParam,\n  withDefault,\n  useQueryParam\n} from 'use-query-params';\n\nexport default () => {\n  const dispatch = useDispatch();\n  const [qstore] = useQueryParam(\"store\", withDefault(NumericArrayParam, [-1]));\n  const [bgg_id] = useQueryParam(\"bgg_id\", withDefault(NumericArrayParam, []));\n  const [qstock] = useQueryParam(\"stock\", withDefault(NumberParam, 0));\n  const [qname] = useQueryParam(\"bgg_username\", StringParam);\n  const [qview] = useQueryParam(\"stores_view\", withDefault(BooleanParam, false));\n\n  useEffect(() => {\n    dispatch(fetchAllPrices())\n    dispatch(fetchStores())\n    dispatch(fetchDate())\n  }, []);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_STORE\",\n      store: qstore,\n    })\n  }, [qstore]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_STOCK\",\n      stock: qstock,\n    })\n  }, [qstock]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_WISHLIST_USERNAME\",\n      payload: qname,\n    })\n  }, [qname]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_CART\",\n      payload: bgg_id,\n    })\n  }, [bgg_id]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_WISHLIST_VIEW\",\n      payload: qview,\n    })\n  }, [qview]);\n\n  return (\n    <Switch >\n      <Route path={`/`} exact>\n        <LandingPage />\n      </Route>\n      <Route path={`/cart`} exact>\n        <CartPage />\n      </Route>\n      <Route path={`/search`} exact>\n        <SearchPage />\n      </Route>\n      <Route path={`/wishlist`} exact>\n        <WishlistPage />\n      </Route>\n      <Route path={`/geeklist/:geeklist_id`}>\n        <GeeklistPage />\n      </Route>\n      <Route path={`/item/:boardgame_id`}>\n        <BoardgamePage />\n      </Route>\n      <Route path={`/compare`}>\n        <ComparePage />\n      </Route>\n    </Switch>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport { reducer as pricesReducer } from './reducers/prices';\nimport App from './App';\nimport thunkMiddleware from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { Auth0Provider } from \"@auth0/auth0-react\";\nimport { QueryParamProvider, transformSearchStringJsonSafe } from 'use-query-params';\n\nconst rootReducer = combineReducers({\n  pricesReducer,\n})\n\nconst composedEnhancer = composeWithDevTools(applyMiddleware(thunkMiddleware))\n\nconst store = createStore(rootReducer, composedEnhancer)\n\nstore.dispatch({\n  type: \"INIT\"\n});\n\nconst queryStringifyOptions = {\n  transformSearchString: transformSearchStringJsonSafe,\n};\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#5e81ac\",\n    },\n    secondary: {\n      main: \"#bf616a\",\n    },\n    text: {\n      primary: \"#2e3440\",\n    }\n  },\n  overrides: {\n    MuiInputLabel: {\n      root: {\n        backgroundColor: '#ffffff',\n        paddingLeft: '4px',\n        paddingRight: '4px'\n      }\n    }\n  }\n});\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <HashRouter>\n      <Provider store={store}>\n        <Route path=\"/\">\n          <Auth0Provider domain=\"dev-11hy0hqn.us.auth0.com\" clientId=\"gEd77V5i5uBswawxfycFKL1eEv8BlhdE\" redirectUri={window.location.origin}>\n            <QueryParamProvider ReactRouterRoute={Route} stringifyOptions={queryStringifyOptions}>\n              <App />\n            </QueryParamProvider>\n          </Auth0Provider>\n        </Route>\n      </Provider>\n    </HashRouter>\n  </ThemeProvider>\n, document.getElementById('root'));\n","export const reducer = (state = {}, action) => {\n  switch (action.type) {\n    case \"INIT\":\n      return {\n        store: [-1],\n        stock: 0,\n        order: 0,\n        cart_results: [],\n        search_term: \"\",\n        search_results: [],\n        search_enabled: false,\n        wishlist_term: \"\",\n        wishlist_priority: -1,\n        wishlist_stores_view: false,\n        wishlist: [],\n        prices: [],\n        history: [],\n        stores: [],\n        spinner: true,\n        date: new Date(),\n        user: {\n          isAuthenticated: false,\n          details: {},\n          saved: true,\n        },\n      }\n    case \"prices/fulfilled\": {\n      return {\n        ...state,\n        spinner: false,\n        prices: action.payload,\n      }\n    }\n    case \"date/fulfilled\": {\n      return {\n        ...state,\n        date: new Date(action.payload.date),\n      }\n    }\n    case \"stores/fulfilled\":\n      return {\n        ...state,\n        stores: action.payload\n      }\n    case \"SET_STOCK\": {\n      return {\n        ...state,\n        stock: action.stock,\n      }\n    }\n    case \"SET_STORE\": {\n      return {\n        ...state,\n        store: action.store,\n      }\n    }\n    case \"ADD_TO_CART\":\n      return {\n        ...state,\n        cart_results: [...state.cart_results.filter(d => d !== action.cart), action.cart],\n      }\n    case \"SET_CART\":\n      return {\n        ...state,\n        cart_results: action.payload,\n      }\n    case \"SET_SEARCH_TERM\":\n      return {\n        ...state,\n        search_term: action.payload,\n        search_enabled: false,\n      }\n    case \"EXECUTE_SEARCH\":\n      return {\n        ...state,\n        search_enabled: true,\n      }\n    case \"SET_WISHLIST\":\n      return {\n        ...state,\n        wishlist: action.payload\n      }\n    case \"SET_WISHLIST_USERNAME\":\n      return {\n        ...state,\n        wishlist_term: action.payload\n      }\n    case \"SET_WISHLIST_VIEW\":\n      return {\n        ...state,\n        wishlist_stores_view: action.payload\n      }\n    case \"SET_PRIORITY\":\n      return {\n        ...state,\n        wishlist_priority: action.payload\n      }\n    case \"TOGGLE_SPINNER\":\n      return {\n        ...state,\n        spinner: !state.spinner\n      }\n    case \"SET_USER\":\n      return {\n        ...state,\n        user: {\n          ...action.payload,\n          saved: true,\n        }\n      }\n    default:\n      return state;\n  }\n};\n"],"sourceRoot":""}