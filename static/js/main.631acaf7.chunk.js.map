{"version":3,"sources":["components/cartoff.svg","components/BoardgameImage.js","components/Link.js","api/common.js","hooks/useBoardgame.js","hooks/useStore.js","components/BoardgameCard.js","components/StockDropdown.js","components/StoreDropdown.js","components/Breadcrumbs.js","components/SearchButton.js","components/SearchInput.js","hooks/useLogin.js","components/PriceSlider.js","components/Spinner.js","components/BestPriceSwitch.js","components/Drawer.js","components/ViewSwitch.js","components/PriorityDropdown.js","hooks/useWishlist.js","components/BggInput.js","pages/GenericPage.js","hooks/useStep.js","pages/LandingPage.js","components/PriceCard.js","components/BoardgameHistoricPrice.js","hooks/usePrices.js","hooks/useHistory.js","hooks/useId.js","pages/BoardgamePage.js","components/CompareCard.js","pages/WishlistPage.js","pages/CartPage.js","pages/SearchPage.js","components/GeeklistCard.js","hooks/useGeeklist.js","pages/GeeklistPage.js","pages/ComparePage.js","components/Request.js","pages/MathtradePage.js","api/prices.js","api/stores.js","api/date.js","App.js","index.js","reducers/prices.js"],"names":["module","exports","__webpack_require__","p","BoardgameImage","props","srcs","_useState","useState","_useState2","Object","slicedToArray","i","setI","src","undefined","useEffect","image","Image","onerror","onload","complete","naturalWidth","naturalHeight","react_default","a","createElement","CardMedia","style","paddingTop","ForwardLink","React","forwardRef","ref","_ref","to","children","other","component","objectWithoutProperties","search","useLocation","params","URLSearchParams","delete","toWithParams","concat","toString","react_router_dom","assign","PlainLink","objectSpread","base","forceError","res","status","Error","logError","error","console","log","attemptNumber","retriesLeft","extractBggItem","d","obj","map","name","attributes","value","id","parseInt","objectid","transformBggData","data","tpl","boardgame_id","boardgame_name","images","useBoardgame","boardgame","setBoardgame","isMounted","fetch","then","json","fetchBoardgame","useStore","store_id","_stores$filter","useSelector","state","pricesReducer","stores","filter","useStyles","makeStyles","theme","card_header","minHeight","price","marginLeft","marginRight","spacing","StoreName","store","Typography","variant","color","BoardgameCard","rank","items","dispatch","useDispatch","classes","available_prices","sort","b","l","length","_useQueryParam","useQueryParam","withDefault","NumericArrayParam","_useQueryParam2","bgg_ids","setBggId","lowest","highest","Card","key","square","elevation","Link","toConsumableArray","CardContent","className","BoardgameCard_StoreName","CardActions","disableSpacing","IconButton","onClick","type","cart","includes","AddShoppingCart_default","StockDropdown","stock","NumberParam","setQstock","FormControl","fullWidth","InputLabel","htmlFor","Select","labelId","onChange","event","target","MenuItem","StoreDropdown","store_ids","current_stores","stores_without_stock","setQstore","multiple","filtered","col","_col$slice","slice","Set","filterStores","ListSubheader","background","root","flexGrow","textDecoration","components_Breadcrumbs","args","pathname","split","Breadcrumbs","separator","aria-label","Home_default","Component","search_term","isSending","setIsSending","history","useHistory","useRef","current","sendRequest","useCallback","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","abrupt","push","stop","InputAdornment","position","disabled","Search_default","input","margin","defineProperty","breakpoints","up","payload","Paper","onSubmit","e","preventDefault","InputBase","placeholder","inputProps","endAdornment","components_SearchButton","useLogin","saved","user","_useAuth","useAuth0","isAuthenticated","loginWithRedirect","logout","body","method","headers","Content-Type","JSON","stringify","details","PriceSlider","enable_price_filter","price_range","setQmin","_useQueryParam3","setQmax","Slider","min","max","newValue","_newValue","aria-labelledby","valueLabelDisplay","PriceSwitch","_useQueryParam5","BooleanParam","setQpricef","FormGroup","FormControlLabel","control","Switch","checked","Spinner","Grid","container","alignContent","alignItems","direction","item","xs","CircularProgress","Nothing","spinner","height","alt","EmptyImg","BestPriceSwitch","enable_best_price","setQbest","drawerHeader","display","padding","mixins","toolbar","justifyContent","paper","width","SwipeableTemporaryDrawer","open","handleDrawerClose","useTheme","Drawer","anchor","onClose","ChevronLeft_default","ChevronRight_default","Divider","ViewSwitch","wishlist_stores_view","setQview","PriorityDropdown","wishlist_priority","req","encodeURIComponent","text","xml","XMLParser","parseFromString","fetchWishList","retries","pRetry","onFailedAttempt","wishlist_term","StringParam","setQname","term","rs","sent","t0","_x","apply","this","arguments","OutlinedInput","paddingRight","onKeyPress","fontFamily","appbar","marginBottom","bottomBar","top","bottom","content","pagination","pages","pageSize","Math","ceil","MainPaper","LoginButton","Button","LogoutButton","picture","returnTo","window","location","origin","Avatar","CartButton","cart_results","Badge","badgeContent","ShoppingCart","FavoriteButton","Favorite","SearchButton","Pageview","DrawerButton","handleDrawerOpen","edge","Menu_default","Bar","matches","breadcrumbs","_React$useState","_React$useState2","setOpen","Toolbar","react","GenericPage_DrawerButton","SearchInput","GenericPage_SearchButton","GenericPage_FavoriteButton","GenericPage_CartButton","GenericPage_LogoutButton","GenericPage_LoginButton","Controls","additional_controls","stock_filtered","List","ListItem","ListItemText","primary","ListItemSecondaryAction","BestPriceSwitch_BestPriceSwitch","ViewSwitch_ViewSwitch","PriceSlider_PriceSwitch","PriceSlider_PriceSlider","BggInput","PriorityDropdown_PriorityDropdown","GenericPage","useMediaQuery","date","store_filtered","child_data","pre_component","_props$paging","paging","page_size","page","setPage","_useLogin","page_data","array","pageNumber","paginate","scrollTo","AppBar","GenericPage_Bar","GenericPage_Controls","Container","maxWidth","md","Pagination","shape","count","Spinner_Nothing","packagejs","version","Date","toLocaleDateString","storeFilter","stockFilter","useStep","f","prices","_price_range","page_filtered","hm","values","bestPriceFilter","pricesToGroups","LandingPage","_useStep","grouped","page_name","tile","lg","media","out_of_stock","opacity","addUTM","raw","url","URL","searchParams","append","Media","_props$boardgame","store_thumb","thumb","self_ref","href","rel","PriceCard","_props$boardgame2","self","classNames","PriceCard_Media","FacebookShareButton","FacebookIcon","size","round","FacebookMessengerShareButton","FacebookMessengerIcon","ViberShareButton","ViberIcon","WhatsappShareButton","WhatsappIcon","TwitterShareButton","TwitterIcon","label","maxMinAvg","arr","sum","parseFloat","toFixed","avg","formatDate","getDate","getMonth","formatLabel","getFullYear","BoardgameHistoricPrice","processed","cr_date","retval","k","_maxMinAvg","range","valueOf","transform","ResponsiveContainer","ComposedChart","CartesianGrid","strokeDasharray","XAxis","dataKey","scale","domain","tickFormatter","YAxis","Tooltip","labelFormatter","Area","fillOpacity","fill","Line","stroke","strokeWidth","activeDot","r","usePrices","setPrices","fetchPrices","setHistory","fetchPriceHistory","useId","BoardgamePage","fn","price_ids","CompareCard","wishlist","preview","_wishlist$filter","thumbnail","sumPrices","reduce","curr","pricesToStores","diff","StoresList","WishesView","StoresView","WishlistPage_StoresList","WishlistPage","username","_callee2","_context2","useWishlist","priority_filtered","wishlistpriority","Spinner_Spinner","CartPage","searchFilter","search_enabled","search_results","fuse","includeScore","shouldSort","ignoreLocation","keys","score","SearchPage","paddingLeft","colored","backgroundColor","GeeklistCard","alternate","list_id","useGeeklist","geeklist_id","setItems","GeeklistPage","geeklist","ComparePage","Request","request","initialState","setError","_useState3","_useState4","isLoaded","setIsLoaded","_useState5","_useState6","setRs","err","Fragment","cloneElement","Accordion","AccordionSummary","expandIcon","ExpandMore_default","cash","AccordionDetails","j","back","whiteSpace","MathtradePage","components_Request","MathtradePage_Component","fetchAllPrices","createAsyncThunk","buffer","compressed","decompressed","origText","arrayBuffer","Uint8Array","fflate","parse","fetchStores","fetchDate","localStorage","getItem","setItem","App","qstore","bgg_id","qstock","_useQueryParam7","qname","_useQueryParam9","qview","_useQueryParam11","qpricef","_useQueryParam13","qbest","_useQueryParam15","_useQueryParam17","react_router","path","exact","rootReducer","combineReducers","action","order","composedEnhancer","composeWithDevTools","applyMiddleware","thunkMiddleware","createStore","queryStringifyOptions","transformSearchString","transformSearchStringJsonSafe","createTheme","palette","main","secondary","overrides","MuiInputLabel","ReactDOM","render","ThemeProvider","es","auth0_react_esm","clientId","redirectUri","esm","ReactRouterRoute","Route","stringifyOptions","document","getElementById"],"mappings":"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","file":"static/js/main.631acaf7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cartoff.dd87c6d4.svg\";","import React, { useEffect, useState } from \"react\";\nimport CardMedia from '@material-ui/core/CardMedia';\n\nexport default props => {\n  const { srcs } = props;\n  const [i, setI] = useState(0);\n  const src = srcs[i] === undefined ? \"https://via.placeholder.com/250\" : srcs[i]\n\n  useEffect(() => {\n    const image = new Image();\n    const checkValid = () => {\n      if (image.complete && image.naturalWidth < 100 && image.naturalHeight < 100) {\n        setI(i+1);\n      }\n    }\n\n    image.onerror = () => { setI(i+1) }\n    image.onload = checkValid;\n    image.src = srcs[i];\n  }, [srcs]);\n\n  return (\n    <CardMedia style={{ paddingTop: '75%' }} image={src} />\n  );\n};\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst PlainLink = ({ to, children, component, ...other }) => {\n  const { search } = useLocation();\n  const params = new URLSearchParams(search);\n  params.delete(\"page\");\n  const toWithParams = `${to}?${params.toString()}`\n\n  return (\n    <Link {...other} to={toWithParams}>\n      {children}\n    </Link>\n  )\n}\n\nexport const ForwardLink = React.forwardRef((props, ref) => PlainLink({...props, ref}));\n\nexport default ForwardLink;\n","export const base = 'https://raw.githubusercontent.com/DictumMortuum/json-api/master'\nexport const bgg_xmlapi = 'https://boardgamegeek.com/xmlapi'\nexport const bgg_xmlapi2 = 'https://api.geekdo.com/xmlapi2'\nexport const deta = 'https://szb34l.deta.dev'\n\nexport const forceError = res => {\n  if (res.status === 202) {\n    throw new Error(\"impersonating an error, as we have to retry, since the request is queued on the backend now\");\n  } else {\n    return res\n  }\n}\n\nexport const logError = error => {\n  console.log(`Attempt ${error.attemptNumber} failed. There are ${error.retriesLeft} retries left.`);\n}\n\nconst extractBggItem = d => {\n  const obj = {};\n  const { children } = d;\n\n  children.map(({ name, attributes, value}) => {\n    if(value !== \"\") {\n      obj[name] = value;\n    } else {\n      obj[name] = attributes\n    }\n\n    return name\n  });\n\n  return {\n    id: parseInt(d.attributes.objectid),\n    ...obj,\n  }\n}\n\nexport const transformBggData = data => {\n  // console.log(\n  //   data.children.map(extractBggItem)\n  // )\n  // const objtoid = data.children.map(d => d.attributes.objectid)\n  // const filtered = objtoid.filter(d => d !== undefined)\n  // const unique = [...new Set(filtered)]\n  // return unique.map(d => parseInt(d))\n  return data.children.map(extractBggItem);\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nconst fetchBoardgame = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/boardgame.json').then(res => res.json())\n}\n\nconst tpl = {\n  boardgame_id: \"\",\n  boardgame_name: \"\",\n  images: [],\n}\n\nexport const useBoardgame = boardgame_id => {\n  const [boardgame, setBoardgame] = useState(tpl)\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchBoardgame(boardgame_id).then(data => {\n      if (isMounted) {\n        setBoardgame(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [boardgame_id])\n\n  return boardgame\n}\n","import { useSelector } from \"react-redux\";\n\nexport const useStore = store_id  => {\n  const stores = useSelector(state => state.pricesReducer.stores);\n  const [ rs ] = stores.filter(d => d.id === store_id);\n  return rs;\n}\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport BoardgameImage from './BoardgameImage';\nimport Link from './Link';\nimport { useBoardgame } from '../hooks/useBoardgame';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport { useDispatch } from \"react-redux\";\nimport { useStore } from '../hooks/useStore';\nimport { NumericArrayParam, withDefault, useQueryParam } from 'use-query-params';\n\nconst useStyles = makeStyles((theme) => ({\n  card_header: {\n    minHeight: 120,\n  },\n  price: {\n    marginLeft: \"auto\",\n    marginRight: theme.spacing(2),\n  }\n}));\n\nconst onClick = (dispatch, setBggId) => (boardgame_id, bgg_ids) => {\n  dispatch({\n    type: \"ADD_TO_CART\",\n    cart: boardgame_id,\n  })\n\n  if(bgg_ids.includes(boardgame_id)) {\n    setBggId(bgg_ids.filter(d => d !== boardgame_id));\n  } else {\n    setBggId([...bgg_ids, boardgame_id])\n  }\n}\n\nconst StoreName = props => {\n  const { store_id } = props;\n  const store = useStore(store_id);\n\n  return (\n    <Typography variant=\"subtitle1\" color=\"textSecondary\">\n      {store.name}\n    </Typography>\n  )\n}\n\nexport default props => {\n  const { id, boardgame_id, rank, items } = props;\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const boardgame = useBoardgame(boardgame_id);\n  const { images, boardgame_name } = boardgame;\n  const available_prices = items.sort((a, b) => a.price - b.price)\n  const l = available_prices.length;\n  const [bgg_ids, setBggId] = useQueryParam(\"bgg_id\", withDefault(NumericArrayParam, []));\n\n  let lowest = undefined;\n  let highest = undefined;\n\n  if (l >= 1) {\n    lowest = available_prices[0]\n  }\n\n  if (l >= 2) {\n    if (lowest.price !== available_prices[l-1].price) {\n      highest = available_prices[l-1]\n    }\n  }\n\n  return (\n    <Card key={id} square={true} elevation={3}>\n      <Link to={\"/item/\" + boardgame_id}>\n        <BoardgameImage srcs={[`https://raw.githubusercontent.com/DictumMortuum/json-api/master/rest/v1/boardgames/${boardgame_id}/image.avif`, ...images]} />\n      </Link>\n      <CardContent className={classes.card_header}>\n        {rank < 999999 && <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          BGG Rank {rank}\n        </Typography>}\n        {available_prices.length === 1 && <StoreName {...available_prices[0]} />}\n        <Typography variant=\"subtitle1\">\n          {boardgame_name}\n        </Typography>\n      </CardContent>\n      <CardActions disableSpacing>\n        <IconButton onClick={() => onClick(dispatch, setBggId)(boardgame_id, bgg_ids)}>\n          <AddShoppingCartIcon />\n        </IconButton>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\" className={classes.price}>\n          {lowest && \"\" + lowest.price} {highest && \"- \" + highest.price}\n        </Typography>\n      </CardActions>\n    </Card>\n  )\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { NumberParam, useQueryParam } from 'use-query-params';\n\nexport default () => {\n  const stocks = [\"In stock\", \"Preorder\", \"Out of stock\"];\n  const stock = useSelector(state => state.pricesReducer.stock);\n  const dispatch = useDispatch();\n  const [, setQstock] = useQueryParam(\"stock\", NumberParam);\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel htmlFor=\"stock-select-label\">Stock</InputLabel>\n      <Select\n        labelId=\"stock-select-label\"\n        id=\"stock-select\"\n        value={stock}\n        onChange={(event) => {\n          dispatch({\n            type: \"SET_STOCK\",\n            stock: event.target.value\n          })\n\n          setQstock(event.target.value);\n        }}\n      >\n        {stocks.map((d, i) => <MenuItem key={d} value={i}>{d}</MenuItem>)}\n        <MenuItem key={-1} value={-1}>Show all</MenuItem>\n      </Select>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport { NumericArrayParam, useQueryParam } from 'use-query-params';\n\nconst filterStores = col => {\n  const [last] = col.slice(-1);\n\n  if (last === -1) {\n    return [-1]\n  } else {\n    return [...new Set(col.filter(d => d !== -1))]\n  }\n}\n\nexport default props => {\n  const { store_ids } = props;\n  const store = useSelector(state => state.pricesReducer.store);\n  const stores = useSelector(state => state.pricesReducer.stores);\n  const current_stores = stores.filter(d => store_ids.includes(d.id));\n  const stores_without_stock = stores.filter(d => !store_ids.includes(d.id));\n  const dispatch = useDispatch();\n  const [, setQstore] = useQueryParam(\"store\", NumericArrayParam);\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel htmlFor=\"store-select-label\">Store</InputLabel>\n      <Select\n        labelId=\"store-select-label\"\n        id=\"store-select\"\n        value={store}\n        multiple\n        onChange={(event) => {\n          const filtered = filterStores(event.target.value);\n\n          dispatch({\n            type: \"SET_STORE\",\n            store: filtered\n          })\n\n          setQstore(filtered);\n        }}\n      >\n        <MenuItem key={-1} value={-1}>All stores</MenuItem>\n        <ListSubheader style={{ background: \"white\" }}>With Stock</ListSubheader>\n        {current_stores.map(d => <MenuItem key={d.id} value={d.id}>{d.name}</MenuItem>)}\n        <ListSubheader style={{ background: \"white\" }}>Rest</ListSubheader>\n        {stores_without_stock.map(d => <MenuItem key={d.id} value={d.id}>{d.name}</MenuItem>)}\n      </Select>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport { Typography } from '@material-ui/core';\nimport { useLocation } from 'react-router-dom';\nimport Link from './Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HomeIcon from '@material-ui/icons/Home';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    color: \"#d8dee9\",\n    flexGrow: 1\n  },\n  color: {\n    color: \"#d8dee9\",\n    textDecoration: \"none\",\n  }\n}));\n\nexport default () => {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const args = pathname.split(\"/\").slice(2).filter(d => d !== \"item\").filter(d => d !== \"\");\n\n  return (\n    <Breadcrumbs className={classes.root} separator=\"/\" aria-label=\"breadcrumb\">\n      <IconButton className={classes.color} component={Link} to=\"/\">\n        <HomeIcon />\n      </IconButton>\n      {args.map(d => (\n        <Link key={d} className={classes.color} to={\"/item/\" + d}>\n          <Typography variant=\"h5\" >{d}</Typography>\n        </Link>\n      ))}\n    </Breadcrumbs>\n  );\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nconst Component = () => {\n  const dispatch = useDispatch();\n  const search_term = useSelector(state => state.pricesReducer.search_term);\n  const [isSending, setIsSending] = useState(false);\n  const history = useHistory();\n  const isMounted = useRef(true);\n\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n    return () => {\n      isMounted.current = false\n    }\n  }, [])\n\n  const sendRequest = useCallback(async() => {\n    // don't send again while we are sending\n    if (isSending) return\n    // update state\n    setIsSending(true)\n    dispatch({ type: \"EXECUTE_SEARCH\" })\n    history.push(\"/search\")\n\n    // once the request is sent, update state again\n    if (isMounted.current) // only update if we are still mounted\n      setIsSending(false)\n  }, [search_term, dispatch]) // update the callback if the state changes\n\n  return (\n    <InputAdornment position=\"end\">\n      <IconButton type=\"submit\" disabled={isSending} onClick={sendRequest} aria-label=\"search\">\n        <SearchIcon />\n      </IconButton>\n    </InputAdornment>\n  )\n}\n\nexport default Component;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchButton from './SearchButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\n\nconst useStyles = makeStyles((theme) => ({\n  input: {\n    margin: theme.spacing(1),\n  },\n  root: {\n    margin: theme.spacing(1),\n    [theme.breakpoints.up('md')]: {\n      marginRight: theme.spacing(3),\n    },\n  }\n}));\n\nconst onChange = dispatch => event => dispatch({\n  type: \"SET_SEARCH_TERM\",\n  payload: event.target.value,\n})\n\nconst Component = props => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  return (\n    <Paper component=\"form\" onSubmit={e => { e.preventDefault(); }}>\n      <InputBase\n        placeholder=\" Search...\"\n        className={classes.input}\n        fullWidth\n        inputProps={{ 'aria-label': 'search' }}\n        onChange={onChange(dispatch)}\n        endAdornment={<SearchButton />}\n      />\n    </Paper>\n  )\n}\n\nexport default Component;\n","import { useEffect } from 'react';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { useDispatch } from 'react-redux';\nimport { useSelector } from \"react-redux\";\nimport { deta } from \"../api/common\";\n\nconst createUser = body => fetch(`${deta}/user`, {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify(body)\n}).then(res => res.json())\n\nexport const useLogin = () => {\n  const dispatch = useDispatch();\n  const { saved } = useSelector(state => state.pricesReducer.user);\n  const { isAuthenticated, user, loginWithRedirect, logout } = useAuth0();\n\n  useEffect(() => {\n    if (isAuthenticated && !saved) {\n      createUser(user).then(data => dispatch({\n        type: \"SET_USER\",\n        payload: {\n          isAuthenticated,\n          details: data,\n        }\n      }));\n    }\n  }, [dispatch, isAuthenticated, saved, user]);\n\n  return {\n    isAuthenticated,\n    user,\n    loginWithRedirect,\n    logout,\n  }\n}\n","import React from 'react';\nimport Slider from '@material-ui/core/Slider';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Switch from '@material-ui/core/Switch';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { BooleanParam, NumberParam, withDefault, useQueryParam } from 'use-query-params';\n\nexport const PriceSlider = props => {\n  const dispatch = useDispatch();\n  const enable_price_filter = useSelector(state => state.pricesReducer.enable_price_filter);\n  const price_range = useSelector(state => state.pricesReducer.price_range);\n  const [min, max] = [0, 500];\n  const [, setQmin] = useQueryParam(\"min\", withDefault(NumberParam, 0));\n  const [, setQmax] = useQueryParam(\"max\", withDefault(NumberParam, 500));\n\n  return (\n    <Slider\n      min={min}\n      max={max}\n      value={price_range}\n      onChange={(event, newValue) => {\n        dispatch({\n          type: \"SET_PRICE_RANGE\",\n          payload: newValue,\n        });\n\n        const [min, max] = newValue;\n        setQmin(min);\n        setQmax(max);\n      }}\n      aria-labelledby=\"range-slider\"\n      valueLabelDisplay=\"auto\"\n      disabled={!enable_price_filter}\n    />\n  );\n}\n\nexport const PriceSwitch = props => {\n  const dispatch = useDispatch();\n  const enable_price_filter = useSelector(state => state.pricesReducer.enable_price_filter);\n  const [, setQpricef] = useQueryParam(\"price_filter\", withDefault(BooleanParam, false));\n\n  return (\n    <FormControl component=\"fieldset\">\n      <FormGroup>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={enable_price_filter}\n              onChange={(event) => {\n                dispatch({\n                  type: \"SET_PRICE_FILTER\",\n                  payload: event.target.checked,\n                });\n\n                setQpricef(event.target.checked);\n              }}\n            />\n          }\n        />\n      </FormGroup>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useSelector } from 'react-redux';\nimport EmptyImg from './cartoff.svg';\nimport Typography from '@material-ui/core/Typography';\n\nexport const Spinner = () => (\n  <Grid container alignContent=\"center\" alignItems=\"center\" direction=\"column\">\n    <Grid item xs={12}>\n      <CircularProgress />\n    </Grid>\n  </Grid>\n)\n\nexport const Nothing = props => {\n  const spinner = useSelector(state => state.pricesReducer.spinner);\n\n  return (\n    <Grid container alignContent=\"center\" alignItems=\"center\" direction=\"column\">\n      <Grid item xs={12}>\n        {spinner ? <CircularProgress /> : <Typography variant=\"body1\" color=\"inherit\"><img style={{ height: 300 }} alt=\"\" src={EmptyImg} /></Typography>}\n      </Grid>\n    </Grid>\n  )\n}\n","import React from 'react';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Switch from '@material-ui/core/Switch';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { BooleanParam, withDefault, useQueryParam } from 'use-query-params';\n\nexport const BestPriceSwitch = props => {\n  const dispatch = useDispatch();\n  const enable_best_price = useSelector(state => state.pricesReducer.enable_best_price);\n  const [, setQbest] = useQueryParam(\"best_prices\", withDefault(BooleanParam, false));\n\n  return (\n    <FormControl component=\"fieldset\">\n      <FormGroup>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={enable_best_price}\n              onChange={(event) => {\n                dispatch({\n                  type: \"SET_BEST_PRICE\",\n                  payload: event.target.checked,\n                });\n\n                setQbest(event.target.checked);\n              }}\n            />\n          }\n        />\n      </FormGroup>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport Drawer from '@material-ui/core/Drawer';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  paper: {\n    width: 280,\n  }\n}));\n\nexport default function SwipeableTemporaryDrawer(props) {\n  const { children, open, handleDrawerClose } = props;\n  const theme = useTheme();\n  const classes = useStyles();\n\n  return (\n    <Drawer anchor=\"left\" open={open} onClose={handleDrawerClose} classes={{ paper: classes.paper }}>\n      <div className={classes.drawerHeader}>\n        <IconButton onClick={handleDrawerClose}>\n          {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n        </IconButton>\n      </div>\n      <Divider />\n      {children}\n    </Drawer>\n  );\n}\n","import React from 'react';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Switch from '@material-ui/core/Switch';\nimport { BooleanParam, withDefault, useQueryParam } from 'use-query-params';\nimport { useDispatch, useSelector } from 'react-redux';\n\nexport const ViewSwitch = () => {\n  const dispatch = useDispatch();\n  const wishlist_stores_view = useSelector(state => state.pricesReducer.wishlist_stores_view);\n  const [, setQview] = useQueryParam(\"stores_view\", withDefault(BooleanParam, false));\n\n  return (\n    <FormControl component=\"fieldset\">\n      <FormGroup>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={wishlist_stores_view}\n              onChange={(event) => {\n                dispatch({\n                  type: \"SET_WISHLIST_VIEW\",\n                  payload: event.target.checked,\n                });\n\n                setQview(event.target.checked);\n              }}\n            />\n          }\n        />\n      </FormGroup>\n    </FormControl>\n  )\n}\n","import React from 'react';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { useSelector, useDispatch } from 'react-redux';\n\nexport const PriorityDropdown = props => {\n  const dispatch = useDispatch();\n  const wishlist_priority = useSelector(state => state.pricesReducer.wishlist_priority);\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel id=\"priority-select-label\">Priority</InputLabel>\n      <Select\n        labelId=\"priority-select-label\"\n        id=\"priority-select\"\n        value={wishlist_priority}\n        onChange={(event) => {\n          dispatch({\n            type: \"SET_PRIORITY\",\n            payload: event.target.value\n          })\n        }}\n      >\n        <MenuItem key={-1} value={-1}>All priorities</MenuItem>\n        {[1,2,3,4,5].map(d => (\n          <MenuItem key={d} value={d}>Priority {d}</MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  )\n}\n","import { useEffect } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { bgg_xmlapi2, forceError, logError, transformBggData } from \"../api/common\";\nimport XMLParser from 'react-xml-parser';\nimport pRetry from 'p-retry';\nimport { StringParam, useQueryParam } from 'use-query-params';\n\nconst req = name => fetch(`${bgg_xmlapi2}/collection?username=${encodeURIComponent(name)}&wishlist=1`)\n  .then(forceError)\n  .then(res => res.text())\n  .then(data => {\n    const xml = new XMLParser().parseFromString(data);\n    return transformBggData(xml)\n  })\n\nexport const fetchWishList = (name, retries) => pRetry(async () => req(name), { onFailedAttempt: logError, retries })\n\nexport const useWishlist = () => {\n  const wishlist = useSelector(state => state.pricesReducer.wishlist);\n  const [username] = useQueryParam(\"bgg_username\", StringParam);\n  const dispatch = useDispatch();\n\n  useEffect(async () => {\n    if (username !== undefined) {\n      dispatch({\n        type: \"SET_WISHLIST_USERNAME\",\n        payload: username,\n      })\n\n      let rs;\n      try {\n        rs = await fetchWishList(username, 2)\n      } catch(e) {\n        rs = [];\n      }\n\n      dispatch({\n        type: \"SET_WISHLIST\",\n        payload: rs\n      })\n\n    }\n  }, [username])\n\n  return wishlist\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { fetchWishList } from '../hooks/useWishlist';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport { StringParam, useQueryParam } from 'use-query-params';\n\nconst onChange = dispatch => event => dispatch({\n  type: \"SET_WISHLIST_USERNAME\",\n  payload: event.target.value,\n})\n\nconst Component = props => {\n  const dispatch = useDispatch();\n  const [isSending, setIsSending] = useState(false);\n  const isMounted = useRef(true);\n  const wishlist_term = useSelector(state => state.pricesReducer.wishlist_term);\n  const [, setQname] = useQueryParam(\"bgg_username\", StringParam);\n\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n    return () => {\n      isMounted.current = false\n    }\n  }, [])\n\n  const sendRequest = useCallback(async term => {\n    // don't send again while we are sending\n    if (isSending) return\n    // update state\n    setIsSending(true)\n\n    dispatch({\n      type: \"TOGGLE_SPINNER\"\n    })\n\n    // send the actual request\n    let rs;\n    try {\n      rs = await fetchWishList(term, 2)\n    } catch(e) {\n      rs = [];\n    }\n\n    dispatch({\n      type: \"SET_WISHLIST\",\n      payload: rs\n    })\n\n    setQname(term);\n\n    dispatch({\n      type: \"TOGGLE_SPINNER\"\n    })\n\n    // once the request is sent, update state again\n    if (isMounted.current) // only update if we are still mounted\n      setIsSending(false)\n  }, [dispatch]) // update the callback if the state changes\n\n  return (\n    <FormControl variant=\"outlined\" fullWidth>\n      <InputLabel htmlFor=\"bgg-input\">Bgg username</InputLabel>\n      <OutlinedInput\n        style={{ paddingRight: 0 }}\n        id=\"bgg-input\"\n        value={wishlist_term}\n        onChange={onChange(dispatch)}\n        onKeyPress={e => {\n          if(e.key === 'Enter') {\n            e.preventDefault();\n            sendRequest(wishlist_term);\n          }\n        }}\n        endAdornment={\n          <InputAdornment position=\"end\">\n            <IconButton disabled={isSending} onClick={e => { e.preventDefault(); sendRequest(wishlist_term) }} aria-label=\"search\">\n              <SearchIcon />\n            </IconButton>\n          </InputAdornment>\n        }\n      />\n    </FormControl>\n  )\n}\n\nexport default Component;\n","import React, { useEffect, Fragment } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Badge from '@material-ui/core/Badge';\nimport StockDropdown from '../components/StockDropdown';\nimport StoreDropdown from '../components/StoreDropdown';\nimport Breadcrumbs from '../components/Breadcrumbs';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useSelector } from \"react-redux\";\nimport Link from '../components/Link';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport SearchInput from '../components/SearchInput';\nimport Container from '@material-ui/core/Container';\nimport packagejs from '../../package.json';\nimport Pagination from '@material-ui/lab/Pagination';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport { ShoppingCart, Favorite, Pageview, Compare } from '@material-ui/icons';\nimport { useLogin } from '../hooks/useLogin';\nimport { useQueryParam, NumberParam, withDefault } from 'use-query-params';\nimport { PriceSlider, PriceSwitch } from '../components/PriceSlider';\nimport { Nothing } from '../components/Spinner';\nimport { BestPriceSwitch } from '../components/BestPriceSwitch';\nimport SwipeableTemporaryDrawer from '../components/Drawer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport { ViewSwitch } from '../components/ViewSwitch';\nimport { PriorityDropdown } from '../components/PriorityDropdown';\nimport BggInput from '../components/BggInput';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    background: '#d8dee9',\n    fontFamily: \"sans\",\n  },\n  appbar: {\n    marginBottom: theme.spacing(4),\n  },\n  bottomBar: {\n    top: 'auto',\n    bottom: 0,\n  },\n  content: {\n    minHeight: '90vh',\n    padding: 10\n  },\n  margin: {\n    color: \"white\"\n  },\n  pagination: {\n    padding: theme.spacing(1),\n  },\n}));\n\nconst paginate = (array, pageSize, pageNumber, paging) => {\n  return paging === true ? array.slice((pageNumber-1) * pageSize, pageNumber * pageSize) : array;\n}\n\nconst pages = (col, pageSize) => Math.ceil(col.length/pageSize)\n\nconst MainPaper = props => (\n  <Paper variant=\"outlined\" square {...props} />\n)\n\nconst LoginButton = props => {\n  const { loginWithRedirect } = props;\n  return <Button onClick={() => loginWithRedirect()} color=\"inherit\">Login</Button>;\n};\n\nconst LogoutButton = props => {\n  const { user, logout } = props;\n  const { picture, name } = user;\n\n  return (\n    <IconButton onClick={() => logout({ returnTo: window.location.origin })} >\n      <Avatar alt={name} src={picture} />\n    </IconButton>\n  );\n};\n\nconst CartButton = props => {\n  const { cart_results } = props;\n\n  return (\n    <IconButton>\n      <Badge badgeContent={cart_results.length} color=\"secondary\" max={99999} style={{ color: \"white\" }} component={Link} to=\"/cart\">\n        <ShoppingCart />\n      </Badge>\n    </IconButton>\n  )\n}\n\nconst FavoriteButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/wishlist\">\n      <Favorite />\n    </IconButton>\n  )\n}\n\nconst SearchButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/search\">\n      <Pageview />\n    </IconButton>\n  )\n}\n\nconst CompareButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/compare\">\n      <Compare />\n    </IconButton>\n  )\n}\n\nconst DrawerButton = props => {\n  const { handleDrawerOpen } = props;\n\n  return (\n    <IconButton color=\"inherit\" aria-label=\"open drawer\" onClick={handleDrawerOpen} edge=\"start\">\n      <MenuIcon />\n    </IconButton>\n  )\n}\n\nconst Bar = props => {\n  const cart_results = useSelector(state => state.pricesReducer.cart_results);\n  const { children, matches, breadcrumbs, isAuthenticated, loginWithRedirect, logout, user } = props;\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <Toolbar>\n      { breadcrumbs && <Fragment>\n        <DrawerButton handleDrawerOpen={handleDrawerOpen} />\n        <SwipeableTemporaryDrawer open={open} handleDrawerClose={handleDrawerClose}>\n          {children}\n        </SwipeableTemporaryDrawer>\n        <Breadcrumbs />\n      </Fragment>}\n      { matches && <Fragment>\n        <SearchInput />\n        <SearchButton />\n        <FavoriteButton />\n        { false && <CompareButton />}\n        <CartButton cart_results={cart_results} />\n        { isAuthenticated ? <LogoutButton logout={logout} user={user} /> : <LoginButton loginWithRedirect={loginWithRedirect} />}\n      </Fragment>}\n    </Toolbar>\n  )\n}\n\n// const minMax = items => {\n//   return items.reduce((acc, val) => {\n//       acc[0] = ( acc[0] === undefined || val < acc[0] ) ? val : acc[0]\n//       acc[1] = ( acc[1] === undefined || val > acc[1] ) ? val : acc[1]\n//       return acc;\n//   }, []);\n// }\n\nconst Controls = props => {\n  const { additional_controls, stock_filtered } = props;\n  const store_ids = [...new Set(stock_filtered.map(d => d.store_id))];\n\n  return (\n    <List>\n      <ListItem>\n        <StoreDropdown store_ids={store_ids} />\n      </ListItem>\n\n      <ListItem>\n        <StockDropdown />\n      </ListItem>\n\n      <ListItem>\n        <ListItemText primary=\"Enable best prices\" />\n        <ListItemSecondaryAction>\n          <BestPriceSwitch />\n        </ListItemSecondaryAction>\n      </ListItem>\n\n      <ListItem>\n        <ListItemText primary=\"Enable stores view\" />\n        <ListItemSecondaryAction>\n          <ViewSwitch />\n        </ListItemSecondaryAction>\n      </ListItem>\n\n      <ListItem>\n        <ListItemText primary=\"Enable price filter\" />\n        <ListItemSecondaryAction>\n          <PriceSwitch />\n        </ListItemSecondaryAction>\n      </ListItem>\n      <ListItem>\n        <PriceSlider />\n      </ListItem>\n\n      <ListItem>\n        <BggInput />\n      </ListItem>\n\n      <ListItem>\n        <PriorityDropdown />\n      </ListItem>\n\n      { additional_controls !== null && additional_controls }\n    </List>\n  )\n}\n\nexport default props => {\n  const classes = useStyles();\n  const matches = useMediaQuery(theme => theme.breakpoints.up('md'));\n  const date = useSelector(state => state.pricesReducer.date);\n  const { store_filtered, stock_filtered, child_data, component, pre_component, additional_controls, paging=true } = props;\n  const page_size = props.page_size || 12;\n  const [page, setPage] = useQueryParam('page', withDefault(NumberParam, 1));\n  const { loginWithRedirect, logout, isAuthenticated, user } = useLogin();\n  const page_data = paginate(child_data, page_size, page, paging);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [page]);\n\n  return (\n    <Grid container className={classes.root} alignContent=\"center\" alignItems=\"center\">\n      <AppBar position=\"static\" className={classes.appbar}>\n        <Bar user={user} breadcrumbs={true} matches={matches} isAuthenticated={isAuthenticated} loginWithRedirect={loginWithRedirect} logout={logout}>\n          <Controls stock_filtered={stock_filtered} additional_controls={additional_controls} />\n        </Bar>\n      </AppBar>\n\n      <Container maxWidth=\"lg\">\n        <Grid container spacing={4} component={MainPaper} className={classes.content}>\n          <Grid item md={12} xs={12} component=\"div\">\n            <Grid container spacing={2}>\n              {child_data.length > page_size && paging && <Grid item xs={12}>\n                <Pagination variant=\"outlined\" shape=\"rounded\" count={pages(child_data, page_size)} page={page} onChange={(event, value) => setPage(value, 'pushIn')} />\n              </Grid>}\n              {pre_component !== undefined && pre_component}\n              {store_filtered.length > 0 ? component(page_data) : <Nothing />}\n              {child_data.length > page_size && paging && <Grid item xs={12}>\n                <Pagination variant=\"outlined\" shape=\"rounded\" count={pages(child_data, page_size)} page={page} onChange={(event, value) => setPage(value, 'pushIn')} />\n              </Grid>}\n            </Grid>\n          </Grid>\n        </Grid>\n      </Container>\n\n      {!matches && <AppBar position=\"fixed\" className={classes.bottomBar}>\n        <Bar user={user} breadcrumbs={false} matches={!matches} isAuthenticated={isAuthenticated} loginWithRedirect={loginWithRedirect} logout={logout} />\n      </AppBar>}\n\n      <Grid item xs={12}>\n        <Toolbar>\n          <Typography variant=\"body1\" color=\"inherit\">\n             2022 Dimitris Raviolos - {packagejs.version} - Last update: {new Date(date).toLocaleDateString('el-GR')}\n          </Typography>\n        </Toolbar>\n      </Grid>\n    </Grid>\n  )\n}\n","import { useSelector } from \"react-redux\";\n\nexport const storeFilter = store => d => {\n  if (store.includes(-1)) {\n    return true;\n  } else {\n    return store.includes(d.store_id);\n  }\n}\n\nexport const stockFilter = stock => d => d.stock === stock || stock === -1\n\nexport const bestPriceFilter = col => {\n  const hm = {};\n\n  col.map(d => {\n    const { boardgame_id } = d;\n\n    if (hm[boardgame_id] === undefined) {\n      hm[boardgame_id] = d;\n    } else {\n      if (d.price < hm[boardgame_id].price) {\n        hm[boardgame_id] = d;\n      }\n    }\n\n    return d;\n  });\n\n  return Object.values(hm);\n}\n\nexport const useStep = f => {\n  const store = useSelector(state => state.pricesReducer.store);\n  const stock = useSelector(state => state.pricesReducer.stock);\n  const prices = useSelector(state => state.pricesReducer.prices);\n  const price_range = useSelector(state => state.pricesReducer.price_range);\n  const enable_price_filter = useSelector(state => state.pricesReducer.enable_price_filter);\n  const enable_best_price = useSelector(state => state.pricesReducer.enable_best_price);\n  const [min, max] = price_range;\n  const page_filtered = f !== undefined ? f(prices) : prices\n  const range_filtered = enable_price_filter ? page_filtered.filter(d => d.price < max && d.price > min) : page_filtered;\n  const stock_filtered = range_filtered.filter(stockFilter(stock));\n  const best_filtered = enable_best_price ? bestPriceFilter(stock_filtered) : stock_filtered;\n  const store_filtered = best_filtered.filter(storeFilter(store));\n\n  return {\n    page_filtered,\n    stock_filtered,\n    store_filtered,\n  }\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport BoardgameCard from '../components/BoardgameCard';\nimport GenericPage from './GenericPage';\nimport { useStep } from '../hooks/useStep';\n\nexport const pricesToGroups = data => {\n  const rs = [];\n\n  data.map(d => {\n    if (rs[d.boardgame_id] === undefined) {\n      rs[d.boardgame_id] = {\n        ...d,\n        items: []\n      }\n\n      if (rs[d.boardgame_id].rank === undefined) {\n        rs[d.boardgame_id].rank = 999999;\n      }\n    }\n\n    rs[d.boardgame_id].items.push(d)\n    return d\n  })\n\n  return rs.filter(d => d.items.length > 0).sort((a, b) => a.rank - b.rank)\n}\n\nexport default () => {\n  const { store_filtered, stock_filtered } = useStep();\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={true}\n      page_name=\"/\"\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <BoardgameCard {...tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from './Link';\nimport { useStore } from '../hooks/useStore';\nimport { Typography } from '@material-ui/core';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport classNames from 'classnames';\nimport {\n  FacebookShareButton,\n  FacebookIcon,\n  FacebookMessengerShareButton,\n  FacebookMessengerIcon,\n  ViberShareButton,\n  ViberIcon,\n  WhatsappShareButton,\n  WhatsappIcon,\n  TwitterShareButton,\n  TwitterIcon,\n} from \"react-share\";\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    height: 0,\n    paddingTop: '75%', // 16:9\n  },\n  card_header: {\n    minHeight: 110,\n  },\n  out_of_stock: {\n    opacity: 0.5,\n  }\n}));\n\nconst addUTM = raw => {\n  const url = new URL(raw);\n  url.searchParams.append(\"utm_source\", \"dictummortuum\");\n  url.searchParams.append(\"utm_medium\", \"dictummortuum\");\n  url.searchParams.append(\"utm_campaign\", \"dictummortuum\");\n\n  return url.toString();\n}\n\nconst Media = props => {\n  const { store_thumb, url, thumb, boardgame_id, stock } = props.boardgame;\n  const { self_ref } = props;\n  const classes = useStyles();\n\n  if(self_ref) {\n    return (\n      <Link to={\"/item/\" + boardgame_id + \"?stock=\" + stock}>\n        <CardMedia\n          className={classes.media}\n          image={store_thumb === \"\" ? thumb : store_thumb}\n        />\n      </Link>\n    )\n  } else {\n    return (\n      <a href={addUTM(url)} target=\"_blank\" rel=\"noopener noreferrer\">\n        <CardMedia\n          className={classes.media}\n          image={store_thumb === \"\" ? thumb : store_thumb}\n        />\n      </a>\n    )\n  }\n}\n\nexport default props => {\n  const classes = useStyles();\n  const { url, name, store_id, price, stock } = props.boardgame;\n  const self = window.location.href;\n  const store = useStore(store_id);\n\n  return (\n    <Card className={classNames({[classes.out_of_stock]: stock === 2})}>\n      { url && <Media {...props} />}\n      <CardActions>\n        <IconButton component=\"div\">\n          <FacebookShareButton style={{ height: 24 }} url={self}>\n            <FacebookIcon size={24} round />\n          </FacebookShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <FacebookMessengerShareButton style={{ height: 24 }} url={self}>\n            <FacebookMessengerIcon size={24} round />\n          </FacebookMessengerShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <ViberShareButton style={{ height: 24 }} url={self}>\n            <ViberIcon size={24} round />\n          </ViberShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <WhatsappShareButton style={{ height: 24 }} url={self}>\n            <WhatsappIcon size={24} round />\n          </WhatsappShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <TwitterShareButton style={{ height: 24 }} url={self}>\n            <TwitterIcon size={24} round />\n          </TwitterShareButton>\n        </IconButton>\n      </CardActions>\n      <CardContent className={classes.card_header}>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {store.name}\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {price}\n        </Typography>\n        <Typography variant=\"subtitle1\">\n          {name}\n        </Typography>\n      </CardContent>\n    </Card>\n  )\n}\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useSelector } from \"react-redux\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { stockFilter, storeFilter } from '../hooks/useStep';\nimport {\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  ResponsiveContainer,\n  ComposedChart,\n  Tooltip,\n  Area,\n} from 'recharts';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(4),\n  },\n  label: {\n    marginBottom: theme.spacing(1),\n  }\n}));\n\nconst maxMinAvg = (arr) => {\n  var max = arr[0].price;\n  var min = arr[0].price;\n  var sum = arr[0].price;\n\n  for (var i = 1; i < arr.length; i++) {\n    if (arr[i].price > max) {\n      max = arr[i].price;\n    }\n    if (arr[i].price < min) {\n      min = arr[i].price;\n    }\n    sum = sum + arr[i].price;\n  }\n\n  return {\n    max: parseFloat(max.toFixed(2)),\n    min: parseFloat(min.toFixed(2)),\n    avg: parseFloat((sum/arr.length).toFixed(2))\n  }\n}\n\nconst transform = data => {\n  const rs = {};\n\n  data.map(d => {\n    if(rs[d.cr_date] === undefined) {\n      rs[d.cr_date] = [];\n    }\n\n    rs[d.cr_date].push(d)\n\n    return d\n  })\n\n  const retval = [];\n\n  for(let k in rs) {\n    const date = new Date(k)\n    const { avg, min, max } = maxMinAvg(rs[k])\n\n    retval.push({\n      avg,\n      range: [min, max],\n      cr_date: date.valueOf(),\n    })\n  }\n\n  return retval\n}\n\nconst formatDate = d => {\n  const date = new Date(d)\n  return date.getDate() + \"/\" + (date.getMonth() + 1)\n}\n\nconst formatLabel = d => {\n  const date = new Date(d)\n  return date.getDate() + \"/\" + (date.getMonth() + 1) + \"/\" + date.getFullYear()\n}\n\nconst domain = col => {\n  if(col.length === 0) {\n    return []\n  } else {\n    return [col[0].cr_date - 43200000, col[col.length-1].cr_date + 43200000]\n  }\n}\n\nexport default props => {\n  const classes = useStyles();\n  const { history } = props;\n  const store = useSelector(state => state.pricesReducer.store);\n  const stock = useSelector(state => state.pricesReducer.stock);\n  const p = history.filter(stockFilter(stock)).filter(storeFilter(store));\n  const processed = transform(p).sort((a, b) => b.cr_date - a.cr_date);\n\n  return (\n     <Paper className={classes.root}>\n      <Typography variant=\"body1\" color=\"inherit\" className={classes.label}>\n        Price history\n      </Typography>\n      <ResponsiveContainer width=\"100%\" height={200} >\n        <ComposedChart data={processed}>\n          <CartesianGrid strokeDasharray=\"5 5\" />\n          <XAxis dataKey=\"cr_date\" scale=\"time\" type=\"number\" domain={domain(processed)} tickFormatter={formatDate} />\n          <YAxis domain={['auto', 'auto']} type=\"number\" />\n          <Tooltip labelFormatter={formatLabel} />\n          <Area type=\"monotone\" dataKey=\"range\" fillOpacity={0.3} fill=\"#5e81ac\" />\n          <Line type=\"monotone\" dataKey=\"avg\" stroke=\"#bf616a\" strokeWidth={3} activeDot={{ r: 8 }} />\n        </ComposedChart>\n      </ResponsiveContainer>\n    </Paper>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nconst fetchPrices = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/prices.json').then(res => res.json())\n}\n\nconst fetchPrice = price_id => {\n  return fetch(base + '/rest/v1/prices/' + price_id + '.json').then(res => res.json())\n}\n\nexport const usePrices = boardgame_id => {\n  const [prices, setPrices] = useState([])\n\n  useEffect(() => {\n    fetchPrices(boardgame_id).then(data => setPrices(data))\n  }, [boardgame_id])\n\n  return prices\n}\n\nexport const usePrice = price_id => {\n  const [price, setPrice] = useState([])\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchPrice(price_id).then(data => {\n      if (isMounted) {\n        setPrice(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [price_id])\n\n  return price\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nexport const fetchPriceHistory = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/history.json').then(res => res.json())\n}\n\nexport const useHistory = boardgame_id => {\n  const [history, setHistory] = useState([])\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchPriceHistory(boardgame_id).then(data => {\n      if (isMounted) {\n        setHistory(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [boardgame_id])\n\n  return history\n}\n","import { useLocation } from 'react-router-dom';\n\nexport const useId = () => {\n  const { pathname } = useLocation();\n  const id = parseInt(pathname.split(\"/\")[2]);\n  return id\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport PriceCard from '../components/PriceCard';\nimport GenericPage from './GenericPage';\nimport BoardgameHistoricPrice from '../components/BoardgameHistoricPrice';\nimport { usePrices } from '../hooks/usePrices';\nimport { useHistory } from '../hooks/useHistory';\nimport { useStep } from '../hooks/useStep';\nimport { useId } from '../hooks/useId';\n\nconst fn = id => col => col.filter(d => d.boardgame_id === id).sort((a, b) => a.price - b.price)\n\nexport default () => {\n  const id = useId();\n  const { stock_filtered, store_filtered } = useStep(fn(id));\n  const history = useHistory(id);\n  const prices = usePrices(id);\n  const price_ids = store_filtered.map(d => d.id);\n\n  return (\n    <GenericPage\n      child_data={prices.filter(d => price_ids.includes(d.id))}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={false}\n      pre_component={\n        <Grid item xs={12}>\n          <BoardgameHistoricPrice history={history} />\n        </Grid>\n      }\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <PriceCard boardgame={tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Link from './Link';\n\nexport default props => {\n  const { id, boardgame_id, wishlist, preview } = props;\n  const [ wish ] = wishlist.filter(d => d.id === boardgame_id);\n  const { thumbnail } = wish;\n\n  return (\n    <Card key={id} square={true} elevation={3}>\n      <Link to={\"/item/\" + boardgame_id}>\n        <CardMedia style={{ paddingTop: '75%' }} image={thumbnail === undefined ? preview : thumbnail} />\n      </Link>\n    </Card>\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport CompareCard from '../components/CompareCard';\nimport BoardgameCard from '../components/BoardgameCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { useWishlist } from '../hooks/useWishlist';\nimport { useStep } from '../hooks/useStep';\nimport { useStore } from '../hooks/useStore';\nimport { pricesToGroups } from './LandingPage';\nimport Typography from '@material-ui/core/Typography';\nimport { Spinner } from '../components/Spinner';\n\nconst sumPrices = col => col.reduce((prev, curr) => {\n  return prev + curr.price;\n}, 0.0).toFixed(2);\n\nexport const pricesToStores = data => {\n  const rs = [];\n\n  data.map(d => {\n    if (rs[d.store_id] === undefined) {\n      rs[d.store_id] = {\n        store_id: d.store_id,\n        items: []\n      };\n    }\n\n    rs[d.store_id].items.push(d);\n    return d;\n  })\n\n  return rs.filter(d => d.items.length > 0).sort((a, b) => {\n    const diff = b.items.length - a.items.length\n\n    if(diff !== 0) {\n      return diff\n    } else {\n      return sumPrices(b.items) - sumPrices(a.items);\n    }\n  });\n}\n\nconst StoresList = props => {\n  const { store_id, items, wishlist } = props;\n  const store = useStore(store_id);\n  const sum = sumPrices(items);\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12}>\n        <Typography variant=\"h4\">\n          {store.name} -  {sum}\n        </Typography>\n      </Grid>\n      {items.sort((a, b) => a.boardgame_id - b.boardgame_id).map(d => (\n        <Grid key={d.id} item xs={6} md={3} lg={1}>\n          <CompareCard {...d} wishlist={wishlist} />\n        </Grid>\n      ))}\n    </Grid>\n  )\n}\n\nexport const WishesView = data => data.map((tile) => (\n  <Grid key={tile.id} item xs={12} md={6} lg={3}>\n    <BoardgameCard {...tile} />\n  </Grid>\n));\n\nexport const StoresView = wishlist => data => data.map(store => (\n  <Grid key={store.store_id} item xs={12}>\n    <StoresList {...store} wishlist={wishlist} />\n  </Grid>\n));\n\nexport default () => {\n  const wishlist = useWishlist();\n  const wishlist_stores_view = useSelector(state => state.pricesReducer.wishlist_stores_view);\n  const wishlist_priority = useSelector(state => state.pricesReducer.wishlist_priority);\n  const spinner = useSelector(state => state.pricesReducer.spinner);\n  const priority_filtered = wishlist.filter(d => parseInt(d.status.wishlistpriority) === wishlist_priority || wishlist_priority === -1);\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => priority_filtered.map(d => d.id).includes(d.boardgame_id)));\n\n  let grouped;\n\n  if (wishlist_stores_view) {\n    grouped = pricesToStores(store_filtered);\n  } else {\n    grouped = pricesToGroups(store_filtered);\n  }\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/wishlist\"\n      component={data => spinner ? <Spinner /> : wishlist_stores_view ? StoresView(wishlist)(data) : WishesView(data)}\n    />\n  )\n}\n","import React from 'react';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { useStep } from '../hooks/useStep';\nimport { pricesToGroups } from './LandingPage';\nimport { Spinner } from '../components/Spinner';\nimport { pricesToStores, StoresView, WishesView } from './WishlistPage';\n\nexport default () => {\n  const cart_results = useSelector(state => state.pricesReducer.cart_results);\n  const wishlist_stores_view = useSelector(state => state.pricesReducer.wishlist_stores_view);\n  const spinner = useSelector(state => state.pricesReducer.spinner);\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => cart_results.includes(d.boardgame_id)));\n  let grouped;\n\n  if (wishlist_stores_view) {\n    grouped = pricesToStores(store_filtered);\n  } else {\n    grouped = pricesToGroups(store_filtered);\n  }\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/cart\"\n      component={data => spinner ? <Spinner /> : wishlist_stores_view ? StoresView(cart_results.map(d => ({id: d})))(data) : WishesView(data)}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport GenericPage from './GenericPage';\nimport SearchInput from '../components/SearchInput';\nimport BoardgameCard from '../components/BoardgameCard';\nimport { useStep } from '../hooks/useStep';\nimport { useSelector } from \"react-redux\";\nimport fuse from 'fuse.js';\n\nconst searchFilter = col => {\n  const search_term = useSelector(state => state.pricesReducer.search_term);\n  const search_enabled = useSelector(state => state.pricesReducer.search_enabled);\n  const search_results = useSelector(state => state.pricesReducer.search_results);\n\n  if(search_term !== \"\" && search_enabled) {\n    const options = {\n      includeScore: true,\n      shouldSort: true,\n      ignoreLocation: true,\n      keys: ['name']\n    }\n\n    const f = new fuse(col, options)\n    const res = f.search(search_term).filter(d => d.score <= 0.6)\n    return res.map(d => d.item)\n  } else {\n    return search_results\n  }\n}\n\nexport const pricesToGroups = data => {\n  const rs = [];\n  const map = {};\n\n  data.map((d, i) => {\n    if (map[d.boardgame_id] !== undefined) {\n      i = map[d.boardgame_id];\n    }\n\n    if (rs[i] === undefined) {\n      rs[i] = {\n        ...d,\n        items: []\n      }\n      map[d.boardgame_id] = i\n    }\n\n    rs[i].items.push(d)\n    return d\n  })\n\n  return rs.filter(d => d.items.length > 0)\n}\n\nexport default () => {\n  const { store_filtered, stock_filtered } = useStep(searchFilter);\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={true}\n      page_name=\"/search\"\n      pre_component={\n        <Grid item xs={12}>\n          <SearchInput />\n        </Grid>\n      }\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <BoardgameCard {...tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid } from '@material-ui/core';\nimport { useBoardgame } from '../hooks/useBoardgame';\nimport Paper from '@material-ui/core/Paper';\nimport classNames from 'classnames';\nimport Link from './Link';\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    marginBottom: theme.spacing(1),\n  },\n  padding: {\n    paddingLeft: theme.spacing(1),\n  },\n  colored: {\n    backgroundColor: \"#81a1c1\",\n    color: \"white\",\n  }\n}));\n\nexport default props => {\n  const classes = useStyles();\n  const { id, boardgame_id, rank, items, alternate } = props;\n  const boardgame = useBoardgame(boardgame_id);\n  const { boardgame_name } = boardgame;\n  const available_prices = items.sort((a, b) => a.price - b.price)\n  const l = available_prices.length;\n\n  let lowest = undefined;\n  let highest = undefined;\n\n  if (l >= 1) {\n    lowest = available_prices[0]\n  }\n\n  if (l >= 2) {\n    if (lowest.price !== available_prices[l-1].price) {\n      highest = available_prices[l-1]\n    }\n  }\n\n  return (\n    <Link to={\"/item/\" + boardgame_id} style={{ textDecoration: \"none\"}}>\n      <Paper className={classNames(classes.margin, {[classes.colored]: alternate === 0})}>\n        <Grid container spacing={2} key={id}>\n          <Grid item xs={8}>\n            <Typography variant=\"subtitle1\" className={classes.padding}>\n\n                {boardgame_name}\n\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"subtitle1\">\n              BGG Rank {rank}\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"subtitle1\">\n            {lowest && \"\" + lowest.price} {highest && \"- \" + highest.price}\n            </Typography>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Link>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport { bgg_xmlapi, forceError, logError, transformBggData } from \"../api/common\";\nimport XMLParser from 'react-xml-parser';\nimport pRetry from 'p-retry';\n\nconst req = list_id => fetch(`${bgg_xmlapi}/geeklist/${list_id}`)\n  .then(forceError)\n  .then(res => res.text())\n  .then(data => {\n    const xml = new XMLParser().parseFromString(data);\n    return transformBggData(xml)\n  })\n\nconst fetchGeeklist = (list_id, retries) => pRetry(async () => req(list_id), { onFailedAttempt: logError, retries })\n\nexport const useGeeklist = geeklist_id => {\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    fetchGeeklist(geeklist_id, 2).then(rs => {\n      setItems(rs)\n    })\n  }, [geeklist_id])\n\n  return items.filter(d => d.id)\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport GeeklistCard from '../components/GeeklistCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { pricesToGroups } from './LandingPage';\nimport { useGeeklist } from '../hooks/useGeeklist';\nimport { useStep } from '../hooks/useStep';\nimport { useId } from '../hooks/useId';\nimport { Spinner } from '../components/Spinner';\n\nexport default () => {\n  const geeklist_id = useId();\n  const geeklist = useGeeklist(geeklist_id);\n  const spinner = useSelector(state => state.pricesReducer.spinner);\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => geeklist.map(d => d.id).includes(d.boardgame_id)));\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_size={500}\n      page_name={\"/geeklist/\" + geeklist_id}\n      component={data => spinner ? <Spinner /> : data.map((tile, i) => (\n        <Grid key={tile.id} item xs={12}>\n          <GeeklistCard {...tile} alternate={i%2} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport PriceCard from '../components/PriceCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { useStep } from '../hooks/useStep';\n\nexport default () => {\n  const cart_results = useSelector(state => state.pricesReducer.cart_results);\n  const { store_filtered, stock_filtered } = useStep(() => cart_results);\n\n  return (\n    <GenericPage\n      child_data={store_filtered}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/compare\"\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={4}>\n          <PriceCard boardgame={tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React, { useState, useEffect } from \"react\";\n\nconst Request = props => {\n  const { request, children, initialState } = props;\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [rs, setRs] = useState(initialState || {});\n\n  useEffect(() => {\n    fetch(request)\n      .then(res => res.json())\n      .then(\n        rs => {\n          setIsLoaded(true);\n          setRs(rs);\n        },\n        err => {\n          setIsLoaded(true);\n          setError(err);\n        }\n      )\n  }, [request]);\n\n  return (\n    <React.Fragment>\n      {React.cloneElement(children, {\n        data: rs,\n        error,\n        isLoaded,\n      })}\n    </React.Fragment>\n  )\n}\n\nexport default Request;\n","import React from 'react';\nimport Request from '../components/Request';\nimport { Grid } from '@material-ui/core';\nimport Container from '@material-ui/core/Container';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nconst Styled = back => ({\n  whiteSpace: \"pre-wrap\",\n  backgroundColor: back ? \"white\": \"lightgrey\",\n})\n\nconst Component = props => {\n  const { data } = props;\n\n  return (\n    <Grid container alignContent=\"center\" alignItems=\"center\">\n      {data.sort((a, b) => b.items.length - a.items.length).map((d, i) => (\n        <Grid key={i} item xs={12}>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography>Mathtrade ID: {d.id} - Length: {d.length} - Cash#: {d.cash}</Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Typography>\n                <Grid container>\n                  {d.items.map((k, j) => (\n                    <Grid item xs={12} component=\"pre\" style={Styled(j % 2 === 0)}>{k}</Grid>\n                  ))}\n                </Grid>\n              </Typography>\n            </AccordionDetails>\n          </Accordion>\n        </Grid>\n      ))}\n    </Grid>\n  )\n}\n\nexport default () => {\n  return (\n    <Container maxWidth=\"xl\">\n      <Request request=\"https://raw.githubusercontent.com/DictumMortuum/json-api/master/rest/v1/mathtrade/301684.json\" initialState={[]}>\n        <Component />\n      </Request>\n    </Container>\n  )\n}\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport * as fflate from 'fflate';\nimport { base } from \"./common\";\n\nexport const fetchAllPrices = createAsyncThunk('prices', async () => {\n  // const pull = localStorage.getItem('pull');\n  // let origText = localStorage.getItem('prices');\n\n  // if (pull === 'true' || pull === null || origText == null) {\n    const buffer = await fetch(base + '/rest/v1/prices.json.gz').then(res => res.arrayBuffer());\n    const compressed = new Uint8Array(buffer);\n    const decompressed = fflate.decompressSync(compressed);\n    const origText = fflate.strFromU8(decompressed);\n\n    // localStorage.setItem('prices', origText);\n    // localStorage.setItem('pull', 'false');\n  // }\n\n  return JSON.parse(origText || []);\n});\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { base } from \"./common\";\n\nexport const fetchStores = createAsyncThunk('stores', async () => {\n  return await fetch(base + '/rest/v1/stores.json').then(res => res.json())\n})\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { base } from \"./common\";\n\nexport const fetchDate = createAsyncThunk('date', async () => {\n  const saved = localStorage.getItem('date');\n  const date = await fetch(base + '/rest/v1/date.json').then(res => res.json());\n\n  if (saved !== date.date) {\n    console.log(\"updated!\", saved, date.date)\n    localStorage.setItem('date', date.date);\n    localStorage.setItem('pull', 'true');\n  }\n\n  return date;\n});\n","import React, { useEffect } from 'react'\nimport { useDispatch } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport LandingPage from './pages/LandingPage';\nimport BoardgamePage from './pages/BoardgamePage';\nimport CartPage from './pages/CartPage';\nimport SearchPage from './pages/SearchPage';\nimport GeeklistPage from './pages/GeeklistPage';\nimport WishlistPage from './pages/WishlistPage';\nimport ComparePage from './pages/ComparePage';\nimport MathtradePage from './pages/MathtradePage';\nimport { fetchAllPrices } from './api/prices';\nimport { fetchStores } from './api/stores';\nimport { fetchDate } from './api/date';\nimport {\n  BooleanParam,\n  NumberParam,\n  StringParam,\n  NumericArrayParam,\n  withDefault,\n  useQueryParam\n} from 'use-query-params';\n\nexport default () => {\n  const dispatch = useDispatch();\n  const [qstore] = useQueryParam(\"store\", withDefault(NumericArrayParam, [-1]));\n  const [bgg_id] = useQueryParam(\"bgg_id\", withDefault(NumericArrayParam, []));\n  const [qstock] = useQueryParam(\"stock\", withDefault(NumberParam, 0));\n  const [qname] = useQueryParam(\"bgg_username\", StringParam);\n  const [qview] = useQueryParam(\"stores_view\", withDefault(BooleanParam, false));\n  const [qpricef] = useQueryParam(\"price_filter\", withDefault(BooleanParam, false));\n  const [qbest] = useQueryParam(\"best_prices\", withDefault(BooleanParam, false));\n  const [min] = useQueryParam(\"min\", withDefault(NumberParam, 0));\n  const [max] = useQueryParam(\"max\", withDefault(NumberParam, 500));\n\n  useEffect(() => {\n    dispatch(fetchAllPrices())\n    dispatch(fetchStores())\n    dispatch(fetchDate())\n  }, []);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_STORE\",\n      store: qstore,\n    })\n  }, [qstore]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_STOCK\",\n      stock: qstock,\n    })\n  }, [qstock]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_WISHLIST_USERNAME\",\n      payload: qname,\n    })\n  }, [qname]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_CART\",\n      payload: bgg_id,\n    })\n  }, [bgg_id]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_WISHLIST_VIEW\",\n      payload: qview,\n    })\n  }, [qview]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_PRICE_FILTER\",\n      payload: qpricef,\n    })\n\n    dispatch({\n      type: \"SET_PRICE_RANGE\",\n      payload: [min, max],\n    })\n  }, [min, max, qpricef]);\n\n  useEffect(() => {\n    dispatch({\n      type: \"SET_BEST_PRICE\",\n      payload: qbest,\n    })\n  }, [qbest]);\n\n  return (\n    <Switch >\n      <Route path={`/`} exact>\n        <LandingPage />\n      </Route>\n      <Route path={`/cart`} exact>\n        <CartPage />\n      </Route>\n      <Route path={`/search`} exact>\n        <SearchPage />\n      </Route>\n      <Route path={`/wishlist`} exact>\n        <WishlistPage />\n      </Route>\n      <Route path={`/mathtrade`} exact>\n        <MathtradePage />\n      </Route>\n      <Route path={`/geeklist/:geeklist_id`}>\n        <GeeklistPage />\n      </Route>\n      <Route path={`/item/:boardgame_id`}>\n        <BoardgamePage />\n      </Route>\n      <Route path={`/compare`}>\n        <ComparePage />\n      </Route>\n    </Switch>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport { reducer as pricesReducer } from './reducers/prices';\nimport App from './App';\nimport thunkMiddleware from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { Auth0Provider } from \"@auth0/auth0-react\";\nimport { QueryParamProvider, transformSearchStringJsonSafe } from 'use-query-params';\n\nconst rootReducer = combineReducers({\n  pricesReducer,\n})\n\nconst composedEnhancer = composeWithDevTools(applyMiddleware(thunkMiddleware))\n\nconst store = createStore(rootReducer, composedEnhancer)\n\nstore.dispatch({\n  type: \"INIT\"\n});\n\nconst queryStringifyOptions = {\n  transformSearchString: transformSearchStringJsonSafe,\n};\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#5e81ac\",\n    },\n    secondary: {\n      main: \"#bf616a\",\n    },\n    text: {\n      primary: \"#2e3440\",\n    }\n  },\n  overrides: {\n    MuiInputLabel: {\n      root: {\n        backgroundColor: '#ffffff',\n        paddingLeft: '4px',\n        paddingRight: '4px'\n      }\n    }\n  }\n});\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <HashRouter>\n      <Provider store={store}>\n        <Route path=\"/\">\n          <Auth0Provider domain=\"dev-11hy0hqn.us.auth0.com\" clientId=\"gEd77V5i5uBswawxfycFKL1eEv8BlhdE\" redirectUri={window.location.origin}>\n            <QueryParamProvider ReactRouterRoute={Route} stringifyOptions={queryStringifyOptions}>\n              <App />\n            </QueryParamProvider>\n          </Auth0Provider>\n        </Route>\n      </Provider>\n    </HashRouter>\n  </ThemeProvider>\n, document.getElementById('root'));\n","export const reducer = (state = {}, action) => {\n  switch (action.type) {\n    case \"INIT\":\n      return {\n        store: [-1],\n        stock: 0,\n        order: 0,\n        cart_results: [],\n        search_term: \"\",\n        search_results: [],\n        search_enabled: false,\n        wishlist_term: \"\",\n        wishlist_priority: -1,\n        wishlist_stores_view: false,\n        enable_price_filter: false,\n        enable_best_price: false,\n        wishlist: [],\n        prices: [],\n        price_range: [0, 200],\n        history: [],\n        stores: [],\n        spinner: true,\n        date: new Date(),\n        user: {\n          isAuthenticated: false,\n          details: {},\n          saved: true,\n        },\n      }\n    case \"prices/fulfilled\": {\n      return {\n        ...state,\n        spinner: false,\n        prices: action.payload,\n      }\n    }\n    case \"date/fulfilled\": {\n      return {\n        ...state,\n        date: new Date(action.payload.date),\n      }\n    }\n    case \"stores/fulfilled\":\n      return {\n        ...state,\n        stores: action.payload\n      }\n    case \"SET_STOCK\": {\n      return {\n        ...state,\n        stock: action.stock,\n      }\n    }\n    case \"SET_STORE\": {\n      return {\n        ...state,\n        store: action.store,\n      }\n    }\n    case \"ADD_TO_CART\":\n      return {\n        ...state,\n        cart_results: [...state.cart_results.filter(d => d !== action.cart), action.cart],\n      }\n    case \"SET_CART\":\n      return {\n        ...state,\n        cart_results: action.payload,\n      }\n    case \"SET_PRICE_RANGE\":\n      return {\n        ...state,\n        price_range: action.payload,\n      }\n    case \"SET_PRICE_FILTER\":\n      return {\n        ...state,\n        enable_price_filter: action.payload\n      }\n    case \"SET_BEST_PRICE\":\n      return {\n        ...state,\n        enable_best_price: action.payload\n      }\n    case \"SET_SEARCH_TERM\":\n      return {\n        ...state,\n        search_term: action.payload,\n        search_enabled: false,\n      }\n    case \"EXECUTE_SEARCH\":\n      return {\n        ...state,\n        search_enabled: true,\n      }\n    case \"SET_WISHLIST\":\n      return {\n        ...state,\n        wishlist: action.payload\n      }\n    case \"SET_WISHLIST_USERNAME\":\n      return {\n        ...state,\n        wishlist_term: action.payload\n      }\n    case \"SET_WISHLIST_VIEW\":\n      return {\n        ...state,\n        wishlist_stores_view: action.payload\n      }\n    case \"SET_PRIORITY\":\n      return {\n        ...state,\n        wishlist_priority: action.payload\n      }\n    case \"TOGGLE_SPINNER\":\n      return {\n        ...state,\n        spinner: !state.spinner\n      }\n    case \"SET_USER\":\n      return {\n        ...state,\n        user: {\n          ...action.payload,\n          saved: true,\n        }\n      }\n    default:\n      return state;\n  }\n};\n"],"sourceRoot":""}