{"version":3,"sources":["pages/cartoff.svg","components/BoardgameImage.js","api/common.js","hooks/useBoardgame.js","components/BoardgameCard.js","common.js","components/StockDropdown.js","components/StoreDropdown.js","components/Breadcrumbs.js","components/SearchButton.js","components/SearchInput.js","hooks/useLogin.js","pages/GenericPage.js","hooks/useStep.js","pages/LandingPage.js","components/PriceCard.js","components/BoardgameHistoricPrice.js","hooks/usePrices.js","hooks/useHistory.js","hooks/useId.js","pages/BoardgamePage.js","pages/CartPage.js","pages/SearchPage.js","components/GeeklistCard.js","hooks/useGeeklist.js","pages/GeeklistPage.js","hooks/useWishlist.js","components/BggFetch.js","components/BggInput.js","pages/WishlistPage.js","pages/ComparePage.js","api/prices.js","api/stores.js","api/date.js","App.js","index.js","reducers/prices.js"],"names":["module","exports","__webpack_require__","p","BoardgameImage","props","srcs","_useState","useState","_useState2","Object","slicedToArray","i","setI","src","undefined","useEffect","image","Image","onerror","onload","complete","naturalWidth","naturalHeight","react_default","a","createElement","CardMedia","style","paddingTop","base","forceError","res","status","Error","logError","error","console","log","concat","attemptNumber","retriesLeft","transformBggData","data","filtered","children","map","d","attributes","objectid","filter","toConsumableArray","Set","parseInt","tpl","boardgame_id","boardgame_name","images","useBoardgame","boardgame","setBoardgame","isMounted","fetch","then","json","fetchBoardgame","useStyles","makeStyles","theme","card_header","minHeight","BoardgameCard","id","rank","items","classes","available_prices","sort","b","price","l","length","lowest","highest","Card","key","square","elevation","react_router_dom","to","CardContent","className","Typography","variant","color","useParams","_useLocation","useLocation","search","rest","objectWithoutProperties","params","URLSearchParams","page","get","stock","objectSpread","has_stock","has","changePage","path","history","event","value","push","pages","col","pageSize","Math","ceil","StockDropdown","_useSelector","useSelector","state","pricesReducer","stocks","_useParams","url_stock","dispatch","useDispatch","type","Paper","FormControl","fullWidth","InputLabel","Select","labelId","onChange","target","MenuItem","StoreDropdown","stores","store","name","root","flexGrow","textDecoration","components_Breadcrumbs","args","pathname","split","slice","Breadcrumbs","separator","aria-label","Component","search_term","isSending","setIsSending","useHistory","useRef","current","sendRequest","useCallback","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","abrupt","stop","InputAdornment","position","IconButton","disabled","onClick","Search_default","input","margin","spacing","defineProperty","breakpoints","up","marginRight","payload","component","onSubmit","e","preventDefault","InputBase","placeholder","inputProps","endAdornment","components_SearchButton","useLogin","saved","user","_useAuth","useAuth0","isAuthenticated","loginWithRedirect","logout","body","method","headers","Content-Type","JSON","stringify","details","background","fontFamily","appbar","marginBottom","bottomBar","top","bottom","content","padding","pagination","MainPaper","assign","LoginButton","Button","LogoutButton","picture","returnTo","window","location","origin","Avatar","alt","CartButton","cart_results","Badge","badgeContent","max","Link","ShoppingCart","FavoriteButton","Favorite","SearchButton","Pageview","Bar","matches","breadcrumbs","Toolbar","react","SearchInput","GenericPage_SearchButton","GenericPage_FavoriteButton","GenericPage_CartButton","GenericPage_LogoutButton","GenericPage_LoginButton","Nothing","Grid","container","alignContent","alignItems","direction","item","xs","spinner","CircularProgress","height","EmptyImg","Controls","current_stores","Main","child_data","page_size","paging","page_name","pre_component","store_filtered","page_data","Pagination","shape","count","GenericPage_Nothing","GenericPage","useMediaQuery","date","stock_filtered","_props$paging","store_ids","store_id","includes","array","pageNumber","paginate","_useLogin","scrollTo","AppBar","GenericPage_Bar","Container","maxWidth","md","GenericPage_Controls","GenericPage_Main","packagejs","version","Date","toLocaleDateString","storeFilter","stockFilter","useStep","f","prices","page_filtered","pricesToGroups","rs","LandingPage","_useStep","grouped","tile","lg","media","out_of_stock","opacity","addUTM","url","Media","_props$boardgame","store_thumb","thumb","self_ref","href","rel","PriceCard","_props$boardgame2","self","classNames","PriceCard_Media","CardActions","FacebookShareButton","FacebookIcon","size","round","FacebookMessengerShareButton","FacebookMessengerIcon","ViberShareButton","ViberIcon","WhatsappShareButton","WhatsappIcon","TwitterShareButton","TwitterIcon","cart","AddShoppingCart_default","marginLeft","label","maxMinAvg","arr","min","sum","parseFloat","toFixed","avg","formatDate","getDate","getMonth","formatLabel","getFullYear","BoardgameHistoricPrice","processed","cr_date","retval","k","_maxMinAvg","range","valueOf","transform","ResponsiveContainer","width","ComposedChart","CartesianGrid","strokeDasharray","XAxis","dataKey","scale","domain","tickFormatter","YAxis","Tooltip","labelFormatter","Area","fillOpacity","fill","Line","stroke","strokeWidth","activeDot","r","usePrices","setPrices","fetchPrices","setHistory","fetchPriceHistory","useId","BoardgamePage","fn","price_ids","CartPage","searchFilter","search_enabled","search_results","fuse","includeScore","shouldSort","ignoreLocation","keys","score","SearchPage","paddingLeft","colored","backgroundColor","GeeklistCard","alternate","req","list_id","text","xml","XMLParser","parseFromString","useGeeklist","geeklist_id","setItems","retries","pRetry","onFailedAttempt","Spinner","GeeklistPage","geeklist","GeeklistPage_Spinner","encodeURIComponent","fetchWishList","wishlist_term","_ref","term","sent","t0","_x","apply","this","arguments","BggFetch","WishlistPage","wishlist","username","_callee2","_context2","useWishlist","BggInput","WishlistPage_Spinner","ComparePage","fetchAllPrices","createAsyncThunk","compressed","decompressed","origText","Uint8Array","arrayBuffer","t1","fflate","parse","fetchStores","fetchDate","App","react_router","exact","rootReducer","combineReducers","action","composedEnhancer","composeWithDevTools","applyMiddleware","thunkMiddleware","createStore","createTheme","palette","primary","main","secondary","ReactDOM","render","ThemeProvider","es","auth0_react_esm","clientId","redirectUri","document","getElementById"],"mappings":"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","file":"static/js/main.9148dded.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cartoff.dd87c6d4.svg\";","import React, { useEffect, useState } from \"react\";\nimport CardMedia from '@material-ui/core/CardMedia';\n\nexport default props => {\n  const { srcs } = props;\n  const [i, setI] = useState(0);\n  const src = srcs[i] === undefined ? \"https://via.placeholder.com/250\" : srcs[i]\n\n  useEffect(() => {\n    const image = new Image();\n    const checkValid = () => {\n      if (image.complete && image.naturalWidth < 100 && image.naturalHeight < 100) {\n        setI(i+1);\n      }\n    }\n\n    image.onerror = () => { setI(i+1) }\n    image.onload = checkValid;\n    image.src = srcs[i];\n  }, [srcs]);\n\n  return (\n    <CardMedia style={{ paddingTop: '75%' }} image={src} />\n  );\n};\n","export const base = 'https://raw.githubusercontent.com/DictumMortuum/json-api/master'\nexport const bgg_xmlapi = 'https://boardgamegeek.com/xmlapi'\nexport const bgg_xmlapi2 = 'https://api.geekdo.com/xmlapi2'\nexport const deta = 'https://szb34l.deta.dev'\n\nexport const forceError = res => {\n  if (res.status === 202) {\n    throw new Error(\"impersonating an error, as we have to retry, since the request is queued on the backend now\");\n  } else {\n    return res\n  }\n}\n\nexport const logError = error => {\n  console.log(`Attempt ${error.attemptNumber} failed. There are ${error.retriesLeft} retries left.`);\n}\n\nexport const transformBggData = data => {\n  const objtoid = data.children.map(d => d.attributes.objectid)\n  const filtered = objtoid.filter(d => d !== undefined)\n  const unique = [...new Set(filtered)]\n  return unique.map(d => parseInt(d))\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nconst fetchBoardgame = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/boardgame.json').then(res => res.json())\n}\n\nconst tpl = {\n  boardgame_id: \"\",\n  boardgame_name: \"\",\n  images: [],\n}\n\nexport const useBoardgame = boardgame_id => {\n  const [boardgame, setBoardgame] = useState(tpl)\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchBoardgame(boardgame_id).then(data => {\n      if (isMounted) {\n        setBoardgame(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [boardgame_id])\n\n  return boardgame\n}\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport BoardgameImage from './BoardgameImage';\nimport { Link } from \"react-router-dom\";\nimport { useBoardgame } from '../hooks/useBoardgame';\n\nconst useStyles = makeStyles((theme) => ({\n  card_header: {\n    minHeight: 120,\n  },\n}));\n\nexport default props => {\n  const { id, boardgame_id, rank, items } = props;\n  const classes = useStyles();\n  const boardgame = useBoardgame(boardgame_id);\n  const { images, boardgame_name } = boardgame;\n  const available_prices = items.sort((a, b) => a.price > b.price)\n  const l = available_prices.length;\n\n  let lowest = undefined;\n  let highest = undefined;\n\n  if (l >= 1) {\n    lowest = available_prices[0]\n  }\n\n  if (l >= 2) {\n    if (lowest.price !== available_prices[l-1].price) {\n      highest = available_prices[l-1]\n    }\n  }\n\n  return (\n    <Card key={id} square={true} elevation={3}>\n      <Link to={\"/item/\" + boardgame_id}>\n        <BoardgameImage srcs={[`https://raw.githubusercontent.com/DictumMortuum/json-api/master/rest/v1/boardgames/${boardgame_id}/image.avif`, ...images]} />\n      </Link>\n      <CardContent className={classes.card_header}>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          BGG Rank {rank}\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {lowest && \"€\" + lowest.price} {highest && \"- €\" + highest.price}\n        </Typography>\n        <Typography variant=\"subtitle1\">\n          {boardgame_name}\n        </Typography>\n      </CardContent>\n    </Card>\n  )\n}\n","import { useLocation } from 'react-router-dom';\n\nexport const useParams = () => {\n  const { search, ...rest } = useLocation();\n  const params = new URLSearchParams(search)\n  const page = parseInt(params.get(\"page\")) || 1\n  const stock = params.get(\"stock\") || 0\n\n  return {\n    ...rest,\n    page,\n    stock,\n    has_stock: params.has(\"stock\"),\n  }\n}\n\nexport const changePage = (path, history) => (event, value) => {\n  if (value === 1) {\n    history.push(path)\n  } else {\n    history.push(path + \"?page=\" + value)\n  }\n}\n\nexport const paginate = (array, pageSize, pageNumber, paging) => {\n  return paging === true ? array.slice((pageNumber-1) * pageSize, pageNumber * pageSize) : array;\n}\n\nexport const pages = (col, pageSize) => Math.ceil(col.length/pageSize)\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport { useParams } from '../common';\n\nexport default () => {\n  const { stock, stocks } = useSelector(state => state.pricesReducer)\n  const { stock: url_stock, has_stock } = useParams();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!has_stock) {\n      return\n    }\n\n    dispatch({\n      type: \"SET_STOCK\",\n      stock: parseInt(url_stock)\n    })\n  }, [url_stock]);\n\n  return (\n    <Paper>\n      <FormControl variant=\"outlined\" fullWidth>\n        <InputLabel id=\"stock-select-label\">Stock</InputLabel>\n        <Select\n          labelId=\"stock-select-label\"\n          id=\"stock-select\"\n          value={stock}\n          onChange={(event) => {\n            dispatch({\n              type: \"SET_STOCK\",\n              stock: event.target.value\n            })\n          }}\n        >\n          {stocks.map((d, i) => <MenuItem key={d} value={i}>{d}</MenuItem>)}\n          <MenuItem key={-1} value={-1}>Show all</MenuItem>\n        </Select>\n      </FormControl>\n    </Paper>\n  )\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\n\nexport default props => {\n  const { stores } = props;\n  const { store } = useSelector(state => state.pricesReducer)\n  const dispatch = useDispatch();\n\n  return (\n    <Paper>\n      <FormControl variant=\"outlined\" fullWidth>\n        <InputLabel id=\"store-select-label\">Store</InputLabel>\n        <Select\n          labelId=\"store-select-label\"\n          id=\"store-select\"\n          value={store}\n          onChange={(event) => {\n            dispatch({\n              type: \"SET_STORE\",\n              store: event.target.value\n            })\n          }}\n        >\n          <MenuItem key={-1} value={-1}>None</MenuItem>\n          {stores.map(d => <MenuItem key={d.id} value={d.id}>{d.name}</MenuItem>)}\n        </Select>\n      </FormControl>\n    </Paper>\n  )\n}\n","import React from 'react';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport { Typography } from '@material-ui/core';\nimport { Link, useLocation } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    color: \"#d8dee9\",\n    flexGrow: 1\n  },\n  color: {\n    color: \"#d8dee9\",\n    textDecoration: \"none\",\n  }\n}));\n\nexport default () => {\n  const classes = useStyles();\n  const { pathname } = useLocation();\n  const args = pathname.split(\"/\").slice(2).filter(d => d !== \"item\").filter(d => d !== \"\");\n\n  return (\n    <Breadcrumbs className={classes.root} separator=\"/\" aria-label=\"breadcrumb\">\n      <Link className={classes.color} to={\"/\"}>\n        <Typography variant=\"h5\">Prices</Typography>\n      </Link>\n      {args.map(d => (\n        <Link key={d} className={classes.color} to={\"/item/\" + d}>\n          <Typography variant=\"h5\" >{d}</Typography>\n        </Link>\n      ))}\n    </Breadcrumbs>\n  );\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nconst Component = () => {\n  const dispatch = useDispatch();\n  const { search_term } = useSelector(state => state.pricesReducer);\n  const [isSending, setIsSending] = useState(false);\n  const history = useHistory();\n  const isMounted = useRef(true);\n\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n    return () => {\n      isMounted.current = false\n    }\n  }, [])\n\n  const sendRequest = useCallback(async() => {\n    // don't send again while we are sending\n    if (isSending) return\n    // update state\n    setIsSending(true)\n    dispatch({ type: \"EXECUTE_SEARCH\" })\n    history.push(\"/search\")\n\n    // once the request is sent, update state again\n    if (isMounted.current) // only update if we are still mounted\n      setIsSending(false)\n  }, [search_term, dispatch]) // update the callback if the state changes\n\n  return (\n    <InputAdornment position=\"end\">\n      <IconButton type=\"submit\" disabled={isSending} onClick={sendRequest} aria-label=\"search\">\n        <SearchIcon />\n      </IconButton>\n    </InputAdornment>\n  )\n}\n\nexport default Component;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchButton from './SearchButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\n\nconst useStyles = makeStyles((theme) => ({\n  input: {\n    margin: theme.spacing(1),\n  },\n  root: {\n    margin: theme.spacing(1),\n    [theme.breakpoints.up('md')]: {\n      marginRight: theme.spacing(3),\n    },\n  }\n}));\n\nconst onChange = dispatch => event => dispatch({\n  type: \"SET_SEARCH_TERM\",\n  payload: event.target.value,\n})\n\nconst Component = props => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  return (\n    <Paper component=\"form\" onSubmit={e => { e.preventDefault(); }}>\n      <InputBase\n        placeholder=\" Search...\"\n        className={classes.input}\n        fullWidth\n        inputProps={{ 'aria-label': 'search' }}\n        onChange={onChange(dispatch)}\n        endAdornment={<SearchButton />}\n      />\n    </Paper>\n  )\n}\n\nexport default Component;\n","import { useEffect } from 'react';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { useDispatch } from 'react-redux';\nimport { useSelector } from \"react-redux\";\nimport { deta } from \"../api/common\";\n\nconst createUser = body => fetch(`${deta}/user`, {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify(body)\n}).then(res => res.json())\n\nexport const useLogin = () => {\n  const dispatch = useDispatch();\n  const { saved } = useSelector(state => state.pricesReducer.user);\n  const { isAuthenticated, user, loginWithRedirect, logout } = useAuth0();\n\n  useEffect(() => {\n    if (isAuthenticated && !saved) {\n      createUser(user).then(data => dispatch({\n        type: \"SET_USER\",\n        payload: {\n          isAuthenticated,\n          details: data,\n        }\n      }));\n    }\n  }, [dispatch, isAuthenticated, saved, user]);\n\n  return {\n    isAuthenticated,\n    user,\n    loginWithRedirect,\n    logout,\n  }\n}\n","import React, { useEffect, Fragment } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Badge from '@material-ui/core/Badge';\nimport StockDropdown from '../components/StockDropdown';\nimport StoreDropdown from '../components/StoreDropdown';\nimport Breadcrumbs from '../components/Breadcrumbs';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useSelector } from \"react-redux\";\nimport { Link } from 'react-router-dom';\nimport Typography from '@material-ui/core/Typography';\nimport EmptyImg from './cartoff.svg';\nimport Paper from '@material-ui/core/Paper';\nimport SearchInput from '../components/SearchInput';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Container from '@material-ui/core/Container';\nimport packagejs from '../../package.json';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { paginate, pages, changePage, useParams } from '../common';\nimport { useHistory } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport { ShoppingCart, Favorite, Pageview, Compare } from '@material-ui/icons';\nimport { useLogin } from '../hooks/useLogin';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    background: '#d8dee9',\n    fontFamily: \"sans\",\n  },\n  appbar: {\n    marginBottom: theme.spacing(4),\n  },\n  bottomBar: {\n    top: 'auto',\n    bottom: 0,\n  },\n  content: {\n    minHeight: '90vh',\n    padding: 10\n  },\n  margin: {\n    color: \"white\"\n  },\n  pagination: {\n    padding: theme.spacing(1),\n  },\n}));\n\nconst MainPaper = props => (\n  <Paper variant=\"outlined\" square {...props} />\n)\n\nconst LoginButton = props => {\n  const { loginWithRedirect } = props;\n  return <Button onClick={() => loginWithRedirect()} color=\"inherit\">Login</Button>;\n};\n\nconst LogoutButton = props => {\n  const { user, logout } = props;\n  const { picture, name } = user;\n\n  return (\n    <IconButton onClick={() => logout({ returnTo: window.location.origin })} >\n      <Avatar alt={name} src={picture} />\n    </IconButton>\n  );\n};\n\nconst CartButton = props => {\n  const { cart_results } = props;\n\n  return (\n    <IconButton>\n      <Badge badgeContent={cart_results.length} color=\"secondary\" max={99999} style={{ color: \"white\" }} component={Link} to=\"/cart\">\n        <ShoppingCart />\n      </Badge>\n    </IconButton>\n  )\n}\n\nconst FavoriteButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/wishlist\">\n      <Favorite />\n    </IconButton>\n  )\n}\n\nconst SearchButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/search\">\n      <Pageview />\n    </IconButton>\n  )\n}\n\nconst CompareButton = () => {\n  return (\n    <IconButton style={{ color: \"white\" }} component={Link} to=\"/compare\">\n      <Compare />\n    </IconButton>\n  )\n}\n\nconst Bar = props => {\n  const { matches, breadcrumbs, isAuthenticated, cart_results, loginWithRedirect, logout, user } = props;\n\n  return (\n    <Toolbar>\n      { breadcrumbs && <Breadcrumbs />}\n      { matches && <Fragment>\n        <SearchInput />\n        <SearchButton />\n        <FavoriteButton />\n        { false && <CompareButton />}\n        <CartButton cart_results={cart_results} />\n        { isAuthenticated ? <LogoutButton logout={logout} user={user} /> : <LoginButton loginWithRedirect={loginWithRedirect} />}\n      </Fragment>}\n    </Toolbar>\n  )\n}\n\nconst Nothing = props => (\n  <Grid container alignContent=\"center\" alignItems=\"center\" direction=\"column\">\n    <Grid item xs={12}>\n      {props.spinner ? <CircularProgress /> : <Typography variant=\"body1\" color=\"inherit\"><img style={{ height: 300 }} alt=\"\" src={EmptyImg} /></Typography>}\n    </Grid>\n  </Grid>\n)\n\nconst Controls = props => {\n  const { current_stores } = props;\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <StoreDropdown stores={current_stores} />\n      </Grid>\n      <Grid item xs={12}>\n        <StockDropdown />\n      </Grid>\n    </Grid>\n  );\n}\n\nconst Main = props => {\n  const { child_data, page_size, paging, page, page_name, history, pre_component, store_filtered, component, page_data, spinner } = props;\n\n  return (\n    <Grid container spacing={2}>\n      {child_data.length > page_size && paging && <Grid item xs={12}>\n        <Pagination variant=\"outlined\" shape=\"rounded\" count={pages(child_data, page_size)} page={page} onChange={changePage(page_name, history)} />\n      </Grid>}\n      {pre_component !== undefined && pre_component}\n      {store_filtered.length > 0 ? component(page_data) : <Nothing spinner={spinner} />}\n      {child_data.length > page_size && paging && <Grid item xs={12}>\n        <Pagination variant=\"outlined\" shape=\"rounded\" count={pages(child_data, page_size)} page={page} onChange={changePage(page_name, history)} />\n      </Grid>}\n    </Grid>\n  );\n}\n\nexport default props => {\n  const classes = useStyles();\n  const matches = useMediaQuery(theme => theme.breakpoints.up('md'));\n  const { stores, cart_results, spinner, date } = useSelector(state => state.pricesReducer)\n  const { store_filtered, stock_filtered, child_data, page_name, component, pre_component, paging=true } = props;\n  const store_ids = [...new Set(stock_filtered.map(d => d.store_id))]\n  const current_stores = stores.filter(d => store_ids.includes(d.id));\n  const page_size = props.page_size || 12;\n  const history = useHistory();\n  const { page } = useParams();\n  const page_data = paginate(child_data, page_size, page, paging);\n  const { loginWithRedirect, logout, isAuthenticated, user } = useLogin();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [page]);\n\n  return (\n    <Grid container className={classes.root} alignContent=\"center\" alignItems=\"center\">\n      <AppBar position=\"static\" className={classes.appbar}>\n        <Bar user={user} breadcrumbs={true} matches={matches} isAuthenticated={isAuthenticated} cart_results={cart_results} loginWithRedirect={loginWithRedirect} logout={logout} />\n      </AppBar>\n\n      <Container maxWidth=\"xl\">\n        <Grid container spacing={4} component={MainPaper}>\n          <Grid item md={2} xs={12} component=\"div\">\n            <Controls current_stores={current_stores} />\n          </Grid>\n\n          <Grid item md={10} xs={12} component=\"div\">\n            <Main\n              child_data={child_data}\n              page_size={page_size}\n              paging={paging}\n              page={page}\n              page_name={page_name}\n              history={history}\n              pre_component={pre_component}\n              store_filtered={store_filtered}\n              spinner={spinner}\n              page_data={page_data}\n              component={component}\n            />\n          </Grid>\n        </Grid>\n      </Container>\n\n      {!matches && <AppBar position=\"fixed\" className={classes.bottomBar}>\n        <Bar user={user} breadcrumbs={false} matches={!matches} isAuthenticated={isAuthenticated} cart_results={cart_results} loginWithRedirect={loginWithRedirect} logout={logout} />\n      </AppBar>}\n\n      <Grid item xs={12}>\n        <Toolbar>\n          <Typography variant=\"body1\" color=\"inherit\">\n            © 2022 Dimitris Raviolos - {packagejs.version} - Last update: {new Date(date).toLocaleDateString('el-GR')}\n          </Typography>\n        </Toolbar>\n      </Grid>\n    </Grid>\n  )\n}\n","import { useSelector } from \"react-redux\";\n\nexport const storeFilter = store => d => d.store_id === store || store === -1\nexport const stockFilter = stock => d => d.stock === stock || stock === -1\n\nexport const useStep = f => {\n  const { store, stock, prices } = useSelector(state => state.pricesReducer)\n  const page_filtered = f !== undefined ? f(prices) : prices\n  const stock_filtered = page_filtered.filter(stockFilter(stock))\n  const store_filtered = stock_filtered.filter(storeFilter(store))\n\n  return {\n    page_filtered,\n    stock_filtered,\n    store_filtered,\n  }\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport BoardgameCard from '../components/BoardgameCard';\nimport GenericPage from './GenericPage';\nimport { useStep } from '../hooks/useStep';\n\nexport const pricesToGroups = data => {\n  const rs = [];\n\n  data.map(d => {\n    if (rs[d.rank-1] === undefined) {\n      rs[d.rank-1] = {\n        ...d,\n        items: []\n      }\n    }\n\n    rs[d.rank-1].items.push(d)\n    return d\n  })\n\n  return rs.filter(d => d.items.length > 0)\n}\n\nexport default () => {\n  const { store_filtered, stock_filtered } = useStep();\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={true}\n      page_name=\"/\"\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <BoardgameCard {...tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport { useDispatch } from \"react-redux\";\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport { Link } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { Typography } from '@material-ui/core';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport classNames from 'classnames';\nimport {\n  FacebookShareButton,\n  FacebookIcon,\n  FacebookMessengerShareButton,\n  FacebookMessengerIcon,\n  ViberShareButton,\n  ViberIcon,\n  WhatsappShareButton,\n  WhatsappIcon,\n  TwitterShareButton,\n  TwitterIcon,\n} from \"react-share\";\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    height: 0,\n    paddingTop: '75%', // 16:9\n  },\n  card_header: {\n    minHeight: 110,\n  },\n  out_of_stock: {\n    opacity: 0.5,\n  }\n}));\n\nconst addUTM = url => {\n  let rs;\n  if(url[url.length-1] === \"/\") {\n    rs = url.slice(0, -1)\n  } else {\n    rs = url\n  }\n\n  rs += \"?utm_source=dictummortuum\"\n  rs += \"&utm_medium=dictummortuum\"\n  rs += \"&utm_campaign=dictummortuum\"\n  return rs\n}\n\nconst Media = props => {\n  const { store_thumb, url, thumb, boardgame_id, stock } = props.boardgame;\n  const { self_ref } = props;\n  const classes = useStyles();\n\n  if(self_ref) {\n    return (\n      <Link to={\"/item/\" + boardgame_id + \"?stock=\" + stock}>\n        <CardMedia\n          className={classes.media}\n          image={store_thumb === \"\" ? thumb : store_thumb}\n        />\n      </Link>\n    )\n  } else {\n    return (\n      <a href={addUTM(url)} target=\"_blank\" rel=\"noopener noreferrer\">\n        <CardMedia\n          className={classes.media}\n          image={store_thumb === \"\" ? thumb : store_thumb}\n        />\n      </a>\n    )\n  }\n}\n\nexport default props => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { stores } = useSelector(state => state.pricesReducer);\n  const { url, name, store_id, price, stock } = props.boardgame;\n  const self = window.location.href;\n\n  return (\n    <Card className={classNames({[classes.out_of_stock]: stock === 2})}>\n      { url && <Media {...props} />}\n      <CardActions>\n        <IconButton component=\"div\">\n          <FacebookShareButton style={{ height: 24 }} url={self}>\n            <FacebookIcon size={24} round />\n          </FacebookShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <FacebookMessengerShareButton style={{ height: 24 }} url={self}>\n            <FacebookMessengerIcon size={24} round />\n          </FacebookMessengerShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <ViberShareButton style={{ height: 24 }} url={self}>\n            <ViberIcon size={24} round />\n          </ViberShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <WhatsappShareButton style={{ height: 24 }} url={self}>\n            <WhatsappIcon size={24} round />\n          </WhatsappShareButton>\n        </IconButton>\n\n        <IconButton component=\"div\">\n          <TwitterShareButton style={{ height: 24 }} url={self}>\n            <TwitterIcon size={24} round />\n          </TwitterShareButton>\n        </IconButton>\n      </CardActions>\n      <CardContent className={classes.card_header}>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          {stores.filter(d => d.id === store_id).map(d => d.name)}\n        </Typography>\n        <Typography variant=\"subtitle1\">\n          {name}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <IconButton onClick={() => dispatch({\n          type: \"ADD_TO_CART\",\n          cart: props.boardgame,\n        })}>\n          <AddShoppingCartIcon />\n        </IconButton>\n        <div style={{ marginLeft: 'auto', marginRight: 10}}>\n          {\"€ \" + price}\n        </div>\n      </CardActions>\n    </Card>\n  )\n}\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { useSelector } from \"react-redux\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport { stockFilter, storeFilter } from '../hooks/useStep';\nimport {\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  ResponsiveContainer,\n  ComposedChart,\n  Tooltip,\n  Area,\n} from 'recharts';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(4),\n  },\n  label: {\n    marginBottom: theme.spacing(1),\n  }\n}));\n\nconst maxMinAvg = (arr) => {\n  var max = arr[0].price;\n  var min = arr[0].price;\n  var sum = arr[0].price;\n\n  for (var i = 1; i < arr.length; i++) {\n    if (arr[i].price > max) {\n      max = arr[i].price;\n    }\n    if (arr[i].price < min) {\n      min = arr[i].price;\n    }\n    sum = sum + arr[i].price;\n  }\n\n  return {\n    max: parseFloat(max.toFixed(2)),\n    min: parseFloat(min.toFixed(2)),\n    avg: parseFloat((sum/arr.length).toFixed(2))\n  }\n}\n\nconst transform = data => {\n  const rs = {};\n\n  data.map(d => {\n    if(rs[d.cr_date] === undefined) {\n      rs[d.cr_date] = [];\n    }\n\n    rs[d.cr_date].push(d)\n\n    return d\n  })\n\n  const retval = [];\n\n  for(let k in rs) {\n    const date = new Date(k)\n    const { avg, min, max } = maxMinAvg(rs[k])\n\n    retval.push({\n      avg,\n      range: [min, max],\n      cr_date: date.valueOf(),\n    })\n  }\n\n  return retval\n}\n\nconst formatDate = d => {\n  const date = new Date(d)\n  return date.getDate() + \"/\" + (date.getMonth() + 1)\n}\n\nconst formatLabel = d => {\n  const date = new Date(d)\n  return date.getDate() + \"/\" + (date.getMonth() + 1) + \"/\" + date.getFullYear()\n}\n\nconst domain = col => {\n  if(col.length === 0) {\n    return []\n  } else {\n    return [col[0].cr_date - 43200000, col[col.length-1].cr_date + 43200000]\n  }\n}\n\nexport default props => {\n  const classes = useStyles();\n  const { history } = props;\n  const { store, stock } = useSelector(state => state.pricesReducer)\n  const p = history.filter(stockFilter(stock)).filter(storeFilter(store))\n  const processed = transform(p).sort((a, b) => a.cr_date > b.cr_date)\n\n  return (\n     <Paper className={classes.root}>\n      <Typography variant=\"body1\" color=\"inherit\" className={classes.label}>\n        Price history\n      </Typography>\n      <ResponsiveContainer width=\"100%\" height={200} >\n        <ComposedChart data={processed}>\n          <CartesianGrid strokeDasharray=\"5 5\" />\n          <XAxis dataKey=\"cr_date\" scale=\"time\" type=\"number\" domain={domain(processed)} tickFormatter={formatDate} />\n          <YAxis domain={['auto', 'auto']} type=\"number\" />\n          <Tooltip labelFormatter={formatLabel} />\n          <Area type=\"monotone\" dataKey=\"range\" fillOpacity={0.3} fill=\"#5e81ac\" />\n          <Line type=\"monotone\" dataKey=\"avg\" stroke=\"#bf616a\" strokeWidth={3} activeDot={{ r: 8 }} />\n        </ComposedChart>\n      </ResponsiveContainer>\n    </Paper>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nconst fetchPrices = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/prices.json').then(res => res.json())\n}\n\nconst fetchPrice = price_id => {\n  return fetch(base + '/rest/v1/prices/' + price_id + '.json').then(res => res.json())\n}\n\nexport const usePrices = boardgame_id => {\n  const [prices, setPrices] = useState([])\n\n  useEffect(() => {\n    fetchPrices(boardgame_id).then(data => setPrices(data))\n  }, [boardgame_id])\n\n  return prices\n}\n\nexport const usePrice = price_id => {\n  const [price, setPrice] = useState([])\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchPrice(price_id).then(data => {\n      if (isMounted) {\n        setPrice(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [price_id])\n\n  return price\n}\n","import { useState, useEffect } from 'react';\nimport { base } from \"../api/common\";\n\nexport const fetchPriceHistory = boardgame_id => {\n  return fetch(base + '/rest/v1/boardgames/' + boardgame_id + '/history.json').then(res => res.json())\n}\n\nexport const useHistory = boardgame_id => {\n  const [history, setHistory] = useState([])\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetchPriceHistory(boardgame_id).then(data => {\n      if (isMounted) {\n        setHistory(data)\n      }\n    })\n\n    return () => { isMounted = false };\n  }, [boardgame_id])\n\n  return history\n}\n","import { useLocation } from 'react-router-dom';\n\nexport const useId = () => {\n  const { pathname } = useLocation();\n  const id = parseInt(pathname.split(\"/\")[2]);\n  return id\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport PriceCard from '../components/PriceCard';\nimport GenericPage from './GenericPage';\nimport BoardgameHistoricPrice from '../components/BoardgameHistoricPrice';\nimport { usePrices } from '../hooks/usePrices';\nimport { useHistory } from '../hooks/useHistory';\nimport { useStep } from '../hooks/useStep';\nimport { useId } from '../hooks/useId';\n\nconst fn = id => col => col.filter(d => d.boardgame_id === id).sort((a, b) => a.price > b.price)\n\nexport default () => {\n  const id = useId();\n  const { stock_filtered, store_filtered } = useStep(fn(id));\n  const history = useHistory(id);\n  const prices = usePrices(id);\n  const price_ids = store_filtered.map(d => d.id);\n\n  return (\n    <GenericPage\n      child_data={prices.filter(d => price_ids.includes(d.id))}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={false}\n      pre_component={\n        <Grid item xs={12}>\n          <BoardgameHistoricPrice history={history} />\n        </Grid>\n      }\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <PriceCard boardgame={tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport PriceCard from '../components/PriceCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { useStep } from '../hooks/useStep';\n\nexport default () => {\n  const { cart_results } = useSelector(state => state.pricesReducer);\n  const { store_filtered, stock_filtered } = useStep(() => cart_results);\n\n  return (\n    <GenericPage\n      child_data={store_filtered}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/cart\"\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={4}>\n          <PriceCard boardgame={tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport GenericPage from './GenericPage';\nimport SearchInput from '../components/SearchInput';\nimport BoardgameCard from '../components/BoardgameCard';\nimport { useStep } from '../hooks/useStep';\nimport { useSelector } from \"react-redux\";\nimport fuse from 'fuse.js';\n\nconst searchFilter = col => {\n  const { search_term, search_enabled, search_results } = useSelector(state => state.pricesReducer)\n\n  if(search_term !== \"\" && search_enabled) {\n    const options = {\n      includeScore: true,\n      shouldSort: true,\n      ignoreLocation: true,\n      keys: ['name']\n    }\n\n    const f = new fuse(col, options)\n    const res = f.search(search_term).filter(d => d.score <= 0.6)\n    return res.map(d => d.item)\n  } else {\n    return search_results\n  }\n}\n\nexport const pricesToGroups = data => {\n  const rs = [];\n  const map = {};\n\n  data.map((d, i) => {\n    if (map[d.boardgame_id] !== undefined) {\n      i = map[d.boardgame_id];\n    }\n\n    if (rs[i] === undefined) {\n      rs[i] = {\n        ...d,\n        items: []\n      }\n      map[d.boardgame_id] = i\n    }\n\n    rs[i].items.push(d)\n    return d\n  })\n\n  return rs.filter(d => d.items.length > 0)\n}\n\nexport default () => {\n  const { store_filtered, stock_filtered } = useStep(searchFilter);\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      paging={true}\n      page_name=\"/search\"\n      pre_component={\n        <Grid item xs={12}>\n          <SearchInput />\n        </Grid>\n      }\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <BoardgameCard {...tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid } from '@material-ui/core';\nimport { useBoardgame } from '../hooks/useBoardgame';\nimport Paper from '@material-ui/core/Paper';\nimport classNames from 'classnames';\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    marginBottom: theme.spacing(1),\n  },\n  padding: {\n    paddingLeft: theme.spacing(1),\n  },\n  colored: {\n    backgroundColor: \"#81a1c1\",\n    color: \"white\",\n  }\n}));\n\nexport default props => {\n  const classes = useStyles();\n  const { id, boardgame_id, rank, items, alternate } = props;\n  const boardgame = useBoardgame(boardgame_id);\n  const { boardgame_name } = boardgame;\n  const available_prices = items.sort((a, b) => a.price > b.price)\n  const l = available_prices.length;\n\n  let lowest = undefined;\n  let highest = undefined;\n\n  if (l >= 1) {\n    lowest = available_prices[0]\n  }\n\n  if (l >= 2) {\n    if (lowest.price !== available_prices[l-1].price) {\n      highest = available_prices[l-1]\n    }\n  }\n\n  return (\n    <Link to={\"/item/\" + boardgame_id} style={{ textDecoration: \"none\"}}>\n      <Paper className={classNames(classes.margin, {[classes.colored]: alternate === 0})}>\n        <Grid container spacing={2} key={id}>\n          <Grid item xs={8}>\n            <Typography variant=\"subtitle1\" className={classes.padding}>\n\n                {boardgame_name}\n\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"subtitle1\">\n              BGG Rank {rank}\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"subtitle1\">\n            {lowest && \"€\" + lowest.price} {highest && \"- €\" + highest.price}\n            </Typography>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Link>\n  )\n}\n","import { useState, useEffect } from 'react';\nimport { bgg_xmlapi, forceError, logError, transformBggData } from \"../api/common\";\nimport XMLParser from 'react-xml-parser';\nimport pRetry from 'p-retry';\n\nconst req = list_id => fetch(`${bgg_xmlapi}/geeklist/${list_id}`)\n  .then(forceError)\n  .then(res => res.text())\n  .then(data => {\n    const xml = new XMLParser().parseFromString(data);\n    return transformBggData(xml)\n  })\n\nconst fetchGeeklist = (list_id, retries) => pRetry(async () => req(list_id), { onFailedAttempt: logError, retries })\n\nexport const useGeeklist = geeklist_id => {\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    fetchGeeklist(geeklist_id, 2).then(rs => {\n      setItems(rs)\n    })\n  }, [geeklist_id])\n\n  return items\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport GeeklistCard from '../components/GeeklistCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { pricesToGroups } from './LandingPage';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useGeeklist } from '../hooks/useGeeklist';\nimport { useStep } from '../hooks/useStep';\nimport { useId } from '../hooks/useId';\n\nconst Spinner = () => (\n  <Grid container alignContent=\"center\" alignItems=\"center\" direction=\"column\">\n    <Grid item xs={12}>\n      <CircularProgress />\n    </Grid>\n  </Grid>\n)\n\nexport default () => {\n  const geeklist_id = useId();\n  const geeklist = useGeeklist(geeklist_id);\n  const { spinner } = useSelector(state => state.pricesReducer);\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => geeklist.includes(d.boardgame_id)));\n  const grouped = pricesToGroups(store_filtered);\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_size={500}\n      page_name={\"/geeklist/\" + geeklist_id}\n      component={data => spinner ? <Spinner /> : data.map((tile, i) => (\n        <Grid key={tile.id} item xs={12}>\n          <GeeklistCard {...tile} alternate={i%2} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import { useEffect } from 'react';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useLocation } from 'react-router-dom';\nimport { bgg_xmlapi2, forceError, logError, transformBggData } from \"../api/common\";\nimport XMLParser from 'react-xml-parser';\nimport pRetry from 'p-retry';\n\nconst req = name => fetch(`${bgg_xmlapi2}/collection?username=${encodeURIComponent(name)}&wishlist=1`)\n  .then(forceError)\n  .then(res => res.text())\n  .then(data => {\n    const xml = new XMLParser().parseFromString(data);\n    return transformBggData(xml)\n  })\n\nexport const fetchWishList = (name, retries) => pRetry(async () => req(name), { onFailedAttempt: logError, retries })\n\nexport const useWishlist = () => {\n  const { wishlist } = useSelector(state => state.pricesReducer)\n  const { pathname } = useLocation();\n  const username = pathname.split(\"/\")[2]\n  const dispatch = useDispatch();\n\n  useEffect(async () => {\n    if (username !== undefined) {\n      dispatch({\n        type: \"SET_WISHLIST_USERNAME\",\n        payload: username,\n      })\n\n      let rs;\n      try {\n        rs = await fetchWishList(username, 2)\n      } catch(e) {\n        rs = [];\n      }\n\n      dispatch({\n        type: \"SET_WISHLIST\",\n        payload: rs\n      })\n\n    }\n  }, [username])\n\n  return wishlist\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport { fetchWishList } from '../hooks/useWishlist';\n\nconst Component = props => {\n  const [isSending, setIsSending] = useState(false)\n  const isMounted = useRef(true)\n  const dispatch = useDispatch();\n  const { wishlist_term } = useSelector(state => state.pricesReducer)\n\n  // set isMounted to false when we unmount the component\n  useEffect(() => {\n    return () => {\n      isMounted.current = false\n    }\n  }, [])\n\n  const sendRequest = useCallback(async term => {\n    // don't send again while we are sending\n    if (isSending) return\n    // update state\n    setIsSending(true)\n\n    dispatch({\n      type: \"TOGGLE_SPINNER\"\n    })\n\n    // send the actual request\n    let rs;\n    try {\n      rs = await fetchWishList(term, 2)\n    } catch(e) {\n      rs = [];\n    }\n\n    dispatch({\n      type: \"SET_WISHLIST\",\n      payload: rs\n    })\n\n    dispatch({\n      type: \"TOGGLE_SPINNER\"\n    })\n\n    // once the request is sent, update state again\n    if (isMounted.current) // only update if we are still mounted\n      setIsSending(false)\n  }, [dispatch]) // update the callback if the state changes\n\n  return (\n    <InputAdornment position=\"end\">\n      <IconButton type=\"submit\" disabled={isSending} onClick={e => { e.preventDefault(); sendRequest(wishlist_term) }} aria-label=\"search\">\n        <SearchIcon />\n      </IconButton>\n    </InputAdornment>\n  )\n}\n\nexport default Component;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport InputBase from '@material-ui/core/InputBase';\nimport Paper from '@material-ui/core/Paper';\nimport BggFetch from './BggFetch';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  input: {\n    margin: theme.spacing(1),\n  },\n}));\n\nconst onChange = dispatch => event => dispatch({\n  type: \"SET_WISHLIST_USERNAME\",\n  payload: event.target.value,\n})\n\nconst Component = props => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  return (\n    <Paper component=\"form\">\n      <InputBase\n        className={classes.input}\n        variant=\"outlined\"\n        fullWidth\n        onChange={onChange(dispatch)}\n        endAdornment={<BggFetch />}\n        placeholder=\"boardgamegeek username\"\n      />\n    </Paper>\n  )\n}\n\nexport default Component;\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport BoardgameCard from '../components/BoardgameCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { pricesToGroups } from './LandingPage';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport BggInput from '../components/BggInput';\nimport { useWishlist } from '../hooks/useWishlist';\nimport { useStep } from '../hooks/useStep';\n\nconst Spinner = () => (\n  <Grid container alignContent=\"center\" alignItems=\"center\" direction=\"column\">\n    <Grid item xs={12}>\n      <CircularProgress />\n    </Grid>\n  </Grid>\n)\n\nexport default () => {\n  const wishlist = useWishlist();\n  const { spinner } = useSelector(state => state.pricesReducer)\n  const { stock_filtered, store_filtered } = useStep(col => col.filter(d => wishlist.includes(d.boardgame_id)))\n  const grouped = pricesToGroups(store_filtered)\n\n  return (\n    <GenericPage\n      child_data={grouped}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/wishlist\"\n      pre_component={\n        <Grid item xs={12}>\n          <BggInput />\n        </Grid>\n      }\n      component={data => spinner ? <Spinner /> : data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={3}>\n          <BoardgameCard {...tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport PriceCard from '../components/PriceCard';\nimport GenericPage from './GenericPage';\nimport { useSelector } from \"react-redux\";\nimport { useStep } from '../hooks/useStep';\n\nexport default () => {\n  const { cart_results } = useSelector(state => state.pricesReducer);\n  const { store_filtered, stock_filtered } = useStep(() => cart_results);\n\n  return (\n    <GenericPage\n      child_data={store_filtered}\n      stock_filtered={stock_filtered}\n      store_filtered={store_filtered}\n      page_name=\"/compare\"\n      component={data => data.map((tile) => (\n        <Grid key={tile.id} item xs={12} md={6} lg={4}>\n          <PriceCard boardgame={tile} />\n        </Grid>\n      ))}\n    />\n  )\n}\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport * as fflate from 'fflate';\nimport { base } from \"./common\";\n\nexport const fetchAllPrices = createAsyncThunk('prices', async () => {\n  const compressed = new Uint8Array(\n    await fetch(base + '/rest/v1/prices.json.gz').then(res => res.arrayBuffer())\n  );\n\n  const decompressed = fflate.decompressSync(compressed);\n  const origText = fflate.strFromU8(decompressed);\n  return JSON.parse(origText);\n})\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { base } from \"./common\";\n\nexport const fetchStores = createAsyncThunk('stores', async () => {\n  return await fetch(base + '/rest/v1/stores.json').then(res => res.json())\n})\n","import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { base } from \"./common\";\n\nexport const fetchDate = createAsyncThunk('date', async () => {\n  return await fetch(base + '/rest/v1/date.json').then(res => res.json())\n})\n","import React, { useEffect } from 'react'\nimport { useDispatch } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport LandingPage from './pages/LandingPage';\nimport BoardgamePage from './pages/BoardgamePage';\nimport CartPage from './pages/CartPage';\nimport SearchPage from './pages/SearchPage';\nimport GeeklistPage from './pages/GeeklistPage';\nimport WishlistPage from './pages/WishlistPage';\nimport ComparePage from './pages/ComparePage';\nimport { fetchAllPrices } from './api/prices';\nimport { fetchStores } from './api/stores';\nimport { fetchDate } from './api/date';\n\nexport default () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchAllPrices())\n    dispatch(fetchStores())\n    dispatch(fetchDate())\n  }, []);\n\n  return (\n    <Switch >\n      <Route path={`/`} exact>\n        <LandingPage />\n      </Route>\n      <Route path={`/cart`} exact>\n        <CartPage />\n      </Route>\n      <Route path={`/search`} exact>\n        <SearchPage />\n      </Route>\n      <Route path={`/wishlist`} exact>\n        <WishlistPage />\n      </Route>\n      <Route path={`/wishlist/:username`}>\n        <WishlistPage />\n      </Route>\n      <Route path={`/geeklist/:geeklist_id`}>\n        <GeeklistPage />\n      </Route>\n      <Route path={`/item/:boardgame_id`}>\n        <BoardgamePage />\n      </Route>\n      <Route path={`/compare`}>\n        <ComparePage />\n      </Route>\n    </Switch>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport { reducer as pricesReducer } from './reducers/prices';\nimport App from './App';\nimport thunkMiddleware from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { Auth0Provider } from \"@auth0/auth0-react\";\n\nconst rootReducer = combineReducers({\n  pricesReducer,\n})\n\nconst composedEnhancer = composeWithDevTools(applyMiddleware(thunkMiddleware))\n\nconst store = createStore(rootReducer, composedEnhancer)\n\nstore.dispatch({\n  type: \"INIT\"\n});\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#5e81ac\",\n    },\n    secondary: {\n      main: \"#bf616a\",\n    },\n    text: {\n      primary: \"#2e3440\",\n    }\n  },\n});\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <HashRouter>\n      <Provider store={store}>\n        <Route path=\"/\">\n          <Auth0Provider domain=\"dev-11hy0hqn.us.auth0.com\" clientId=\"gEd77V5i5uBswawxfycFKL1eEv8BlhdE\" redirectUri={window.location.origin}>\n            <App />\n          </Auth0Provider>\n        </Route>\n      </Provider>\n    </HashRouter>\n  </ThemeProvider>\n, document.getElementById('root'));\n","export const reducer = (state = {}, action) => {\n  switch (action.type) {\n    case \"INIT\":\n      return {\n        store: -1,\n        stock: 0,\n        stocks: [\"In stock\", \"Preorder\", \"Out of stock\"],\n        cart_results: [],\n        search_term: \"\",\n        search_results: [],\n        search_enabled: false,\n        wishlist_term: \"\",\n        wishlist: [],\n        prices: [],\n        history: [],\n        stores: [],\n        spinner: true,\n        date: new Date(),\n        user: {\n          isAuthenticated: false,\n          details: {},\n          saved: true,\n        },\n      }\n    case \"prices/fulfilled\": {\n      return {\n        ...state,\n        spinner: false,\n        prices: action.payload,\n      }\n    }\n    case \"date/fulfilled\": {\n      return {\n        ...state,\n        date: new Date(action.payload.date),\n      }\n    }\n    case \"stores/fulfilled\":\n      return {\n        ...state,\n        stores: action.payload\n      }\n    case \"SET_STOCK\": {\n      return {\n        ...state,\n        stock: action.stock,\n      }\n    }\n    case \"SET_STORE\": {\n      return {\n        ...state,\n        store: action.store,\n      }\n    }\n    case \"ADD_TO_CART\":\n      return {\n        ...state,\n        cart_results: [...state.cart_results.filter(d => d.id !== action.cart.id), action.cart],\n      }\n    case \"SET_SEARCH_TERM\":\n      return {\n        ...state,\n        search_term: action.payload,\n        search_enabled: false,\n      }\n    case \"EXECUTE_SEARCH\":\n      return {\n        ...state,\n        search_enabled: true,\n      }\n    case \"SET_WISHLIST\":\n      return {\n        ...state,\n        wishlist: action.payload\n      }\n    case \"SET_WISHLIST_USERNAME\":\n      return {\n        ...state,\n        wishlist_term: action.payload\n      }\n    case \"TOGGLE_SPINNER\":\n      return {\n        ...state,\n        spinner: !state.spinner\n      }\n    case \"SET_USER\":\n      return {\n        ...state,\n        user: {\n          ...action.payload,\n          saved: true,\n        }\n      }\n    default:\n      return state;\n  }\n};\n"],"sourceRoot":""}