(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{232:function(e,t,a){e.exports=a.p+"static/media/cartoff.dd87c6d4.svg"},233:function(e){e.exports={name:"prices",version:"0.2.0",private:!0,homepage:"https://prices.dictummortuum.com",dependencies:{"@auth0/auth0-react":"^1.10.1","@babel/runtime":"7.0.0-beta.55","@material-ui/core":"4.12.3","@material-ui/data-grid":"^4.0.0-alpha.37","@material-ui/icons":"^4.11.2","@material-ui/lab":"^4.0.0-alpha.60","@reduxjs/toolkit":"^1.7.1","ansi-regex":"^5.0.1",braces:"^2.3.1",browserslist:"^4.16.5",chartist:"^0.10.1",classnames:"^2.2.6",fflate:"^0.7.3","fuse.js":"^6.5.3","glob-parent":"^5.1.2",immer:"^9.0.6","incremental-average":"^1.1.0","js-combinatorics":"^0.5.4","json-schema":"^0.4.0","material-ui-image":"^3.2.0",merge:"^2.1.1","node-notifier":"^8.0.1","nth-check":"^2.0.1","p-retry":"^5.1.0","prop-types":"^15.6.0",react:"^17.0.2","react-chartist":"^0.14.4","react-dev-utils":"^11.0.4","react-dom":"^17.0.2","react-icons":"^4.2.0","react-player":"^2.10.1","react-redux":"^7.2.4","react-router":"^5.2.0","react-router-dom":"^5.2.0","react-scripts":"^2.0.0","react-share":"^4.4.0","react-spinners":"^0.11.0","react-xml-parser":"^1.1.8",recharts:"^2.0.9",redux:"^4.1.0","redux-devtools-extension":"^2.13.9",reselect:"^4.0.0","serialize-javascript":"^3.1.0",sockjs:"^0.3.20",tar:"^4.4.18",tmpl:"^1.0.5","ts-trueskill":"^3.2.2","url-parse":"^1.5.2","yargs-parser":"^13.1.2"},scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test",eject:"react-scripts eject",predeploy:"yarn build",deploy:"gh-pages -d build",stats:"curl 'localhost:1234/rest/v1/play?_resource=stats' | jq  > ./src/standings/plays.json; curl 'localhost:1234/rest/v1/trueskill' > ./src/standings/ratings.json; curl 'localhost:1234/rest/v1/trueskill/overall' > ./src/standings/overall.json",prices:"curl 'localhost:1234/rest/v1/price?_resource=history'"},eslintConfig:{extends:"react-app"},browserslist:[">0.2%","not ie <= 11","not op_mini all"],devDependencies:{"@babel/helper-call-delegate":"^7.8.7","gh-pages":"^3.1.0"}}},276:function(e,t,a){e.exports=a(431)},281:function(e,t,a){},431:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(22),i=a.n(c),o=(a(281),a(29)),l=a(28),u=a(256),s=a(507),m=a(41),d=a(15),p=a(45),f=a(33),b=a(486),E=a(433),h=a(474),g=a(475),v=a(476),_=a(20),j=a(472),O=function(e){var t=e.srcs,a=Object(r.useState)(0),c=Object(_.a)(a,2),i=c[0],o=c[1],l=void 0===t[i]?"https://via.placeholder.com/250":t[i];return Object(r.useEffect)(function(){var e=new Image;e.onload=function(){e.complete&&e.naturalWidth<100&&e.naturalHeight<100&&o(i+1)},e.src=t[i]},[t]),n.a.createElement(j.a,{style:{paddingTop:"75%"},image:l})},k="https://raw.githubusercontent.com/DictumMortuum/json-api/master",y=function(e){if(202===e.status)throw new Error("impersonating an error, as we have to retry, since the request is queued on the backend now");return e},x=function(e){console.log("Attempt ".concat(e.attemptNumber," failed. There are ").concat(e.retriesLeft," retries left."))},w=function(e){var t=e.children.map(function(e){return e.attributes.objectid}).filter(function(e){return void 0!==e});return Object(p.a)(new Set(t)).map(function(e){return parseInt(e)})},S={boardgame_id:"",boardgame_name:"",images:[]},T=function(e){var t=Object(r.useState)(S),a=Object(_.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)(function(){var t=!0;return function(e){return fetch(k+"/rest/v1/boardgames/"+e+"/boardgame.json").then(function(e){return e.json()})}(e).then(function(e){t&&c(e)}),function(){t=!1}},[e]),n},R=Object(h.a)(function(e){return{card_header:{minHeight:120}}}),I=function(e){var t=e.id,a=e.boardgame_id,r=e.rank,c=e.items,i=R(),l=T(a),u=l.images,s=l.boardgame_name,m=c.sort(function(e,t){return e.price>t.price}),d=m.length,p=void 0,f=void 0;return d>=1&&(p=m[0]),d>=2&&p.price!==m[d-1].price&&(f=m[d-1]),n.a.createElement(g.a,{key:t},n.a.createElement(o.b,{to:"/item/"+a},n.a.createElement(O,{srcs:u})),n.a.createElement(v.a,{className:i.card_header},n.a.createElement(E.a,{variant:"subtitle1",color:"textSecondary"},"BGG Rank ",r),n.a.createElement(E.a,{variant:"subtitle1",color:"textSecondary"},p&&"\u20ac"+p.price," ",f&&"- \u20ac"+f.price),n.a.createElement(E.a,{variant:"subtitle1"},s)))},N=a(489),C=a(485),D=a(481),A=a(508),L=a(514),F=a(477),W=a(516),H=a(260),G=a(258),B=function(){var e=Object(l.g)(),t=e.search,a=Object(G.a)(e,["search"]),r=new URLSearchParams(t),n=parseInt(r.get("page"))||1,c=r.get("stock")||0;return Object(f.a)({},a,{page:n,stock:c,has_stock:r.has("stock")})},M=function(e,t){return function(a,r){1===r?t.push(e):t.push(e+"?page="+r)}},z=function(e,t){return Math.ceil(e.length/t)},U=function(){var e=Object(d.c)(function(e){return e.pricesReducer}),t=e.stock,a=e.stocks,c=B(),i=c.stock,o=c.has_stock,l=Object(d.b)();return Object(r.useEffect)(function(){o&&l({type:"SET_STOCK",stock:parseInt(i)})},[i]),n.a.createElement(H.a,null,n.a.createElement(F.a,{variant:"outlined",fullWidth:!0},n.a.createElement(L.a,{id:"stock-select-label"},"Stock"),n.a.createElement(A.a,{labelId:"stock-select-label",id:"stock-select",value:t,onChange:function(e){l({type:"SET_STOCK",stock:e.target.value})}},a.map(function(e,t){return n.a.createElement(W.a,{key:e,value:t},e)}),n.a.createElement(W.a,{key:-1,value:-1},"Show all"))))},P=function(e){var t=e.stores,a=Object(d.c)(function(e){return e.pricesReducer}).store,r=Object(d.b)();return n.a.createElement(H.a,null,n.a.createElement(F.a,{variant:"outlined",fullWidth:!0},n.a.createElement(L.a,{id:"store-select-label"},"Store"),n.a.createElement(A.a,{labelId:"store-select-label",id:"store-select",value:a,onChange:function(e){r({type:"SET_STORE",store:e.target.value})}},n.a.createElement(W.a,{key:-1,value:-1},"None"),t.map(function(e){return n.a.createElement(W.a,{key:e.id,value:e.id},e.name)}))))},K=a(513),q=Object(h.a)(function(e){return{root:{color:"#d8dee9",flexGrow:1},color:{color:"#d8dee9",textDecoration:"none"}}}),J=function(){var e=q(),t=Object(l.g)().pathname.split("/").slice(2).filter(function(e){return"item"!==e}).filter(function(e){return""!==e});return n.a.createElement(K.a,{className:e.root,separator:"/","aria-label":"breadcrumb"},n.a.createElement(o.b,{className:e.color,to:"/"},n.a.createElement(E.a,{variant:"h5"},"Prices")),t.map(function(t){return n.a.createElement(o.b,{key:t,className:e.color,to:"/item/"+t},n.a.createElement(E.a,{variant:"h5"},t))}))},X=a(488),V=a(232),Y=a.n(V),Q=a(43),Z=a(515),$=a(21),ee=a.n($),te=a(31),ae=a(479),re=a(147),ne=a.n(re),ce=a(478),ie=function(){var e=Object(d.b)(),t=Object(d.c)(function(e){return e.pricesReducer}).search_term,a=Object(r.useState)(!1),c=Object(_.a)(a,2),i=c[0],o=c[1],u=Object(l.f)(),s=Object(r.useRef)(!0);Object(r.useEffect)(function(){return function(){s.current=!1}},[]);var m=Object(r.useCallback)(Object(te.a)(ee.a.mark(function t(){return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return");case 2:o(!0),e({type:"EXECUTE_SEARCH"}),u.push("/search"),s.current&&o(!1);case 6:case"end":return t.stop()}},t)})),[t,e]);return n.a.createElement(ce.a,{position:"end"},n.a.createElement(ae.a,{type:"submit",disabled:i,onClick:m,"aria-label":"search"},n.a.createElement(ne.a,null)))},oe=Object(h.a)(function(e){return{input:{margin:e.spacing(1)},root:Object(Q.a)({margin:e.spacing(1)},e.breakpoints.up("md"),{marginRight:e.spacing(3)})}}),le=function(e){return function(t){return e({type:"SET_SEARCH_TERM",payload:t.target.value})}},ue=function(e){var t=Object(d.b)(),a=oe();return n.a.createElement(H.a,{component:"form",onSubmit:function(e){e.preventDefault()}},n.a.createElement(Z.a,{placeholder:" Search...",className:a.input,fullWidth:!0,inputProps:{"aria-label":"search"},onChange:le(t),endAdornment:n.a.createElement(ie,null)}))},se=a(487),me=a(490),de=a(233),pe=a(509),fe=a(480),be=a(517),Ee=a(113),he=a(482),ge=a(483),ve=a(484),_e=Object(h.a)(function(e){return{root:{background:"#d8dee9",fontFamily:"sans"},appbar:{marginBottom:5},bottomBar:{top:"auto",bottom:0},content:{minHeight:"90vh",padding:10},margin:{color:"white"},pagination:{padding:e.spacing(1)}}}),je=function(){var e=Object(Ee.b)().loginWithRedirect;return n.a.createElement(fe.a,{onClick:function(){return e()},color:"inherit"},"Login")},Oe=function(){var e=Object(Ee.b)(),t=e.user,a=e.logout,r=t.picture,c=t.name;return n.a.createElement(ae.a,{onClick:function(){return a({returnTo:window.location.origin})}},n.a.createElement(be.a,{alt:c,src:r}))},ke=function(e){var t=e.cart_results;return n.a.createElement(ae.a,null,n.a.createElement(D.a,{badgeContent:t.length,color:"secondary",max:99999,style:{color:"white"},component:o.b,to:"/cart"},n.a.createElement(he.a,null)))},ye=function(){return n.a.createElement(ae.a,{style:{color:"white"},component:o.b,to:"/wishlist"},n.a.createElement(ge.a,null))},xe=function(){return n.a.createElement(ae.a,{style:{color:"white"},component:o.b,to:"/search"},n.a.createElement(ve.a,null))},we=function(e){var t=e.matches,a=e.breadcrumbs,c=e.isAuthenticated,i=e.cart_results;return n.a.createElement(C.a,null,a&&n.a.createElement(J,null),t&&n.a.createElement(r.Fragment,null,n.a.createElement(ue,null),n.a.createElement(xe,null),n.a.createElement(ye,null),n.a.createElement(ke,{cart_results:i}),c?n.a.createElement(Oe,null):n.a.createElement(je,null)))},Se=function(e){return n.a.createElement(b.a,{container:!0,alignContent:"center",alignItems:"center",direction:"column"},n.a.createElement(b.a,{item:!0,xs:12},e.spinner?n.a.createElement(se.a,null):n.a.createElement(E.a,{variant:"body1",color:"inherit"},n.a.createElement("img",{style:{height:300},alt:"",src:Y.a}))))},Te=function(e){var t=_e(),a=Object(X.a)(function(e){return e.breakpoints.up("md")}),c=Object(d.c)(function(e){return e.pricesReducer}),i=c.stores,o=c.cart_results,u=c.spinner,s=c.date,m=e.store_filtered,f=e.stock_filtered,h=e.child_data,g=e.page_name,v=e.component,_=e.pre_component,j=e.paging,O=void 0===j||j,k=Object(p.a)(new Set(f.map(function(e){return e.store_id}))),y=i.filter(function(e){return k.includes(e.id)}),x=e.page_size||12,w=Object(l.f)(),S=B().page,T=function(e,t,a,r){return!0===r?e.slice((a-1)*t,a*t):e}(h,x,S,O),R=Object(Ee.b)().isAuthenticated;return Object(r.useEffect)(function(){window.scrollTo(0,0)},[S]),n.a.createElement(b.a,{container:!0,className:t.root,alignContent:"center",alignItems:"center"},n.a.createElement(N.a,{position:"static",className:t.appbar},n.a.createElement(we,{breadcrumbs:!0,matches:a,isAuthenticated:R,cart_results:o})),n.a.createElement(me.a,{maxWidth:"lg"},n.a.createElement(b.a,{item:!0,xs:12,className:t.content},n.a.createElement(b.a,{container:!0,spacing:2,alignContent:"center",alignItems:"center"},n.a.createElement(b.a,{item:!0,xs:6},n.a.createElement(P,{stores:y})),n.a.createElement(b.a,{item:!0,xs:6},n.a.createElement(U,null)),n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(b.a,{container:!0,spacing:2},h.length>x&&O&&n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(H.a,{className:t.pagination},n.a.createElement(pe.a,{variant:"outlined",shape:"rounded",count:z(h,x),page:S,onChange:M(g,w)}))),void 0!==_&&_,m.length>0?v(T):n.a.createElement(Se,{spinner:u}),h.length>x&&O&&n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(H.a,{className:t.pagination},n.a.createElement(pe.a,{variant:"outlined",shape:"rounded",count:z(h,x),page:S,onChange:M(g,w)})))))))),!a&&n.a.createElement(N.a,{position:"fixed",className:t.bottomBar},n.a.createElement(we,{breadcrumbs:!1,matches:!a,isAuthenticated:R,cart_results:o})),n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(C.a,null,n.a.createElement(E.a,{variant:"body1",color:"inherit"},"\xa9 2022 Dimitris Raviolos - ",de.version," - Last update: ",new Date(s).toLocaleDateString("el-GR")))))},Re=function(e){return function(t){return t.store_id===e||-1===e}},Ie=function(e){return function(t){return t.stock===e||-1===e}},Ne=function(e){var t=Object(d.c)(function(e){return e.pricesReducer}),a=t.store,r=t.stock,n=t.prices,c=void 0!==e?e(n):n,i=c.filter(Ie(r)),o=i.filter(Re(a));return{page_filtered:c,stock_filtered:i,store_filtered:o}},Ce=function(e){var t=[];return e.map(function(e){return void 0===t[e.rank-1]&&(t[e.rank-1]=Object(f.a)({},e,{items:[]})),t[e.rank-1].items.push(e),e}),t.filter(function(e){return e.items.length>0})},De=function(){var e=Ne(),t=e.store_filtered,a=e.stock_filtered,r=Ce(t);return n.a.createElement(Te,{child_data:r,stock_filtered:a,store_filtered:t,paging:!0,page_name:"/",component:function(e){return e.map(function(e){return n.a.createElement(b.a,{key:e.id,item:!0,xs:12,md:6,lg:3},n.a.createElement(I,e))})}})},Ae=a(234),Le=a.n(Ae),Fe=a(491),We=a(11),He=a.n(We),Ge=a(492),Be=a(493),Me=a(494),ze=a(495),Ue=a(496),Pe=a(497),Ke=a(498),qe=a(499),Je=a(500),Xe=a(501),Ve=Object(h.a)(function(e){return{media:{height:0,paddingTop:"75%"},card_header:{minHeight:110},out_of_stock:{opacity:.5}}}),Ye=function(e){var t;return t="/"===e[e.length-1]?e.slice(0,-1):e,t+="?utm_source=dictummortuum",t+="&utm_medium=dictummortuum",t+="&utm_campaign=dictummortuum"},Qe=function(e){var t=e.boardgame,a=t.store_thumb,r=t.url,c=t.thumb,i=t.boardgame_id,l=t.stock,u=e.self_ref,s=Ve();return u?n.a.createElement(o.b,{to:"/item/"+i+"?stock="+l},n.a.createElement(j.a,{className:s.media,image:""===a?c:a})):n.a.createElement("a",{href:Ye(r),target:"_blank",rel:"noopener noreferrer"},n.a.createElement(j.a,{className:s.media,image:""===a?c:a}))},Ze=function(e){var t=Ve(),a=Object(d.b)(),r=Object(d.c)(function(e){return e.pricesReducer}).stores,c=e.boardgame,i=c.url,o=c.name,l=c.store_id,u=c.price,s=c.stock,m=window.location.href;return n.a.createElement(g.a,{className:He()(Object(Q.a)({},t.out_of_stock,2===s))},i&&n.a.createElement(Qe,e),n.a.createElement(Fe.a,null,n.a.createElement(ae.a,{component:"div"},n.a.createElement(Ge.a,{style:{height:24},url:m},n.a.createElement(Be.a,{size:24,round:!0}))),n.a.createElement(ae.a,{component:"div"},n.a.createElement(Me.a,{style:{height:24},url:m},n.a.createElement(ze.a,{size:24,round:!0}))),n.a.createElement(ae.a,{component:"div"},n.a.createElement(Ue.a,{style:{height:24},url:m},n.a.createElement(Pe.a,{size:24,round:!0}))),n.a.createElement(ae.a,{component:"div"},n.a.createElement(Ke.a,{style:{height:24},url:m},n.a.createElement(qe.a,{size:24,round:!0}))),n.a.createElement(ae.a,{component:"div"},n.a.createElement(Je.a,{style:{height:24},url:m},n.a.createElement(Xe.a,{size:24,round:!0})))),n.a.createElement(v.a,{className:t.card_header},n.a.createElement(E.a,{variant:"subtitle1",color:"textSecondary"},r.filter(function(e){return e.id===l}).map(function(e){return e.name})),n.a.createElement(E.a,{variant:"subtitle1"},o)),n.a.createElement(Fe.a,null,n.a.createElement(ae.a,{onClick:function(){return a({type:"ADD_TO_CART",cart:e.boardgame})}},n.a.createElement(Le.a,null)),n.a.createElement("div",{style:{marginLeft:"auto",marginRight:10}},"\u20ac "+u)))},$e=a(502),et=a(511),tt=a(506),at=a(251),rt=a(252),nt=a(129),ct=a(250),it=a(248),ot=Object(h.a)(function(e){return{root:{padding:e.spacing(4)},label:{marginBottom:e.spacing(1)}}}),lt=function(e){for(var t=e[0].price,a=e[0].price,r=e[0].price,n=1;n<e.length;n++)e[n].price>t&&(t=e[n].price),e[n].price<a&&(a=e[n].price),r+=e[n].price;return{max:parseFloat(t.toFixed(2)),min:parseFloat(a.toFixed(2)),avg:parseFloat((r/e.length).toFixed(2))}},ut=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)},st=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},mt=function(e){var t,a=ot(),r=e.history,c=Object(d.c)(function(e){return e.pricesReducer}),i=c.store,o=c.stock,l=function(e){var t={};e.map(function(e){return void 0===t[e.cr_date]&&(t[e.cr_date]=[]),t[e.cr_date].push(e),e});var a=[];for(var r in t){var n=new Date(r),c=lt(t[r]),i=c.avg,o=c.min,l=c.max;a.push({avg:i,range:[o,l],cr_date:n.valueOf()})}return a}(r.filter(Ie(o)).filter(Re(i))).sort(function(e,t){return e.cr_date>t.cr_date});return n.a.createElement(H.a,{className:a.root},n.a.createElement(E.a,{variant:"body1",color:"inherit",className:a.label},"Price history"),n.a.createElement($e.a,{width:"100%",height:200},n.a.createElement(et.a,{data:l},n.a.createElement(tt.a,{strokeDasharray:"5 5"}),n.a.createElement(at.a,{dataKey:"cr_date",scale:"time",type:"number",domain:(t=l,0===t.length?[]:[t[0].cr_date-432e5,t[t.length-1].cr_date+432e5]),tickFormatter:ut}),n.a.createElement(rt.a,{domain:["auto","auto"],type:"number"}),n.a.createElement(nt.a,{labelFormatter:st}),n.a.createElement(ct.a,{type:"monotone",dataKey:"range",fillOpacity:.3,fill:"#5e81ac"}),n.a.createElement(it.a,{type:"monotone",dataKey:"avg",stroke:"#bf616a",strokeWidth:3,activeDot:{r:8}}))))},dt=function(e){var t=Object(r.useState)([]),a=Object(_.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)(function(){(function(e){return fetch(k+"/rest/v1/boardgames/"+e+"/prices.json").then(function(e){return e.json()})})(e).then(function(e){return c(e)})},[e]),n},pt=function(e){var t=Object(r.useState)([]),a=Object(_.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)(function(){var t=!0;return function(e){return fetch(k+"/rest/v1/boardgames/"+e+"/history.json").then(function(e){return e.json()})}(e).then(function(e){t&&c(e)}),function(){t=!1}},[e]),n},ft=function(){var e=Object(l.g)().pathname;return parseInt(e.split("/")[2])},bt=function(){var e=ft(),t=Ne(function(e){return function(t){return t.filter(function(t){return t.boardgame_id===e}).sort(function(e,t){return e.price>t.price})}}(e)),a=t.stock_filtered,r=t.store_filtered,c=pt(e),i=dt(e),o=r.map(function(e){return e.id});return n.a.createElement(Te,{child_data:i.filter(function(e){return o.includes(e.id)}),stock_filtered:a,store_filtered:r,paging:!1,pre_component:n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(mt,{history:c})),component:function(e){return e.map(function(e){return n.a.createElement(b.a,{key:e.id,item:!0,xs:12,md:6,lg:3},n.a.createElement(Ze,{boardgame:e}))})}})},Et=function(){var e=Object(d.c)(function(e){return e.pricesReducer}).cart_results,t=Ne(function(){return e}),a=t.store_filtered,r=t.stock_filtered;return n.a.createElement(Te,{child_data:a,stock_filtered:r,store_filtered:a,page_name:"/cart",component:function(e){return e.map(function(e){return n.a.createElement(b.a,{key:e.id,item:!0,xs:12,md:6,lg:4},n.a.createElement(Ze,{boardgame:e}))})}})},ht=a(253),gt=function(e){var t=Object(d.c)(function(e){return e.pricesReducer}),a=t.search_term,r=t.search_enabled,n=t.search_results;if(""!==a&&r){return new ht.a(e,{includeScore:!0,shouldSort:!0,ignoreLocation:!0,keys:["name"]}).search(a).filter(function(e){return e.score<=.6}).map(function(e){return e.item})}return n},vt=function(){var e=Ne(gt),t=e.store_filtered,a=e.stock_filtered,r=function(e){var t=[],a={};return e.map(function(e,r){return void 0!==a[e.boardgame_id]&&(r=a[e.boardgame_id]),void 0===t[r]&&(t[r]=Object(f.a)({},e,{items:[]}),a[e.boardgame_id]=r),t[r].items.push(e),e}),t.filter(function(e){return e.items.length>0})}(t);return n.a.createElement(Te,{child_data:r,stock_filtered:a,store_filtered:t,paging:!0,page_name:"/search",pre_component:n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(ue,null)),component:function(e){return e.map(function(e){return n.a.createElement(b.a,{key:e.id,item:!0,xs:12,md:6,lg:3},n.a.createElement(I,e))})}})},_t=Object(h.a)(function(e){return{margin:{marginBottom:e.spacing(1)},padding:{paddingLeft:e.spacing(1)},colored:{backgroundColor:"#81a1c1",color:"white"}}}),jt=function(e){var t=_t(),a=e.id,r=e.boardgame_id,c=e.rank,i=e.items,l=e.alternate,u=T(r).boardgame_name,s=i.sort(function(e,t){return e.price>t.price}),m=s.length,d=void 0,p=void 0;return m>=1&&(d=s[0]),m>=2&&d.price!==s[m-1].price&&(p=s[m-1]),n.a.createElement(o.b,{to:"/item/"+r,style:{textDecoration:"none"}},n.a.createElement(H.a,{className:He()(t.margin,Object(Q.a)({},t.colored,0===l))},n.a.createElement(b.a,{container:!0,spacing:2,key:a},n.a.createElement(b.a,{item:!0,xs:8},n.a.createElement(E.a,{variant:"subtitle1",className:t.padding},u)),n.a.createElement(b.a,{item:!0,xs:2},n.a.createElement(E.a,{variant:"subtitle1"},"BGG Rank ",c)),n.a.createElement(b.a,{item:!0,xs:2},n.a.createElement(E.a,{variant:"subtitle1"},d&&"\u20ac"+d.price," ",p&&"- \u20ac"+p.price)))))},Ot=a(150),kt=a.n(Ot),yt=a(153),xt=function(e){return fetch("".concat("https://boardgamegeek.com/xmlapi","/geeklist/").concat(e)).then(y).then(function(e){return e.text()}).then(function(e){var t=(new kt.a).parseFromString(e);return w(t)})},wt=function(e){var t=Object(r.useState)([]),a=Object(_.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)(function(){var t,a;(t=e,a=2,Object(yt.a)(Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xt(t));case 1:case"end":return e.stop()}},e)})),{onFailedAttempt:x,retries:a})).then(function(e){c(e)})},[e]),n},St=function(){return n.a.createElement(b.a,{container:!0,alignContent:"center",alignItems:"center",direction:"column"},n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(se.a,null)))},Tt=function(){var e=ft(),t=wt(e),a=Object(d.c)(function(e){return e.pricesReducer}).spinner,r=Ne(function(e){return e.filter(function(e){return t.includes(e.boardgame_id)})}),c=r.stock_filtered,i=r.store_filtered,o=Ce(i);return n.a.createElement(Te,{child_data:o,stock_filtered:c,store_filtered:i,page_size:500,page_name:"/geeklist/"+e,component:function(e){return a?n.a.createElement(St,null):e.map(function(e,t){return n.a.createElement(b.a,{key:e.id,item:!0,xs:12},n.a.createElement(jt,Object.assign({},e,{alternate:t%2})))})}})},Rt=function(e){return fetch("".concat("https://api.geekdo.com/xmlapi2","/collection?username=").concat(encodeURIComponent(e),"&wishlist=1")).then(y).then(function(e){return e.text()}).then(function(e){var t=(new kt.a).parseFromString(e);return w(t)})},It=function(e,t){return Object(yt.a)(Object(te.a)(ee.a.mark(function t(){return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Rt(e));case 1:case"end":return t.stop()}},t)})),{onFailedAttempt:x,retries:t})},Nt=function(e){var t=Object(r.useState)(!1),a=Object(_.a)(t,2),c=a[0],i=a[1],o=Object(r.useRef)(!0),l=Object(d.b)(),u=Object(d.c)(function(e){return e.pricesReducer}).wishlist_term;Object(r.useEffect)(function(){return function(){o.current=!1}},[]);var s=Object(r.useCallback)(function(){var e=Object(te.a)(ee.a.mark(function e(t){var a;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return i(!0),l({type:"TOGGLE_SPINNER"}),e.prev=4,e.next=7,It(t,2);case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),a=[];case 13:l({type:"SET_WISHLIST",payload:a}),l({type:"TOGGLE_SPINNER"}),o.current&&i(!1);case 16:case"end":return e.stop()}},e,null,[[4,10]])}));return function(t){return e.apply(this,arguments)}}(),[l]);return n.a.createElement(ce.a,{position:"end"},n.a.createElement(ae.a,{type:"submit",disabled:c,onClick:function(e){e.preventDefault(),s(u)},"aria-label":"search"},n.a.createElement(ne.a,null)))},Ct=Object(h.a)(function(e){return{input:{margin:e.spacing(1)}}}),Dt=function(e){return function(t){return e({type:"SET_WISHLIST_USERNAME",payload:t.target.value})}},At=function(e){var t=Object(d.b)(),a=Ct();return n.a.createElement(H.a,{component:"form"},n.a.createElement(Z.a,{className:a.input,variant:"outlined",fullWidth:!0,onChange:Dt(t),endAdornment:n.a.createElement(Nt,null),placeholder:"boardgamegeek username"}))},Lt=function(){return n.a.createElement(b.a,{container:!0,alignContent:"center",alignItems:"center",direction:"column"},n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(se.a,null)))},Ft=function(){var e=function(){var e=Object(d.c)(function(e){return e.pricesReducer}).wishlist,t=Object(l.g)().pathname.split("/")[2],a=Object(d.b)();return Object(r.useEffect)(Object(te.a)(ee.a.mark(function e(){var r;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=12;break}return a({type:"SET_WISHLIST_USERNAME",payload:t}),e.prev=2,e.next=5,It(t,2);case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r=[];case 11:a({type:"SET_WISHLIST",payload:r});case 12:case"end":return e.stop()}},e,null,[[2,8]])})),[t]),e}(),t=Object(d.c)(function(e){return e.pricesReducer}).spinner,a=Ne(function(t){return t.filter(function(t){return e.includes(t.boardgame_id)})}),c=a.stock_filtered,i=a.store_filtered,o=Ce(i);return n.a.createElement(Te,{child_data:o,stock_filtered:c,store_filtered:i,page_name:"/wishlist",pre_component:n.a.createElement(b.a,{item:!0,xs:12},n.a.createElement(At,null)),component:function(e){return t?n.a.createElement(Lt,null):e.map(function(e){return n.a.createElement(b.a,{key:e.id,item:!0,xs:12,md:6,lg:3},n.a.createElement(I,e))})}})},Wt=a(110),Ht=a(181),Gt=Object(Wt.a)("prices",Object(te.a)(ee.a.mark(function e(){var t,a,r;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,fetch(k+"/rest/v1/prices.json.gz").then(function(e){return e.arrayBuffer()});case 3:return e.t1=e.sent,t=new e.t0(e.t1),a=Ht.a(t),r=Ht.b(a),e.abrupt("return",JSON.parse(r));case 8:case"end":return e.stop()}},e)}))),Bt=Object(Wt.a)("stores",Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k+"/rest/v1/stores.json").then(function(e){return e.json()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))),Mt=Object(Wt.a)("date",Object(te.a)(ee.a.mark(function e(){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k+"/rest/v1/date.json").then(function(e){return e.json()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))),zt=function(){var e=Object(d.b)();return Object(r.useEffect)(function(){e(Gt()),e(Bt()),e(Mt())},[]),n.a.createElement(l.c,null,n.a.createElement(l.a,{path:"/",exact:!0},n.a.createElement(De,null)),n.a.createElement(l.a,{path:"/cart",exact:!0},n.a.createElement(Et,null)),n.a.createElement(l.a,{path:"/search",exact:!0},n.a.createElement(vt,null)),n.a.createElement(l.a,{path:"/wishlist",exact:!0},n.a.createElement(Ft,null)),n.a.createElement(l.a,{path:"/wishlist/:username"},n.a.createElement(Ft,null)),n.a.createElement(l.a,{path:"/geeklist/:geeklist_id"},n.a.createElement(Tt,null)),n.a.createElement(l.a,{path:"/item/:boardgame_id"},n.a.createElement(bt,null)))},Ut=a(126),Pt=a(255),Kt=Object(m.combineReducers)({pricesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return{store:-1,stock:0,stocks:["In stock","Preorder","Out of stock"],cart_results:[],search_term:"",search_results:[],search_enabled:!1,wishlist_term:"",wishlist:[],prices:[],history:[],stores:[],spinner:!0,date:new Date};case"prices/fulfilled":return Object(f.a)({},e,{spinner:!1,prices:t.payload});case"date/fulfilled":return Object(f.a)({},e,{date:new Date(t.payload.date)});case"stores/fulfilled":return Object(f.a)({},e,{stores:t.payload});case"SET_STOCK":return Object(f.a)({},e,{stock:t.stock});case"SET_STORE":return Object(f.a)({},e,{store:t.store});case"ADD_TO_CART":return Object(f.a)({},e,{cart_results:[].concat(Object(p.a)(e.cart_results.filter(function(e){return e.id!==t.cart.id})),[t.cart])});case"SET_SEARCH_TERM":return Object(f.a)({},e,{search_term:t.payload,search_enabled:!1});case"EXECUTE_SEARCH":return Object(f.a)({},e,{search_enabled:!0});case"SET_WISHLIST":return Object(f.a)({},e,{wishlist:t.payload});case"SET_WISHLIST_USERNAME":return Object(f.a)({},e,{wishlist_term:t.payload});case"TOGGLE_SPINNER":return Object(f.a)({},e,{spinner:!e.spinner});default:return e}}}),qt=Object(Pt.composeWithDevTools)(Object(m.applyMiddleware)(Ut.a)),Jt=Object(m.createStore)(Kt,qt);Jt.dispatch({type:"INIT"});var Xt=Object(u.a)({palette:{primary:{main:"#5e81ac"},secondary:{main:"#bf616a"},text:{primary:"#2e3440"}}});i.a.render(n.a.createElement(s.a,{theme:Xt},n.a.createElement(o.a,null,n.a.createElement(d.a,{store:Jt},n.a.createElement(l.a,{path:"/"},n.a.createElement(Ee.a,{domain:"dev-11hy0hqn.us.auth0.com",clientId:"gEd77V5i5uBswawxfycFKL1eEv8BlhdE",redirectUri:window.location.origin},n.a.createElement(zt,null)))))),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.a0688b6f.chunk.js.map