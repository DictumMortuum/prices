(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e){e.exports={name:"prices",version:"0.2.7",private:!0,homepage:"https://prices.dictummortuum.com",dependencies:{"@auth0/auth0-react":"^1.10.1","@babel/runtime":"7.0.0-beta.55","@material-ui/core":"4.12.3","@material-ui/data-grid":"^4.0.0-alpha.37","@material-ui/icons":"^4.11.2","@material-ui/lab":"^4.0.0-alpha.60","@reduxjs/toolkit":"^1.7.1","ansi-regex":"^5.0.1",braces:"^2.3.1",browserslist:"^4.16.5",chartist:"^0.10.1",classnames:"^2.2.6",fflate:"^0.7.3","fuse.js":"^6.5.3","glob-parent":"^5.1.2",immer:"^9.0.6","incremental-average":"^1.1.0","js-combinatorics":"^0.5.4","json-schema":"^0.4.0","material-ui-image":"^3.2.0",merge:"^2.1.1","node-notifier":"^8.0.1","nth-check":"^2.0.1","p-retry":"^5.1.0","prop-types":"^15.6.0","ra-data-fakerest":"^4.2.0",react:"^17.0.2","react-admin":"^4.2.0","react-chartist":"^0.14.4","react-dev-utils":"^11.0.4","react-dom":"^17.0.2","react-icons":"^4.2.0","react-player":"^2.10.1","react-redux":"^7.2.4","react-router":"^5.2.0","react-router-dom":"^5.2.0","react-scripts":"^2.0.0","react-share":"^4.4.0","react-spinners":"^0.11.0","react-xml-parser":"^1.1.8",recharts:"^2.0.9",redux:"^4.1.0","redux-devtools-extension":"^2.13.9",reselect:"^4.0.0","serialize-javascript":"^3.1.0",sockjs:"^0.3.20",tar:"^4.4.18",tmpl:"^1.0.5","ts-trueskill":"^3.2.2","url-parse":"^1.5.2","use-query-params":"^1.2.3","yargs-parser":"^13.1.2"},scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test",eject:"react-scripts eject",predeploy:"yarn build",deploy:"gh-pages -d build",stats:"curl 'localhost:1234/rest/v1/play?_resource=stats' | jq  > ./src/standings/plays.json; curl 'localhost:1234/rest/v1/trueskill' > ./src/standings/ratings.json; curl 'localhost:1234/rest/v1/trueskill/overall' > ./src/standings/overall.json",prices:"curl 'localhost:1234/rest/v1/price?_resource=history'"},eslintConfig:{extends:"react-app"},browserslist:[">0.2%","not ie <= 11","not op_mini all"],devDependencies:{"@babel/helper-call-delegate":"^7.8.7","gh-pages":"^3.1.0"}}},255:function(e,t,a){e.exports=a.p+"static/media/cartoff.dd87c6d4.svg"},303:function(e,t,a){e.exports=a(469)},308:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),i=a.n(c),o=(a(308),a(94)),l=a(33),u=a(281),s=a(559),m=a(46),d=a(8),p=a(38),f=a(26),b=a(10),E=a(527),h=a(132),g=a(516),j=a(517),O=a(518),v=a(514),_=function(e){var t=e.srcs,a=Object(n.useState)(0),c=Object(b.a)(a,2),i=c[0],o=c[1],l=void 0===t[i]?"https://via.placeholder.com/250":t[i];return Object(n.useEffect)(function(){var e=new Image;e.onerror=function(){o(i+1)},e.onload=function(){e.complete&&e.naturalWidth<100&&e.naturalHeight<100&&o(i+1)},e.src=t[i]},[t]),r.a.createElement(v.a,{style:{paddingTop:"75%"},image:l})},y=a(283),k=r.a.forwardRef(function(e,t){return function(e){var t=e.to,a=e.children,n=(e.component,Object(y.a)(e,["to","children","component"])),c=Object(l.g)().search,i=new URLSearchParams(c);i.delete("page");var u="".concat(t,"?").concat(i.toString());return r.a.createElement(o.b,Object.assign({},n,{to:u}),a)}(Object(f.a)({},e,{ref:t}))}),S="https://raw.githubusercontent.com/DictumMortuum/json-api/master",w=function(e){if(202===e.status)throw new Error("impersonating an error, as we have to retry, since the request is queued on the backend now");return e},R=function(e){console.log("Attempt ".concat(e.attemptNumber," failed. There are ").concat(e.retriesLeft," retries left."))},x=function(e){var t={};return e.children.map(function(e){var a=e.name,n=e.attributes,r=e.value;return t[a]=""!==r?r:n,a}),Object(f.a)({id:parseInt(e.attributes.objectid)},t)},T=function(e){return e.children.map(x)},I={boardgame_id:"",boardgame_name:"",images:[]},C=function(e){var t=Object(n.useState)(I),a=Object(b.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){var t=!0;return function(e){return fetch(S+"/rest/v1/boardgames/"+e+"/boardgame.json").then(function(e){return e.json()})}(e).then(function(e){t&&c(e)}),function(){t=!1}},[e]),r},N=a(252),W=a.n(N),A=a(519),D=a(471),L=function(e){var t=Object(d.c)(function(e){return e.pricesReducer.stores}).filter(function(t){return t.id===e});return Object(b.a)(t,1)[0]},F=a(13),P=Object(g.a)(function(e){return{card_header:{minHeight:120},price:{marginLeft:"auto",marginRight:e.spacing(2)}}}),H=function(e){var t=e.store_id,a=L(t),n=void 0===a.name?"":a.name;return r.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},n)},B=function(e){var t=e.id,a=e.boardgame_id,n=e.rank,c=e.items,i=Object(d.b)(),o=P(),l=C(a),u=l.images,s=l.boardgame_name,m=c.sort(function(e,t){return e.price-t.price}),f=m.length,E=Object(F.g)("bgg_id",Object(F.h)(F.c,[])),g=Object(b.a)(E,2),v=g[0],y=g[1],S=void 0,w=void 0;return f>=1&&(S=m[0]),f>=2&&S.price!==m[f-1].price&&(w=m[f-1]),r.a.createElement(j.a,{key:t,square:!0,elevation:3},r.a.createElement(k,{to:"/item/"+a},r.a.createElement(_,{srcs:["https://raw.githubusercontent.com/DictumMortuum/json-api/master/rest/v1/boardgames/".concat(a,"/image.avif")].concat(Object(p.a)(u))})),r.a.createElement(O.a,{className:o.card_header},n<999999&&r.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},"BGG Rank ",n),1===m.length&&r.a.createElement(H,m[0]),r.a.createElement(h.a,{variant:"subtitle1"},s)),r.a.createElement(A.a,{disableSpacing:!0},r.a.createElement(D.a,{onClick:function(){return function(e,t){return function(a,n){e({type:"ADD_TO_CART",cart:a}),n.includes(a)?t(n.filter(function(e){return e!==a})):t([].concat(Object(p.a)(n),[a]))}}(i,y)(a,v)}},r.a.createElement(W.a,null)),r.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary",className:o.price},S&&"\u20ac"+S.price," ",w&&"- \u20ac"+w.price)))},M=a(540),G=a(536),U=a(531),q=a(561),z=a(571),K=a(520),J=a(522),V=function(){var e=Object(d.c)(function(e){return e.pricesReducer.stock}),t=Object(d.b)(),a=Object(F.g)("stock",F.b),n=Object(b.a)(a,2)[1];return r.a.createElement(K.a,{variant:"outlined",fullWidth:!0},r.a.createElement(z.a,{htmlFor:"stock-select-label"},"Stock"),r.a.createElement(q.a,{labelId:"stock-select-label",id:"stock-select",value:e,onChange:function(e){t({type:"SET_STOCK",stock:e.target.value}),n(e.target.value)}},["In stock","Preorder","Out of stock"].map(function(e,t){return r.a.createElement(J.a,{key:e,value:t},e)}),r.a.createElement(J.a,{key:-1,value:-1},"Show all")))},Y=a(523),X=function(e){var t=e.store_ids,a=Object(d.c)(function(e){return e.pricesReducer.store}),n=Object(d.c)(function(e){return e.pricesReducer.stores}),c=n.filter(function(e){return t.includes(e.id)}),i=n.filter(function(e){return!t.includes(e.id)}),o=Object(d.b)(),l=Object(F.g)("store",F.c),u=Object(b.a)(l,2)[1];return r.a.createElement(K.a,{variant:"outlined",fullWidth:!0},r.a.createElement(z.a,{htmlFor:"store-select-label"},"Store"),r.a.createElement(q.a,{labelId:"store-select-label",id:"store-select",value:a,multiple:!0,onChange:function(e){var t=function(e){var t=e.slice(-1);return-1===Object(b.a)(t,1)[0]?[-1]:Object(p.a)(new Set(e.filter(function(e){return-1!==e})))}(e.target.value);o({type:"SET_STORE",store:t}),u(t)}},r.a.createElement(J.a,{key:-1,value:-1},"All stores"),r.a.createElement(Y.a,{style:{background:"white"}},"With Stock"),c.map(function(e){return r.a.createElement(J.a,{key:e.id,value:e.id},e.name)}),r.a.createElement(Y.a,{style:{background:"white"}},"Rest"),i.map(function(e){return r.a.createElement(J.a,{key:e.id,value:e.id},e.name)})))},Q=a(568),Z=a(254),$=a.n(Z),ee=Object(g.a)(function(e){return{root:{color:"#d8dee9",flexGrow:1},color:{color:"#d8dee9",textDecoration:"none"}}}),te=function(){var e=ee(),t=Object(l.g)().pathname.split("/").slice(2).filter(function(e){return"item"!==e}).filter(function(e){return""!==e});return r.a.createElement(Q.a,{className:e.root,separator:"/","aria-label":"breadcrumb"},r.a.createElement(D.a,{className:e.color,component:k,to:"/"},r.a.createElement($.a,null)),t.map(function(t){return r.a.createElement(k,{key:t,className:e.color,to:"/item/"+t},r.a.createElement(h.a,{variant:"h5"},t))}))},ae=a(539),ne=a(285),re=a(50),ce=a(572),ie=a(24),oe=a.n(ie),le=a(35),ue=a(164),se=a.n(ue),me=a(524),de=function(){var e=Object(d.b)(),t=Object(d.c)(function(e){return e.pricesReducer.search_term}),a=Object(n.useState)(!1),c=Object(b.a)(a,2),i=c[0],o=c[1],u=Object(l.f)(),s=Object(n.useRef)(!0);Object(n.useEffect)(function(){return function(){s.current=!1}},[]);var m=Object(n.useCallback)(Object(le.a)(oe.a.mark(function t(){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=2;break}return t.abrupt("return");case 2:o(!0),e({type:"EXECUTE_SEARCH"}),u.push("/search"),s.current&&o(!1);case 6:case"end":return t.stop()}},t)})),[t,e]);return r.a.createElement(me.a,{position:"end"},r.a.createElement(D.a,{type:"submit",disabled:i,onClick:m,"aria-label":"search"},r.a.createElement(se.a,null)))},pe=Object(g.a)(function(e){return{input:{margin:e.spacing(1)},root:Object(re.a)({margin:e.spacing(1)},e.breakpoints.up("md"),{marginRight:e.spacing(3)})}}),fe=function(e){return function(t){return e({type:"SET_SEARCH_TERM",payload:t.target.value})}},be=function(e){var t=Object(d.b)(),a=pe();return r.a.createElement(ne.a,{component:"form",onSubmit:function(e){e.preventDefault()}},r.a.createElement(ce.a,{placeholder:" Search...",className:a.input,fullWidth:!0,inputProps:{"aria-label":"search"},onChange:fe(t),endAdornment:r.a.createElement(de,null)}))},Ee=a(541),he=a(165),ge=a(560),je=a(530),Oe=a(570),ve=a(532),_e=a(533),ye=a(534),ke=(a(535),a(166)),Se=function(){var e=Object(d.b)(),t=Object(d.c)(function(e){return e.pricesReducer.user}).saved,a=Object(ke.b)(),r=a.isAuthenticated,c=a.user,i=a.loginWithRedirect,o=a.logout;return Object(n.useEffect)(function(){var a;r&&!t&&(a=c,fetch("".concat("https://szb34l.deta.dev","/user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()})).then(function(t){return e({type:"SET_USER",payload:{isAuthenticated:r,details:t}})})},[e,r,t,c]),{isAuthenticated:r,user:c,loginWithRedirect:i,logout:o}},we=a(574),Re=a(525),xe=a(526),Te=a(575),Ie=function(e){var t=Object(d.b)(),a=Object(d.c)(function(e){return e.pricesReducer.enable_price_filter}),n=Object(d.c)(function(e){return e.pricesReducer.price_range}),c=Object(F.g)("min",Object(F.h)(F.b,0)),i=Object(b.a)(c,2)[1],o=Object(F.g)("max",Object(F.h)(F.b,500)),l=Object(b.a)(o,2)[1];return r.a.createElement(we.a,{min:0,max:500,value:n,onChange:function(e,a){t({type:"SET_PRICE_RANGE",payload:a});var n=Object(b.a)(a,2),r=n[0],c=n[1];i(r),l(c)},"aria-labelledby":"range-slider",valueLabelDisplay:"auto",disabled:!a})},Ce=function(e){var t=Object(d.b)(),a=Object(d.c)(function(e){return e.pricesReducer.enable_price_filter}),n=Object(F.g)("price_filter",Object(F.h)(F.a,!1)),c=Object(b.a)(n,2)[1];return r.a.createElement(K.a,{component:"fieldset"},r.a.createElement(Re.a,null,r.a.createElement(xe.a,{control:r.a.createElement(Te.a,{checked:a,onChange:function(e){t({type:"SET_PRICE_FILTER",payload:e.target.checked}),c(e.target.checked)}})})))},Ne=a(528),We=a(255),Ae=a.n(We),De=function(){return r.a.createElement(E.a,{container:!0,alignContent:"center",alignItems:"center",direction:"column"},r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(Ne.a,null)))},Le=function(e){var t=Object(d.c)(function(e){return e.pricesReducer.spinner});return r.a.createElement(E.a,{container:!0,alignContent:"center",alignItems:"center",direction:"column"},r.a.createElement(E.a,{item:!0,xs:12},t?r.a.createElement(Ne.a,null):r.a.createElement(h.a,{variant:"body1",color:"inherit"},r.a.createElement("img",{style:{height:300},alt:"",src:Ae.a}))))},Fe=function(e){var t=Object(d.b)(),a=Object(d.c)(function(e){return e.pricesReducer.enable_best_price}),n=Object(F.g)("best_prices",Object(F.h)(F.a,!1)),c=Object(b.a)(n,2)[1];return r.a.createElement(K.a,{component:"fieldset"},r.a.createElement(Re.a,null,r.a.createElement(xe.a,{control:r.a.createElement(Te.a,{checked:a,onChange:function(e){t({type:"SET_BEST_PRICE",payload:e.target.checked}),c(e.target.checked)}})})))},Pe=a(565),He=a(529),Be=a(256),Me=a.n(Be),Ge=a(257),Ue=a.n(Ge),qe=a(43),ze=Object(g.a)(function(e){return{drawerHeader:Object(f.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),paper:{width:280}}});function Ke(e){var t=e.children,a=e.open,n=e.handleDrawerClose,c=Object(qe.a)(),i=ze();return r.a.createElement(Pe.a,{anchor:"left",open:a,onClose:n,classes:{paper:i.paper}},r.a.createElement("div",{className:i.drawerHeader},r.a.createElement(D.a,{onClick:n},"ltr"===c.direction?r.a.createElement(Me.a,null):r.a.createElement(Ue.a,null))),r.a.createElement(He.a,null),t)}var Je=a(259),Ve=a.n(Je),Ye=a(521),Xe=a(472),Qe=a(537),Ze=a(538),$e=function(){var e=Object(d.b)(),t=Object(d.c)(function(e){return e.pricesReducer.wishlist_stores_view}),a=Object(F.g)("stores_view",Object(F.h)(F.a,!1)),n=Object(b.a)(a,2)[1];return r.a.createElement(K.a,{component:"fieldset"},r.a.createElement(Re.a,null,r.a.createElement(xe.a,{control:r.a.createElement(Te.a,{checked:t,onChange:function(t){e({type:"SET_WISHLIST_VIEW",payload:t.target.checked}),n(t.target.checked)}})})))},et=function(e){var t=Object(d.b)(),a=Object(d.c)(function(e){return e.pricesReducer.wishlist_priority});return r.a.createElement(K.a,{variant:"outlined",fullWidth:!0},r.a.createElement(z.a,{id:"priority-select-label"},"Priority"),r.a.createElement(q.a,{labelId:"priority-select-label",id:"priority-select",value:a,onChange:function(e){t({type:"SET_PRIORITY",payload:e.target.value})}},r.a.createElement(J.a,{key:-1,value:-1},"All priorities"),[1,2,3,4,5].map(function(e){return r.a.createElement(J.a,{key:e,value:e},"Priority ",e)})))},tt=a(167),at=a.n(tt),nt=a(173),rt=function(e){return fetch("".concat("https://api.geekdo.com/xmlapi2","/collection?username=").concat(encodeURIComponent(e),"&wishlist=1")).then(w).then(function(e){return e.text()}).then(function(e){var t=(new at.a).parseFromString(e);return T(t)})},ct=function(e,t){return Object(nt.a)(Object(le.a)(oe.a.mark(function t(){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",rt(e));case 1:case"end":return t.stop()}},t)})),{onFailedAttempt:R,retries:t})},it=a(573),ot=function(e){return function(t){return e({type:"SET_WISHLIST_USERNAME",payload:t.target.value})}},lt=function(e){var t=Object(d.b)(),a=Object(n.useState)(!1),c=Object(b.a)(a,2),i=c[0],o=c[1],l=Object(n.useRef)(!0),u=Object(d.c)(function(e){return e.pricesReducer.wishlist_term}),s=Object(F.g)("bgg_username",F.e),m=Object(b.a)(s,2)[1];Object(n.useEffect)(function(){return function(){l.current=!1}},[]);var p=Object(n.useCallback)(function(){var e=Object(le.a)(oe.a.mark(function e(a){var n;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return o(!0),t({type:"TOGGLE_SPINNER"}),e.prev=4,e.next=7,ct(a,2);case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),n=[];case 13:t({type:"SET_WISHLIST",payload:n}),m(a),t({type:"TOGGLE_SPINNER"}),l.current&&o(!1);case 17:case"end":return e.stop()}},e,null,[[4,10]])}));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement(K.a,{variant:"outlined",fullWidth:!0},r.a.createElement(z.a,{htmlFor:"bgg-input"},"Bgg username"),r.a.createElement(it.a,{style:{paddingRight:0},id:"bgg-input",value:u,onChange:ot(t),onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),p(u))},endAdornment:r.a.createElement(me.a,{position:"end"},r.a.createElement(D.a,{disabled:i,onClick:function(e){e.preventDefault(),p(u)},"aria-label":"search"},r.a.createElement(se.a,null)))}))},ut=Object(g.a)(function(e){return{root:{background:"#d8dee9",fontFamily:"sans"},appbar:{marginBottom:e.spacing(4)},bottomBar:{top:"auto",bottom:0},content:{minHeight:"90vh",padding:10},margin:{color:"white"},pagination:{padding:e.spacing(1)}}}),st=function(e,t){return Math.ceil(e.length/t)},mt=function(e){return r.a.createElement(ne.a,Object.assign({variant:"outlined",square:!0},e))},dt=function(e){var t=e.loginWithRedirect;return r.a.createElement(je.a,{onClick:function(){return t()},color:"inherit"},"Login")},pt=function(e){var t=e.user,a=e.logout,n=t.picture,c=t.name;return r.a.createElement(D.a,{onClick:function(){return a({returnTo:window.location.origin})}},r.a.createElement(Oe.a,{alt:c,src:n}))},ft=function(e){var t=e.cart_results;return r.a.createElement(D.a,null,r.a.createElement(U.a,{badgeContent:t.length,color:"secondary",max:99999,style:{color:"white"},component:k,to:"/cart"},r.a.createElement(ve.a,null)))},bt=function(){return r.a.createElement(D.a,{style:{color:"white"},component:k,to:"/wishlist"},r.a.createElement(_e.a,null))},Et=function(){return r.a.createElement(D.a,{style:{color:"white"},component:k,to:"/search"},r.a.createElement(ye.a,null))},ht=function(e){var t=e.handleDrawerOpen;return r.a.createElement(D.a,{color:"inherit","aria-label":"open drawer",onClick:t,edge:"start"},r.a.createElement(Ve.a,null))},gt=function(e){var t=Object(d.c)(function(e){return e.pricesReducer.cart_results}),a=e.children,c=e.matches,i=e.breadcrumbs,o=e.isAuthenticated,l=e.loginWithRedirect,u=e.logout,s=e.user,m=r.a.useState(!1),p=Object(b.a)(m,2),f=p[0],E=p[1];return r.a.createElement(G.a,null,i&&r.a.createElement(n.Fragment,null,r.a.createElement(ht,{handleDrawerOpen:function(){E(!0)}}),r.a.createElement(Ke,{open:f,handleDrawerClose:function(){E(!1)}},a),r.a.createElement(te,null)),c&&r.a.createElement(n.Fragment,null,r.a.createElement(be,null),r.a.createElement(Et,null),r.a.createElement(bt,null),!1,r.a.createElement(ft,{cart_results:t}),o?r.a.createElement(pt,{logout:u,user:s}):r.a.createElement(dt,{loginWithRedirect:l})))},jt=function(e){var t=e.additional_controls,a=e.stock_filtered,n=Object(p.a)(new Set(a.map(function(e){return e.store_id})));return r.a.createElement(Ye.a,null,r.a.createElement(Xe.a,null,r.a.createElement(X,{store_ids:n})),r.a.createElement(Xe.a,null,r.a.createElement(V,null)),r.a.createElement(Xe.a,null,r.a.createElement(Qe.a,{primary:"Enable best prices"}),r.a.createElement(Ze.a,null,r.a.createElement(Fe,null))),r.a.createElement(Xe.a,null,r.a.createElement(Qe.a,{primary:"Enable stores view"}),r.a.createElement(Ze.a,null,r.a.createElement($e,null))),r.a.createElement(Xe.a,null,r.a.createElement(Qe.a,{primary:"Enable price filter"}),r.a.createElement(Ze.a,null,r.a.createElement(Ce,null))),r.a.createElement(Xe.a,null,r.a.createElement(Ie,null)),r.a.createElement(Xe.a,null,r.a.createElement(lt,null)),r.a.createElement(Xe.a,null,r.a.createElement(et,null)),null!==t&&t)},Ot=function(e){var t=ut(),a=Object(ae.a)(function(e){return e.breakpoints.up("md")}),c=Object(d.c)(function(e){return e.pricesReducer.date}),i=e.store_filtered,o=e.stock_filtered,l=e.child_data,u=e.component,s=e.pre_component,m=e.additional_controls,p=e.paging,f=void 0===p||p,g=e.page_size||12,j=Object(F.g)("page",Object(F.h)(F.b,1)),O=Object(b.a)(j,2),v=O[0],_=O[1],y=Se(),k=y.loginWithRedirect,S=y.logout,w=y.isAuthenticated,R=y.user,x=function(e,t,a,n){return!0===n?e.slice((a-1)*t,a*t):e}(l,g,v,f);return Object(n.useEffect)(function(){window.scrollTo(0,0)},[v]),r.a.createElement(E.a,{container:!0,className:t.root,alignContent:"center",alignItems:"center"},r.a.createElement(M.a,{position:"static",className:t.appbar},r.a.createElement(gt,{user:R,breadcrumbs:!0,matches:a,isAuthenticated:w,loginWithRedirect:k,logout:S},r.a.createElement(jt,{stock_filtered:o,additional_controls:m}))),r.a.createElement(Ee.a,{maxWidth:"lg"},r.a.createElement(E.a,{container:!0,spacing:4,component:mt,className:t.content},r.a.createElement(E.a,{item:!0,md:12,xs:12,component:"div"},r.a.createElement(E.a,{container:!0,spacing:2},l.length>g&&f&&r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(ge.a,{variant:"outlined",shape:"rounded",count:st(l,g),page:v,onChange:function(e,t){return _(t,"pushIn")}})),void 0!==s&&s,i.length>0?u(x):r.a.createElement(Le,null),l.length>g&&f&&r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(ge.a,{variant:"outlined",shape:"rounded",count:st(l,g),page:v,onChange:function(e,t){return _(t,"pushIn")}})))))),!a&&r.a.createElement(M.a,{position:"fixed",className:t.bottomBar},r.a.createElement(gt,{user:R,breadcrumbs:!1,matches:!a,isAuthenticated:w,loginWithRedirect:k,logout:S})),r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(G.a,null,r.a.createElement(h.a,{variant:"body1",color:"inherit"},"\xa9 2022 Dimitris Raviolos - ",he.version," - Last update: ",new Date(c).toLocaleDateString("el-GR")))))},vt=function(e){return function(t){return!!e.includes(-1)||e.includes(t.store_id)}},_t=function(e){return function(t){return t.stock===e||-1===e}},yt=function(e){var t=Object(d.c)(function(e){return e.pricesReducer.store}),a=Object(d.c)(function(e){return e.pricesReducer.stock}),n=Object(d.c)(function(e){return e.pricesReducer.prices}),r=Object(d.c)(function(e){return e.pricesReducer.price_range}),c=Object(d.c)(function(e){return e.pricesReducer.enable_price_filter}),i=Object(d.c)(function(e){return e.pricesReducer.enable_best_price}),o=Object(b.a)(r,2),l=o[0],u=o[1],s=void 0!==e?e(n):n,m=(c?s.filter(function(e){return e.price<u&&e.price>l}):s).filter(_t(a));return{page_filtered:s,stock_filtered:m,store_filtered:(i?function(e){var t={};return e.map(function(e){var a=e.boardgame_id;return void 0===t[a]?t[a]=e:e.price<t[a].price&&(t[a]=e),e}),Object.values(t)}(m):m).filter(vt(t))}},kt=function(e){var t=[];return e.map(function(e){return void 0===t[e.boardgame_id]&&(t[e.boardgame_id]=Object(f.a)({},e,{items:[]}),void 0===t[e.boardgame_id].rank&&(t[e.boardgame_id].rank=999999)),t[e.boardgame_id].items.push(e),e}),t.filter(function(e){return e.items.length>0}).sort(function(e,t){return e.rank-t.rank})},St=function(){var e=yt(),t=e.store_filtered,a=e.stock_filtered,n=kt(t);return r.a.createElement(Ot,{child_data:n,stock_filtered:a,store_filtered:t,paging:!0,page_name:"/",component:function(e){return e.map(function(e){return r.a.createElement(E.a,{key:e.id,item:!0,xs:12,md:6,lg:3},r.a.createElement(B,e))})}})},wt=a(14),Rt=a.n(wt),xt=a(542),Tt=a(543),It=a(544),Ct=a(545),Nt=a(546),Wt=a(547),At=a(548),Dt=a(549),Lt=a(550),Ft=a(551),Pt=Object(g.a)(function(e){return{media:{height:0,paddingTop:"75%"},card_header:{minHeight:110},out_of_stock:{opacity:.5}}}),Ht=function(e){var t=new URL(e);return t.searchParams.append("utm_source","dictummortuum"),t.searchParams.append("utm_medium","dictummortuum"),t.searchParams.append("utm_campaign","dictummortuum"),t.toString()},Bt=function(e){var t=e.boardgame,a=t.store_thumb,n=t.url,c=t.thumb,i=t.boardgame_id,o=t.stock,l=e.self_ref,u=Pt();return l?r.a.createElement(k,{to:"/item/"+i+"?stock="+o},r.a.createElement(v.a,{className:u.media,image:""===a?c:a})):r.a.createElement("a",{href:Ht(n),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(v.a,{className:u.media,image:""===a?c:a}))},Mt=function(e){var t=Pt(),a=e.boardgame,n=a.url,c=a.name,i=a.store_id,o=a.price,l=a.stock,u=window.location.href,s=L(i);return r.a.createElement(j.a,{className:Rt()(Object(re.a)({},t.out_of_stock,2===l))},n&&r.a.createElement(Bt,e),r.a.createElement(A.a,null,r.a.createElement(D.a,{component:"div"},r.a.createElement(xt.a,{style:{height:24},url:u},r.a.createElement(Tt.a,{size:24,round:!0}))),r.a.createElement(D.a,{component:"div"},r.a.createElement(It.a,{style:{height:24},url:u},r.a.createElement(Ct.a,{size:24,round:!0}))),r.a.createElement(D.a,{component:"div"},r.a.createElement(Nt.a,{style:{height:24},url:u},r.a.createElement(Wt.a,{size:24,round:!0}))),r.a.createElement(D.a,{component:"div"},r.a.createElement(At.a,{style:{height:24},url:u},r.a.createElement(Dt.a,{size:24,round:!0}))),r.a.createElement(D.a,{component:"div"},r.a.createElement(Lt.a,{style:{height:24},url:u},r.a.createElement(Ft.a,{size:24,round:!0})))),r.a.createElement(O.a,{className:t.card_header},r.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},s.name),r.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},"\u20ac",o),r.a.createElement(h.a,{variant:"subtitle1"},c)))},Gt=a(552),Ut=a(564),qt=a(556),zt=a(276),Kt=a(277),Jt=a(145),Vt=a(275),Yt=a(273),Xt=Object(g.a)(function(e){return{root:{padding:e.spacing(4)},label:{marginBottom:e.spacing(1)}}}),Qt=function(e){for(var t=e[0].price,a=e[0].price,n=e[0].price,r=1;r<e.length;r++)e[r].price>t&&(t=e[r].price),e[r].price<a&&(a=e[r].price),n+=e[r].price;return{max:parseFloat(t.toFixed(2)),min:parseFloat(a.toFixed(2)),avg:parseFloat((n/e.length).toFixed(2))}},Zt=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)},$t=function(e){var t=new Date(e);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},ea=function(e){var t,a=Xt(),n=e.history,c=Object(d.c)(function(e){return e.pricesReducer.store}),i=Object(d.c)(function(e){return e.pricesReducer.stock}),o=function(e){var t={};e.map(function(e){return void 0===t[e.cr_date]&&(t[e.cr_date]=[]),t[e.cr_date].push(e),e});var a=[];for(var n in t){var r=new Date(n),c=Qt(t[n]),i=c.avg,o=c.min,l=c.max;a.push({avg:i,range:[o,l],cr_date:r.valueOf()})}return a}(n.filter(_t(i)).filter(vt(c))).sort(function(e,t){return t.cr_date-e.cr_date});return r.a.createElement(ne.a,{className:a.root},r.a.createElement(h.a,{variant:"body1",color:"inherit",className:a.label},"Price history"),r.a.createElement(Gt.a,{width:"100%",height:200},r.a.createElement(Ut.a,{data:o},r.a.createElement(qt.a,{strokeDasharray:"5 5"}),r.a.createElement(zt.a,{dataKey:"cr_date",scale:"time",type:"number",domain:(t=o,0===t.length?[]:[t[0].cr_date-432e5,t[t.length-1].cr_date+432e5]),tickFormatter:Zt}),r.a.createElement(Kt.a,{domain:["auto","auto"],type:"number"}),r.a.createElement(Jt.a,{labelFormatter:$t}),r.a.createElement(Vt.a,{type:"monotone",dataKey:"range",fillOpacity:.3,fill:"#5e81ac"}),r.a.createElement(Yt.a,{type:"monotone",dataKey:"avg",stroke:"#bf616a",strokeWidth:3,activeDot:{r:8}}))))},ta=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){(function(e){return fetch(S+"/rest/v1/boardgames/"+e+"/prices.json").then(function(e){return e.json()})})(e).then(function(e){return c(e)})},[e]),r},aa=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){var t=!0;return function(e){return fetch(S+"/rest/v1/boardgames/"+e+"/history.json").then(function(e){return e.json()})}(e).then(function(e){t&&c(e)}),function(){t=!1}},[e]),r},na=function(){var e=Object(l.g)().pathname;return parseInt(e.split("/")[2])},ra=function(){var e=na(),t=yt(function(e){return function(t){return t.filter(function(t){return t.boardgame_id===e}).sort(function(e,t){return e.price-t.price})}}(e)),a=t.stock_filtered,n=t.store_filtered,c=aa(e),i=ta(e),o=n.map(function(e){return e.id});return r.a.createElement(Ot,{child_data:i.filter(function(e){return o.includes(e.id)}),stock_filtered:a,store_filtered:n,paging:!1,pre_component:r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(ea,{history:c})),component:function(e){return e.map(function(e){return r.a.createElement(E.a,{key:e.id,item:!0,xs:12,md:6,lg:3},r.a.createElement(Mt,{boardgame:e}))})}})},ca=function(e){var t=e.id,a=e.boardgame_id,n=e.wishlist,c=e.preview,i=n.filter(function(e){return e.id===a}),o=Object(b.a)(i,1)[0].thumbnail;return r.a.createElement(j.a,{key:t,square:!0,elevation:3},r.a.createElement(k,{to:"/item/"+a},r.a.createElement(v.a,{style:{paddingTop:"75%"},image:void 0===o?c:o})))},ia=function(e){return e.reduce(function(e,t){return e+t.price},0).toFixed(2)},oa=function(e){var t=[];return e.map(function(e){return void 0===t[e.store_id]&&(t[e.store_id]={store_id:e.store_id,items:[]}),t[e.store_id].items.push(e),e}),t.filter(function(e){return e.items.length>0}).sort(function(e,t){var a=t.items.length-e.items.length;return 0!==a?a:ia(t.items)-ia(e.items)})},la=function(e){var t=e.store_id,a=e.items,n=e.wishlist,c=L(t),i=ia(a);return r.a.createElement(E.a,{container:!0,spacing:1},r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(h.a,{variant:"h4"},c.name," -  \u20ac",i)),a.sort(function(e,t){return e.boardgame_id-t.boardgame_id}).map(function(e){return r.a.createElement(E.a,{key:e.id,item:!0,xs:6,md:3,lg:1},r.a.createElement(ca,Object.assign({},e,{wishlist:n})))}))},ua=function(e){return e.map(function(e){return r.a.createElement(E.a,{key:e.id,item:!0,xs:12,md:6,lg:3},r.a.createElement(B,e))})},sa=function(e){return function(t){return t.map(function(t){return r.a.createElement(E.a,{key:t.store_id,item:!0,xs:12},r.a.createElement(la,Object.assign({},t,{wishlist:e})))})}},ma=function(){var e,t=function(){var e=Object(d.c)(function(e){return e.pricesReducer.wishlist}),t=Object(F.g)("bgg_username",F.e),a=Object(b.a)(t,1)[0],r=Object(d.b)();return Object(n.useEffect)(Object(le.a)(oe.a.mark(function e(){var t;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=12;break}return r({type:"SET_WISHLIST_USERNAME",payload:a}),e.prev=2,e.next=5,ct(a,2);case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t=[];case 11:r({type:"SET_WISHLIST",payload:t});case 12:case"end":return e.stop()}},e,null,[[2,8]])})),[a]),e}(),a=Object(d.c)(function(e){return e.pricesReducer.wishlist_stores_view}),c=Object(d.c)(function(e){return e.pricesReducer.wishlist_priority}),i=Object(d.c)(function(e){return e.pricesReducer.spinner}),o=t.filter(function(e){return parseInt(e.status.wishlistpriority)===c||-1===c}),l=yt(function(e){return e.filter(function(e){return o.map(function(e){return e.id}).includes(e.boardgame_id)})}),u=l.stock_filtered,s=l.store_filtered;return e=a?oa(s):kt(s),r.a.createElement(Ot,{child_data:e,stock_filtered:u,store_filtered:s,page_name:"/wishlist",component:function(e){return i?r.a.createElement(De,null):a?sa(t)(e):ua(e)}})},da=function(){var e,t=Object(d.c)(function(e){return e.pricesReducer.cart_results}),a=Object(d.c)(function(e){return e.pricesReducer.wishlist_stores_view}),n=Object(d.c)(function(e){return e.pricesReducer.spinner}),c=yt(function(e){return e.filter(function(e){return t.includes(e.boardgame_id)})}),i=c.stock_filtered,o=c.store_filtered;return e=a?oa(o):kt(o),r.a.createElement(Ot,{child_data:e,stock_filtered:i,store_filtered:o,page_name:"/cart",component:function(e){return n?r.a.createElement(De,null):a?sa(t.map(function(e){return{id:e}}))(e):ua(e)}})},pa=a(278),fa=function(e){var t=Object(d.c)(function(e){return e.pricesReducer.search_term}),a=Object(d.c)(function(e){return e.pricesReducer.search_enabled}),n=Object(d.c)(function(e){return e.pricesReducer.search_results});if(""!==t&&a){return new pa.a(e,{includeScore:!0,shouldSort:!0,ignoreLocation:!0,keys:["name"]}).search(t).filter(function(e){return e.score<=.6}).map(function(e){return e.item})}return n},ba=function(){var e=yt(fa),t=e.store_filtered,a=e.stock_filtered,n=function(e){var t=[],a={};return e.map(function(e,n){return void 0!==a[e.boardgame_id]&&(n=a[e.boardgame_id]),void 0===t[n]&&(t[n]=Object(f.a)({},e,{items:[]}),a[e.boardgame_id]=n),t[n].items.push(e),e}),t.filter(function(e){return e.items.length>0})}(t);return r.a.createElement(Ot,{child_data:n,stock_filtered:a,store_filtered:t,paging:!0,page_name:"/search",pre_component:r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(be,null)),component:function(e){return e.map(function(e){return r.a.createElement(E.a,{key:e.id,item:!0,xs:12,md:6,lg:3},r.a.createElement(B,e))})}})},Ea=Object(g.a)(function(e){return{margin:{marginBottom:e.spacing(1)},padding:{paddingLeft:e.spacing(1)},colored:{backgroundColor:"#81a1c1",color:"white"}}}),ha=function(e){var t=Ea(),a=e.id,n=e.boardgame_id,c=e.rank,i=e.items,o=e.alternate,l=C(n).boardgame_name,u=i.sort(function(e,t){return e.price-t.price}),s=u.length,m=void 0,d=void 0;return s>=1&&(m=u[0]),s>=2&&m.price!==u[s-1].price&&(d=u[s-1]),r.a.createElement(k,{to:"/item/"+n,style:{textDecoration:"none"}},r.a.createElement(ne.a,{className:Rt()(t.margin,Object(re.a)({},t.colored,0===o))},r.a.createElement(E.a,{container:!0,spacing:2,key:a},r.a.createElement(E.a,{item:!0,xs:8},r.a.createElement(h.a,{variant:"subtitle1",className:t.padding},l)),r.a.createElement(E.a,{item:!0,xs:2},r.a.createElement(h.a,{variant:"subtitle1"},"BGG Rank ",c)),r.a.createElement(E.a,{item:!0,xs:2},r.a.createElement(h.a,{variant:"subtitle1"},m&&"\u20ac"+m.price," ",d&&"- \u20ac"+d.price)))))},ga=function(e){return fetch("".concat("https://boardgamegeek.com/xmlapi","/geeklist/").concat(e)).then(w).then(function(e){return e.text()}).then(function(e){var t=(new at.a).parseFromString(e);return T(t)})},ja=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){var t,a;(t=e,a=2,Object(nt.a)(Object(le.a)(oe.a.mark(function e(){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ga(t));case 1:case"end":return e.stop()}},e)})),{onFailedAttempt:R,retries:a})).then(function(e){c(e)})},[e]),r.filter(function(e){return e.id})},Oa=function(){var e=na(),t=ja(e),a=Object(d.c)(function(e){return e.pricesReducer.spinner}),n=yt(function(e){return e.filter(function(e){return t.map(function(e){return e.id}).includes(e.boardgame_id)})}),c=n.stock_filtered,i=n.store_filtered,o=kt(i);return r.a.createElement(Ot,{child_data:o,stock_filtered:c,store_filtered:i,page_size:500,page_name:"/geeklist/"+e,component:function(e){return a?r.a.createElement(De,null):e.map(function(e,t){return r.a.createElement(E.a,{key:e.id,item:!0,xs:12},r.a.createElement(ha,Object.assign({},e,{alternate:t%2})))})}})},va=function(){var e=Object(d.c)(function(e){return e.pricesReducer.cart_results}),t=yt(function(){return e}),a=t.store_filtered,n=t.stock_filtered;return r.a.createElement(Ot,{child_data:a,stock_filtered:n,store_filtered:a,page_name:"/compare",component:function(e){return e.map(function(e){return r.a.createElement(E.a,{key:e.id,item:!0,xs:12,md:6,lg:4},r.a.createElement(Mt,{boardgame:e}))})}})},_a=function(e){var t=e.request,a=e.children,c=e.initialState,i=Object(n.useState)(null),o=Object(b.a)(i,2),l=o[0],u=o[1],s=Object(n.useState)(!1),m=Object(b.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(c||{}),E=Object(b.a)(f,2),h=E[0],g=E[1];return Object(n.useEffect)(function(){fetch(t).then(function(e){return e.json()}).then(function(e){p(!0),g(e)},function(e){p(!0),u(e)})},[t]),r.a.createElement(r.a.Fragment,null,r.a.cloneElement(a,{data:h,error:l,isLoaded:d}))},ya=a(567),ka=a(557),Sa=a(558),wa=a(279),Ra=a.n(wa),xa=function(e){var t=e.data;return r.a.createElement(E.a,{container:!0,alignContent:"center",alignItems:"center"},t.sort(function(e,t){return t.items.length-e.items.length}).map(function(e,t){return r.a.createElement(E.a,{key:t,item:!0,xs:12},r.a.createElement(ya.a,null,r.a.createElement(ka.a,{expandIcon:r.a.createElement(Ra.a,null)},r.a.createElement(h.a,null,"Mathtrade ID: ",e.id," - Length: ",e.length," - Cash#: ",e.cash)),r.a.createElement(Sa.a,null,r.a.createElement(E.a,{container:!0},e.items.map(function(e,t){return r.a.createElement(E.a,{key:t,item:!0,xs:12,component:"pre",style:(a=t%2===0,{whiteSpace:"pre-wrap",backgroundColor:a?"white":"lightgrey"})},e);var a})))))}))},Ta=function(){var e=na();return r.a.createElement(Ee.a,{maxWidth:"xl"},r.a.createElement(_a,{request:"https://raw.githubusercontent.com/DictumMortuum/json-api/master/rest/v1/mathtrade/".concat(e,".json"),initialState:[]},r.a.createElement(xa,null)))},Ia=Object(g.a)(function(e){return{root:{background:"#d8dee9",fontFamily:"sans"},appbar:{marginBottom:e.spacing(4)},bottomBar:{top:"auto",bottom:0},content:{minHeight:"90vh",padding:10},margin:{color:"white"},pagination:{padding:e.spacing(1)},large:{width:e.spacing(20),height:e.spacing(20),margin:"auto"}}}),Ca=function(e){return r.a.createElement(ne.a,Object.assign({variant:"outlined",square:!0},e))},Na=function(e){var t=e.loginWithRedirect;return r.a.createElement(je.a,{onClick:function(){return t()},color:"inherit"},"Login")},Wa=function(e){var t=e.user,a=e.logout,n=t.picture,c=t.name;return r.a.createElement(D.a,{onClick:function(){return a({returnTo:window.location.origin})}},r.a.createElement(Oe.a,{alt:c,src:n}))},Aa=function(e){var t=e.matches,a=e.isAuthenticated,c=e.loginWithRedirect,i=e.logout,o=e.user;return r.a.createElement(G.a,null,t&&r.a.createElement(n.Fragment,null,a?r.a.createElement(Wa,{logout:i,user:o}):r.a.createElement(Na,{loginWithRedirect:c})))},Da=function(e){var t=e.id,a=e.play,c=e.user,i=Ia(),o=Object(n.useState)(1),l=Object(b.a)(o,2),u=l[0],s=l[1];return Object(n.useEffect)(function(){fetch("".concat("https://vfnf0m.deta.dev","/play-votes/").concat(t,"-").concat(a,"-").concat(c.email),{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){void 0!==e.grade?s(e.grade):s(1)})},[]),r.a.createElement(E.a,{container:!0,justifyContent:"center",component:ne.a,style:{textAlign:"center"}},r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(Oe.a,{variant:"rounded",src:"https://raw.githubusercontent.com/DictumMortuum/json-api/master/rest/v1/boardgames/".concat(t,"/image.avif"),className:i.large})),r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(K.a,{className:i.formControl},r.a.createElement(q.a,{value:u,onChange:function(e){s(e.target.value),fetch("".concat("https://vfnf0m.deta.dev","/play-votes/").concat(t,"-").concat(a,"-").concat(c.email),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({grade:e.target.value})})}},r.a.createElement(J.a,{value:2},"YES"),r.a.createElement(J.a,{value:0},"NO"),r.a.createElement(J.a,{value:1},"MEH")))))},La=function(e){var t=e.id,a=e.user,c=Object(n.useState)(null),i=Object(b.a)(c,2),o=i[0],l=i[1];return Object(n.useEffect)(function(){fetch("".concat("https://vfnf0m.deta.dev","/plays/").concat(t),{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){l(e)})},[]),void 0===a||null===o?r.a.createElement(r.a.Fragment,null):r.a.createElement(E.a,{container:!0,justifyContent:"center",spacing:2},o.boardgames.map(function(e){return r.a.createElement(E.a,{key:e,item:!0,xs:12,md:6,lg:3},r.a.createElement(Da,{id:e,play:t,user:a}))}))},Fa=function(e){var t=Ia(),a=Object(ae.a)(function(e){return e.breakpoints.up("md")}),n=Object(d.c)(function(e){return e.pricesReducer.date}),c=Se(),i=c.loginWithRedirect,o=c.logout,u=c.isAuthenticated,s=c.user,m=Object(l.g)().pathname.split("/")[2];return r.a.createElement(E.a,{container:!0,className:t.root,alignContent:"center",alignItems:"center"},r.a.createElement(M.a,{position:"static",className:t.appbar},r.a.createElement(Aa,{user:s,breadcrumbs:!0,matches:a,isAuthenticated:u,loginWithRedirect:i,logout:o})),r.a.createElement(Ee.a,{maxWidth:"lg"},r.a.createElement(E.a,{container:!0,spacing:4,component:Ca,className:t.content},r.a.createElement(E.a,{item:!0,md:12,xs:12,component:"div"},r.a.createElement(La,{id:m,user:s})))),!a&&r.a.createElement(M.a,{position:"fixed",className:t.bottomBar},r.a.createElement(Aa,{user:s,breadcrumbs:!1,matches:!a,isAuthenticated:u,loginWithRedirect:i,logout:o})),r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(G.a,null,r.a.createElement(h.a,{variant:"body1",color:"inherit"},"\xa9 2023 Dimitris Raviolos - ",he.version," - Last update: ",new Date(n).toLocaleDateString("el-GR")))))},Pa=a(127),Ha=a(206),Ba=Object(Pa.a)("prices",Object(le.a)(oe.a.mark(function e(){var t,a,n,r;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S+"/rest/v1/prices.json.gz").then(function(e){return e.arrayBuffer()});case 2:return t=e.sent,a=new Uint8Array(t),n=Ha.a(a),r=Ha.b(n),e.abrupt("return",JSON.parse(r||[]));case 7:case"end":return e.stop()}},e)}))),Ma=Object(Pa.a)("stores",Object(le.a)(oe.a.mark(function e(){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S+"/rest/v1/stores.json").then(function(e){return e.json()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))),Ga=Object(Pa.a)("date",Object(le.a)(oe.a.mark(function e(){var t,a;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("date"),e.next=3,fetch(S+"/rest/v1/date.json").then(function(e){return e.json()});case 3:return a=e.sent,t!==a.date&&(console.log("updated!",t,a.date),localStorage.setItem("date",a.date),localStorage.setItem("pull","true")),e.abrupt("return",a);case 6:case"end":return e.stop()}},e)}))),Ua=function(){var e=Object(d.b)(),t=Object(F.g)("store",Object(F.h)(F.c,[-1])),a=Object(b.a)(t,1)[0],c=Object(F.g)("bgg_id",Object(F.h)(F.c,[])),i=Object(b.a)(c,1)[0],o=Object(F.g)("stock",Object(F.h)(F.b,0)),u=Object(b.a)(o,1)[0],s=Object(F.g)("bgg_username",F.e),m=Object(b.a)(s,1)[0],p=Object(F.g)("stores_view",Object(F.h)(F.a,!1)),f=Object(b.a)(p,1)[0],E=Object(F.g)("price_filter",Object(F.h)(F.a,!1)),h=Object(b.a)(E,1)[0],g=Object(F.g)("best_prices",Object(F.h)(F.a,!1)),j=Object(b.a)(g,1)[0],O=Object(F.g)("min",Object(F.h)(F.b,0)),v=Object(b.a)(O,1)[0],_=Object(F.g)("max",Object(F.h)(F.b,500)),y=Object(b.a)(_,1)[0];return Object(n.useEffect)(function(){e(Ba()),e(Ma()),e(Ga())},[]),Object(n.useEffect)(function(){e({type:"SET_STORE",store:a})},[a]),Object(n.useEffect)(function(){e({type:"SET_STOCK",stock:u})},[u]),Object(n.useEffect)(function(){e({type:"SET_WISHLIST_USERNAME",payload:m})},[m]),Object(n.useEffect)(function(){e({type:"SET_CART",payload:i})},[i]),Object(n.useEffect)(function(){e({type:"SET_WISHLIST_VIEW",payload:f})},[f]),Object(n.useEffect)(function(){e({type:"SET_PRICE_FILTER",payload:h}),e({type:"SET_PRICE_RANGE",payload:[v,y]})},[v,y,h]),Object(n.useEffect)(function(){e({type:"SET_BEST_PRICE",payload:j})},[j]),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0},r.a.createElement(St,null)),r.a.createElement(l.a,{path:"/cart",exact:!0},r.a.createElement(da,null)),r.a.createElement(l.a,{path:"/search",exact:!0},r.a.createElement(ba,null)),r.a.createElement(l.a,{path:"/wishlist",exact:!0},r.a.createElement(ma,null)),r.a.createElement(l.a,{path:"/mathtrade/:mathtrade_id",exact:!0},r.a.createElement(Ta,null)),r.a.createElement(l.a,{path:"/play/:play_id",exact:!0},r.a.createElement(Fa,null)),r.a.createElement(l.a,{path:"/geeklist/:geeklist_id"},r.a.createElement(Oa,null)),r.a.createElement(l.a,{path:"/item/:boardgame_id"},r.a.createElement(ra,null)),r.a.createElement(l.a,{path:"/compare"},r.a.createElement(va,null)))},qa=a(142),za=a(280),Ka=Object(m.combineReducers)({pricesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return{store:[-1],stock:0,order:0,cart_results:[],search_term:"",search_results:[],search_enabled:!1,wishlist_term:"",wishlist_priority:-1,wishlist_stores_view:!1,enable_price_filter:!1,enable_best_price:!1,wishlist:[],prices:[],price_range:[0,200],history:[],stores:[],spinner:!0,date:new Date,user:{isAuthenticated:!1,details:{},saved:!0}};case"prices/fulfilled":return Object(f.a)({},e,{spinner:!1,prices:t.payload});case"date/fulfilled":return Object(f.a)({},e,{date:new Date(t.payload.date)});case"stores/fulfilled":return Object(f.a)({},e,{stores:t.payload});case"SET_STOCK":return Object(f.a)({},e,{stock:t.stock});case"SET_STORE":return Object(f.a)({},e,{store:t.store});case"ADD_TO_CART":return Object(f.a)({},e,{cart_results:[].concat(Object(p.a)(e.cart_results.filter(function(e){return e!==t.cart})),[t.cart])});case"SET_CART":return Object(f.a)({},e,{cart_results:t.payload});case"SET_PRICE_RANGE":return Object(f.a)({},e,{price_range:t.payload});case"SET_PRICE_FILTER":return Object(f.a)({},e,{enable_price_filter:t.payload});case"SET_BEST_PRICE":return Object(f.a)({},e,{enable_best_price:t.payload});case"SET_SEARCH_TERM":return Object(f.a)({},e,{search_term:t.payload,search_enabled:!1});case"EXECUTE_SEARCH":return Object(f.a)({},e,{search_enabled:!0});case"SET_WISHLIST":return Object(f.a)({},e,{wishlist:t.payload});case"SET_WISHLIST_USERNAME":return Object(f.a)({},e,{wishlist_term:t.payload});case"SET_WISHLIST_VIEW":return Object(f.a)({},e,{wishlist_stores_view:t.payload});case"SET_PRIORITY":return Object(f.a)({},e,{wishlist_priority:t.payload});case"TOGGLE_SPINNER":return Object(f.a)({},e,{spinner:!e.spinner});case"SET_USER":return Object(f.a)({},e,{user:Object(f.a)({},t.payload,{saved:!0})});default:return e}}}),Ja=Object(za.composeWithDevTools)(Object(m.applyMiddleware)(qa.a)),Va=Object(m.createStore)(Ka,Ja);Va.dispatch({type:"INIT"});var Ya={transformSearchString:F.f},Xa=Object(u.a)({palette:{primary:{main:"#5e81ac"},secondary:{main:"#bf616a"},text:{primary:"#2e3440"}},overrides:{MuiInputLabel:{root:{backgroundColor:"#ffffff",paddingLeft:"4px",paddingRight:"4px"}}}});i.a.render(r.a.createElement(s.a,{theme:Xa},r.a.createElement(o.a,null,r.a.createElement(d.a,{store:Va},r.a.createElement(l.a,{path:"/"},r.a.createElement(ke.a,{domain:"dev-11hy0hqn.us.auth0.com",clientId:"gEd77V5i5uBswawxfycFKL1eEv8BlhdE",redirectUri:window.location.href},r.a.createElement(F.d,{ReactRouterRoute:l.a,stringifyOptions:Ya},r.a.createElement(Ua,null))))))),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.bbccb61c.chunk.js.map